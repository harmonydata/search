(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[314],{41234:()=>{},29755:(e,t,l)=>{Promise.resolve().then(l.bind(l,43829))},43829:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>b});var s=l(95155),n=l(12115),r=l(68998),i=l(96854),a=l(9552),o=l(10897),d=l(78562),c=l(35417),u=l(9561),h=l(41728),g=l(58581),f=l(28064),x=l(15255),j=l(12800),m=l(66963),v=l(27112),p=l(14969),y=l(42649),w=l(14030);let A={rotations:2,rotationAngles:[-90,0],fontSizes:[12,60],padding:1};function b(){let[e,t]=(0,n.useState)(!0),[l,b]=(0,n.useState)(null),[S,E]=(0,n.useState)(null),[k,q]=(0,n.useState)(null),[_,O]=(0,n.useState)([]),[C,D]=(0,n.useState)({}),[N,F]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,y.Dd)();F(e)}catch(e){console.error("Error fetching filters:",e),b(e instanceof Error?e.message:"Failed to fetch filters")}})()},[]);let P=e=>{console.log("Raw word cloud data:",e);let t=Object.entries(e).map(e=>{let[t,l]=e;return{text:t,value:100*l}});return console.log("Transformed word cloud data:",t),t};return((0,n.useEffect)(()=>{(async()=>{try{t(!0);let[e,l,s]=await Promise.all([(0,y.U4)(C),(0,y.Y3)(C),(0,y.AV)(C)]);console.log("Word cloud API response:",s),console.log("Numeric data API response:",l),console.log("Numeric data keys:",Object.keys(l));let n={};Object.entries(l).forEach(e=>{var t,l;let[s,r]=e;(null==r?void 0:null===(t=r.values)||void 0===t?void 0:t.length)&&(null==r?void 0:null===(l=r.frequencies)||void 0===l?void 0:l.length)?n[s]={values:r.values,frequencies:r.frequencies}:console.warn("Skipping invalid numeric data for ".concat(s,":"),r)}),console.log("Validated numeric data:",n),E(e),q(n),O(P(s.aggregations))}catch(e){console.error("Error fetching data:",e),b(e instanceof Error?e.message:"Failed to fetch data")}finally{t(!1)}})()},[C]),e)?(0,s.jsx)(r.default,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,s.jsx)(i.A,{})}):l?(0,s.jsx)(a.default,{maxWidth:"lg",sx:{mt:4},children:(0,s.jsx)(o.A,{severity:"error",children:l})}):(0,s.jsxs)(a.default,{maxWidth:"lg",sx:{mt:4},children:[(0,s.jsx)(d.A,{sx:{p:3,mb:4},children:(0,s.jsx)(w.A,{filtersData:N,onSelectionChange:(e,t)=>{D(l=>({...l,[e]:t}))},selectedFilters:C})}),(0,s.jsxs)(c.Ay,{container:!0,spacing:4,children:[(0,s.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,s.jsxs)(d.A,{sx:{p:3,height:400},children:[(0,s.jsx)(u.default,{variant:"h6",gutterBottom:!0,children:"Topic Distribution"}),(0,s.jsx)(r.default,{sx:{height:300},children:_.length>0&&(0,s.jsxs)(s.Fragment,{children:[(console.log("Rendering word cloud with data:",_),null),(0,s.jsx)(r.default,{sx:{width:"100%",height:"100%",position:"relative"},children:(0,s.jsx)(h.Ay,{words:_,options:A,minSize:[300,300]})})]})})]})}),k&&Object.entries(k).map(e=>{var t,l;let[n,i]=e;return(console.log("Rendering histogram for ".concat(n,":"),i),(null==i?void 0:null===(t=i.values)||void 0===t?void 0:t.length)&&(null==i?void 0:null===(l=i.frequencies)||void 0===l?void 0:l.length))?(0,s.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,s.jsxs)(d.A,{sx:{p:3,height:400},children:[(0,s.jsxs)(u.default,{variant:"h6",gutterBottom:!0,children:[n.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())," ","Distribution"]}),(0,s.jsx)(r.default,{sx:{height:300},children:(0,s.jsx)(g.u,{width:"100%",height:"100%",children:(0,s.jsxs)(f.E,{data:i.values.map((e,t)=>({value:e,frequency:i.frequencies[t]})),margin:{top:20,right:30,left:20,bottom:5},children:[(0,s.jsx)(x.d,{strokeDasharray:"3 3"}),(0,s.jsx)(j.W,{dataKey:"value"}),(0,s.jsx)(m.h,{dataKey:"frequency"}),(0,s.jsx)(v.m,{}),(0,s.jsx)(p.y,{dataKey:"frequency",fill:"#8884d8"})]})})})]})},n):(console.log("Skipping ".concat(n," - missing data")),null)})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[380,679,282,65,557,831,30,441,517,358],()=>t(29755)),_N_E=e.O()}]);