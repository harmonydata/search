(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{93736:(e,t,r)=>{Promise.resolve().then(r.bind(r,5748))},5748:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(95155),n=r(12115),o=r(9552),i=r(9561),s=r(68998),l=r(70152),c=r(22282),d=r(10979),h=r(2241),u=r(78562),p=r(67247),g=r(51857);function f(){let[e,t]=(0,n.useState)(""),[r,f]=(0,n.useState)(["https://www.bbc.co.uk/news","https://github.com","https://twitter.com","https://www.nature.com/articles/s41586-023-06724-y","https://www.discoverynext.org"]),[x,m]=(0,n.useState)("Here's a paragraph with some embedded links to various websites.\n\nCheck out BBC News at https://www.bbc.co.uk/news for the latest updates.\n\nGitHub is a fantastic platform for developers: https://github.com\n\nIf you're interested in scientific research, this Nature article is fascinating: https://www.nature.com/articles/s41586-023-06724-y.\n\nAnd of course, don't forget to visit https://www.discoverynext.org!"),w=()=>{e&&!r.includes(e)&&(f([e,...r]),t(""))};return(0,a.jsxs)(o.default,{maxWidth:"lg",sx:{py:8},children:[(0,a.jsx)(i.default,{variant:"h4",component:"h1",gutterBottom:!0,children:"Link Preview Component Demo"}),(0,a.jsx)(i.default,{variant:"body1",paragraph:!0,children:"This component fetches Open Graph metadata from URLs and displays them as rich preview cards."}),(0,a.jsxs)(s.default,{sx:{mb:4,display:"flex",gap:2,alignItems:"flex-start"},children:[(0,a.jsx)(l.A,{label:"Enter URL to preview",variant:"outlined",fullWidth:!0,value:e,onChange:e=>t(e.target.value),onKeyDown:e=>{"Enter"===e.key&&w()},placeholder:"https://example.com",sx:{mb:2}}),(0,a.jsx)(c.A,{variant:"contained",onClick:w,sx:{mt:1},children:"Add URL"})]}),(0,a.jsx)(i.default,{variant:"h6",gutterBottom:!0,sx:{mt:4},children:"Standard Preview Cards"}),(0,a.jsx)(d.A,{spacing:3,sx:{mb:6},children:r.map(e=>(0,a.jsx)(p.A,{url:e},e))}),(0,a.jsx)(h.A,{sx:{my:4}}),(0,a.jsx)(i.default,{variant:"h6",gutterBottom:!0,sx:{mt:4},children:"Compact Preview Cards"}),(0,a.jsx)(d.A,{spacing:2,sx:{mb:6},children:r.map(e=>(0,a.jsx)(p.A,{url:e,compact:!0},"compact-".concat(e)))}),(0,a.jsx)(h.A,{sx:{my:4}}),(0,a.jsx)(i.default,{variant:"h6",gutterBottom:!0,sx:{mt:4},children:"Automatic Link Detection in Text"}),(0,a.jsxs)(u.A,{elevation:0,sx:{p:3,mb:4,border:"1px solid",borderColor:"grey.200"},children:[(0,a.jsx)(i.default,{variant:"subtitle1",gutterBottom:!0,children:"Input Text:"}),(0,a.jsx)(l.A,{multiline:!0,rows:10,variant:"outlined",fullWidth:!0,value:x,onChange:e=>m(e.target.value),placeholder:"Enter text with URLs...",sx:{mb:3}}),(0,a.jsx)(i.default,{variant:"subtitle1",gutterBottom:!0,children:"Rendered Output:"}),(0,a.jsx)(u.A,{elevation:0,sx:{p:3,bgcolor:"rgba(0,0,0,0.02)",borderRadius:2,border:"1px solid",borderColor:"grey.200"},children:(0,a.jsx)(g.A,{text:x,compact:!0})})]}),(0,a.jsx)(h.A,{sx:{my:4}}),(0,a.jsx)(i.default,{variant:"subtitle2",color:"text.secondary",sx:{mt:4,textAlign:"center"},children:"Note: Standard cards show more information and are suitable for primary content, while compact cards are ideal for inline text or space-constrained areas."})]})}},67247:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var a=r(95155),n=r(12115),o=r(68998),i=r(9561),s=r(64665),l=r(45704),c=r(5565),d=r(52604),h=r(42649);let u=new Map,p=new Map;function g(e){let{url:t,compact:r=!1,maxHeight:g=250}=e,[f,x]=(0,n.useState)(null),[m,w]=(0,n.useState)(!0),[v,b]=(0,n.useState)(null),[j,y]=(0,n.useState)(!1);(0,n.useEffect)(()=>{!async function(){if(t){w(!0),b(null),y(!1);try{let e=t.toLowerCase(),r=Date.now(),a=p.get(e);if(a&&r-a.timestamp<864e5){console.log("Client cache hit for ".concat(t)),x(a.data),w(!1);return}let n=u.get(e);n?console.log("Reusing in-flight request for ".concat(t)):(console.log("Fetching OpenGraph data for ".concat(t)),n=(0,h.v5)(t).then(t=>(p.set(e,{data:t,timestamp:Date.now()}),t)).finally(()=>{u.delete(e)}),u.set(e,n));let o=await n;x(o)}catch(e){console.error("Error fetching Open Graph data:",e),b(e instanceof Error?e.message:"Failed to fetch link preview")}finally{w(!1)}}}()},[t]);let k=()=>{y(!0)};return v?(0,a.jsxs)(o.default,{component:"a",href:t,target:"_blank",rel:"noopener noreferrer",sx:{textDecoration:"none",color:"primary.main",display:"flex",alignItems:"center",gap:.5,"&:hover":{textDecoration:"underline"}},children:[(0,a.jsx)(i.default,{variant:"body2",sx:{wordBreak:"break-word"},children:t}),(0,a.jsx)(d.A,{size:16})]}):m?(0,a.jsxs)(s.A,{elevation:0,sx:{display:"flex",flexDirection:r?"row":"column",borderRadius:"8px",overflow:"hidden",width:"100%",maxWidth:r?"100%":500,height:r?100:"auto",maxHeight:g,border:"1px solid",borderColor:"grey.200",transition:"all 0.2s"},children:[!r&&(0,a.jsx)(l.A,{variant:"rectangular",width:"100%",height:140}),(0,a.jsxs)(o.default,{sx:{flex:1,p:1.5,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,a.jsx)(l.A,{variant:"text",width:"80%",height:24}),!r&&(0,a.jsx)(l.A,{variant:"text",width:"90%",height:18,sx:{mt:1}}),(0,a.jsxs)(o.default,{sx:{display:"flex",alignItems:"center",mt:1,gap:1},children:[(0,a.jsx)(l.A,{variant:"circular",width:16,height:16}),(0,a.jsx)(l.A,{variant:"text",width:120,height:16})]})]}),r&&(0,a.jsx)(l.A,{variant:"rectangular",width:80,height:"100%"})]}):f?(0,a.jsxs)(s.A,{elevation:0,sx:{display:"flex",flexDirection:r?"row":"column",borderRadius:"8px",overflow:"hidden",width:"100%",maxWidth:r?"100%":500,height:r?100:"auto",maxHeight:g,border:"1px solid",borderColor:"grey.200",cursor:"pointer",transition:"all 0.2s","&:hover":{boxShadow:2,borderColor:"primary.main"}},onClick:()=>{window.open(t,"_blank","noopener,noreferrer")},children:[f.image&&!j&&!r&&(0,a.jsx)(o.default,{sx:{position:"relative",width:"100%",height:140,overflow:"hidden",bgcolor:"rgba(0,0,0,0.03)"},children:(0,a.jsx)(c.default,{src:f.image,alt:f.title||"Link preview",fill:!0,style:{objectFit:"cover"},onError:k,unoptimized:!0})}),(0,a.jsxs)(o.default,{sx:{flex:1,p:1.5,display:"flex",flexDirection:"column",justifyContent:"space-between",bgcolor:"rgba(0,0,0,0.01)"},children:[(0,a.jsxs)(o.default,{children:[(0,a.jsx)(i.default,{variant:"subtitle1",component:"h3",sx:{fontWeight:500,fontSize:r?"0.9rem":"1rem",lineHeight:1.2,mb:.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:f.title}),!r&&f.description&&(0,a.jsx)(i.default,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.8rem",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",mb:1,height:"2.4em"},children:f.description})]}),(0,a.jsxs)(o.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[f.favicon&&(0,a.jsx)(o.default,{sx:{width:16,height:16,position:"relative",overflow:"hidden",borderRadius:"2px",flexShrink:0},children:(0,a.jsx)(c.default,{src:f.favicon,alt:f.siteName||"Site icon",width:16,height:16,style:{objectFit:"contain"},unoptimized:!0})}),(0,a.jsx)(i.default,{variant:"caption",sx:{color:"text.secondary",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:"0.7rem"},children:f.siteName||new URL(f.finalUrl||f.url).hostname}),(0,a.jsx)(d.A,{size:12,color:"#666",style:{marginLeft:"auto"}})]})]}),f.image&&!j&&r&&(0,a.jsx)(o.default,{sx:{position:"relative",width:80,minWidth:80,height:"100%",overflow:"hidden",bgcolor:"rgba(0,0,0,0.03)"},children:(0,a.jsx)(c.default,{src:f.image,alt:f.title||"Link preview",fill:!0,style:{objectFit:"cover"},onError:k,unoptimized:!0})})]}):null}},51857:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(95155),n=r(12115),o=r(68998),i=r(9561),s=r(67247);let l=/(https?:\/\/[^\s]+)/g;function c(e){let{text:t,compact:r=!1,paragraphProps:c={}}=e,d=(0,n.useRef)(null),[h,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=new IntersectionObserver(t=>{let[r]=t;r.isIntersecting&&(u(!0),d.current&&e.unobserve(d.current))},{rootMargin:"100px",threshold:.1});return d.current&&e.observe(d.current),()=>{d.current&&e.unobserve(d.current)}},[]);let p=(0,n.useMemo)(()=>{if(!t)return[{type:"text",content:""}];let e=t.split(l),r=t.match(l)||[],a=[];for(let t=0;t<e.length;t++)if(e[t]&&a.push({type:"text",content:e[t]}),t<r.length){let e=r[t];(e.endsWith(".")||e.endsWith(",")||e.endsWith(";")||e.endsWith(":")||e.endsWith(")"))&&(e=e.slice(0,-1)),a.push({type:"url",content:e})}return a},[t]);return(0,a.jsx)(o.default,{ref:d,sx:{display:"flex",flexDirection:"column",gap:2},children:p.map((e,t)=>"text"===e.type?(0,a.jsx)(i.default,{variant:"body1",...c,sx:{...c.sx,whiteSpace:"pre-wrap"},children:e.content},"text-".concat(t)):h?(0,a.jsx)(s.A,{url:e.content,compact:r},"url-".concat(t)):(0,a.jsx)(o.default,{component:"a",href:e.content,target:"_blank",rel:"noopener noreferrer",sx:{color:"primary.main",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:e.content},"url-placeholder-".concat(t)))})}},42649:(e,t,r)=>{"use strict";r.d(t,{AV:()=>d,Dd:()=>n,Hu:()=>o,U4:()=>l,Y3:()=>c,v5:()=>s,w3:()=>i});let a="https://harmonydiscoveryapiweaviate.fastdatascience.com";async function n(){let e=await fetch("".concat(a,"/discover/aggregate"),{method:"GET"});if(!e.ok){let t=await e.text();throw console.error("fetchAggregateFilters error. Status:",e.status,"Response:",t),Error("Failed to fetch aggregate filters")}let t=await e.json();window.__lastAggregateResponse=t,console.log("Aggregate API response cached in window.__lastAggregateResponse for debugging"),console.log("Aggregate response:",{aggregationKeys:Object.keys(t.aggregations||{}),sampleKeys:Object.keys(t.aggregations||{}).slice(0,3).map(e=>({key:e,value:t.aggregations[e]}))});let r=t.aggregations||{};return Object.keys(r).map(e=>({id:e,label:e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),options:Object.keys(r[e])}))}async function o(e,t){var r,n;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,s=!(arguments.length>4)||void 0===arguments[4]||arguments[4],l=arguments.length>5?arguments[5]:void 0,c=new URLSearchParams,d=t&&Object.keys(t).length>0;if(!e&&!d)return{results:[],aggregations:{},num_hits:0};let h=e&&""!==e.trim()?e.trim():"*";void 0!==l&&c.set("alpha",l.toString()),c.append("query",h);let u=(o-1)*i;c.set("num_results",i.toString()),c.set("offset",u.toString());let p={};if(t)for(let e in t)if(e.endsWith("_min")||e.endsWith("_max")){let r=e.replace(/_(min|max)$/,"");p[r]||(p[r]={}),e.endsWith("_min")?p[r].min=t[e][0]:p[r].max=t[e][0],c.append(e,t[e][0])}else t[e].forEach(t=>{c.append(e,t)});let g=s?"search2":"search",f="".concat(a,"/discover/").concat(g,"?").concat(c.toString());console.log("Search URL:",f),Object.keys(p).length>0&&console.log("Numeric range parameters:",p);let x=await fetch(f);if(!x.ok)throw console.error("Search API error:",x.status,await x.text()),Error("Search API request failed");let m=await x.json();return window.__lastSearchResponse=m,console.log("Search API response cached in window.__lastSearchResponse for debugging"),console.log("Search results:",{totalHits:m.num_hits,resultCount:(null===(r=m.results)||void 0===r?void 0:r.length)||0,firstResult:null===(n=m.results)||void 0===n?void 0:n[0],aggregations:Object.keys(m.aggregations||{}),endpoint:g,hybridWeight:l}),{results:m.results||[],aggregations:m.aggregations||{},num_hits:m.num_hits}}async function i(e){let t="".concat(a,"/discover/lookup?uuid=").concat(e),r=await fetch(t);if(!r.ok)throw console.error("Failed to fetch result by UUID:",r.statusText),Error("Failed to fetch result by UUID: ".concat(r.statusText));let n=await r.json();return window.__lastLookupResponse=n,n.results[0]}async function s(e){let t=await fetch("https://harmonydiscoverynodefunctionapp1.azurewebsites.net/api/ogData?url=".concat(encodeURIComponent(e)));if(!t.ok)throw Error("Failed to fetch OpenGraph data");return t.json()}async function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[r,a]=e;a.length>0&&a.forEach(e=>{t.append(r,e)})});let r=await fetch("".concat(a,"/discover/aggregate?").concat(t.toString()),{headers:{accept:"application/json"}});if(!r.ok)throw Error("Failed to fetch aggregate data");return r.json()}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[r,a]=e;a.length>0&&a.forEach(e=>{t.append(r,e)})});let r=await fetch("".concat(a,"/discover/get_numeric_values?").concat(t.toString()),{headers:{accept:"application/json"}});if(!r.ok)throw Error("Failed to fetch numeric values");return r.json()}async function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[r,a]=e;a.length>0&&a.forEach(e=>{t.append(r,e)})});let r=await fetch("".concat(a,"/discover/get_word_cloud?").concat(t.toString()),{headers:{accept:"application/json"}});if(!r.ok)throw Error("Failed to fetch word cloud data");return r.json()}}},e=>{var t=t=>e(e.s=t);e.O(0,[380,679,282,65,565,920,441,517,358],()=>t(93736)),_N_E=e.O()}]);