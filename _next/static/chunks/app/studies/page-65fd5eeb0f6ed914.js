(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{5465:(e,t,a)=>{Promise.resolve().then(a.bind(a,32905))},32905:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var o=a(95155),r=a(12115),s=a(9552),n=a(9561),i=a(35417),l=a(68998),d=a(42649),c=a(64665),u=a(42479),h=a(49234),g=a(5565),f=a(48173),p=a.n(f),v=a(1234),x=a(9450),m=a(64364);function y(e){var t,a,s,i,d,f,y,_,w,j,b,k,A,S,E,O,C;let{study:R}=e,[z,F]=(0,r.useState)(!1),P=(null===(t=R.dataset_schema)||void 0===t?void 0:t.name)||(null===(a=R.extra_data)||void 0===a?void 0:a.name)||"Untitled Study",W=(null===(s=R.dataset_schema)||void 0===s?void 0:s.description)||(null===(i=R.extra_data)||void 0===i?void 0:i.description)||"",L=null===(d=R.extra_data)||void 0===d?void 0:d.slug,U=(null===(f=R.extra_data)||void 0===f?void 0:f.resource_type)||(null===(y=R.dataset_schema)||void 0===y?void 0:y["@type"])||"",H=null===(_=R.dataset_schema)||void 0===_?void 0:_.number_of_variables,T=null===(w=R.extra_data)||void 0===w?void 0:w.country_codes,I=null===(j=R.extra_data)||void 0===j?void 0:j.study_design,N=null;(null===(b=R.dataset_schema)||void 0===b?void 0:b.image)&&!z?N=R.dataset_schema.image:R.image&&!z&&(N=R.image);let B=null===(S=R.dataset_schema)||void 0===S?void 0:null===(A=S.publisher)||void 0===A?void 0:null===(k=A[0])||void 0===k?void 0:k.name,D=null===(C=R.dataset_schema)||void 0===C?void 0:null===(O=C.includedInDataCatalog)||void 0===O?void 0:null===(E=O[0])||void 0===E?void 0:E.name,q=W.length>200?"".concat(W.substring(0,200),"..."):W,M=(0,o.jsxs)(c.A,{sx:{height:"100%",display:"flex",flexDirection:"column",cursor:L?"pointer":"default","&:hover":L?{boxShadow:4,transform:"translateY(-2px)"}:{},transition:"all 0.2s ease-in-out"},children:[(0,o.jsx)(l.default,{sx:{height:200,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"grey.50",borderBottom:"1px solid",borderColor:"grey.200"},children:N&&!z?(0,o.jsx)(g.default,{src:N,alt:P,width:180,height:180,style:{objectFit:"contain",maxHeight:"180px"},onError:()=>F(!0),unoptimized:!0}):(0,o.jsx)(l.default,{sx:{color:"grey.400"},children:U.includes("dataset")?(0,o.jsx)(v.A,{size:64}):U.includes("study")?(0,o.jsx)(x.A,{size:64}):(0,o.jsx)(m.A,{size:64})})}),(0,o.jsxs)(u.A,{sx:{flex:1,display:"flex",flexDirection:"column",p:3},children:[(0,o.jsx)(n.default,{variant:"h6",component:"h2",gutterBottom:!0,sx:{fontWeight:600,lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",minHeight:"2.4em"},children:P}),(0,o.jsx)(n.default,{variant:"body2",color:"text.secondary",sx:{mb:2,flex:1,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:q}),(0,o.jsxs)(l.default,{sx:{mt:"auto"},children:[H&&(0,o.jsx)(l.default,{sx:{mb:1},children:(0,o.jsxs)(n.default,{variant:"caption",color:"text.secondary",children:[H.toLocaleString()," variables"]})}),B&&(0,o.jsx)(l.default,{sx:{mb:1},children:(0,o.jsxs)(n.default,{variant:"caption",color:"text.secondary",children:["Published by ",B]})}),D&&(0,o.jsx)(l.default,{sx:{mb:2},children:(0,o.jsxs)(n.default,{variant:"caption",color:"text.secondary",children:["Available in ",D]})}),(0,o.jsxs)(l.default,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:[null==T?void 0:T.slice(0,3).map(e=>(0,o.jsx)(h.A,{label:e,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20}},e)),null==I?void 0:I.slice(0,2).map(e=>(0,o.jsx)(h.A,{label:e,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.7rem",height:20}},e))]})]})]})]});return L?(0,o.jsx)(p(),{href:"/studies/".concat(L),style:{textDecoration:"none"},children:M}):M}function _(){let[e,t]=(0,r.useState)([]),[a,c]=(0,r.useState)(!0),[u,h]=(0,r.useState)(null);return((0,r.useEffect)(()=>{(async function(){try{c(!0);let e=await (0,d.Hu)("*",{resource_type:["study"]},1,100,!1);t(e.results||[])}catch(e){console.error("Failed to load studies:",e),h("Failed to load studies")}finally{c(!1)}})()},[]),a)?(0,o.jsxs)(s.default,{maxWidth:"xl",sx:{py:4},children:[(0,o.jsx)(n.default,{variant:"h4",component:"h1",gutterBottom:!0,children:"All Studies"}),(0,o.jsx)(n.default,{children:"Loading studies..."})]}):u?(0,o.jsxs)(s.default,{maxWidth:"xl",sx:{py:4},children:[(0,o.jsx)(n.default,{variant:"h4",component:"h1",gutterBottom:!0,children:"All Studies"}),(0,o.jsx)(n.default,{color:"error",children:u})]}):(0,o.jsxs)(s.default,{maxWidth:"xl",sx:{py:4},children:[(0,o.jsx)(n.default,{variant:"h4",component:"h1",gutterBottom:!0,sx:{mb:4},children:"All Studies"}),(0,o.jsx)(n.default,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Browse through all available studies in our database"}),(0,o.jsx)(i.Ay,{container:!0,spacing:3,children:e.map(e=>{var t,a;return(0,o.jsx)(i.Ay,{item:!0,xs:12,sm:6,lg:4,xl:3,children:(0,o.jsx)(y,{study:e})},(null===(t=e.extra_data)||void 0===t?void 0:t.uuid)||(null===(a=e.dataset_schema)||void 0===a?void 0:a.name))})}),0===e.length&&(0,o.jsx)(l.default,{sx:{textAlign:"center",py:8},children:(0,o.jsx)(n.default,{variant:"h6",color:"text.secondary",children:"No studies found"})})]})}},42649:(e,t,a)=>{"use strict";a.d(t,{AV:()=>u,Dd:()=>r,Hu:()=>s,Pn:()=>l,U4:()=>d,Y3:()=>c,dh:()=>h,v5:()=>i,w3:()=>n});let o="https://harmonydataweaviate.azureedge.net";async function r(){let e=await fetch("".concat(o,"/discover/aggregate"),{method:"GET"});if(!e.ok){let t=await e.text();throw console.error("fetchAggregateFilters error. Status:",e.status,"Response:",t),Error("Failed to fetch aggregate filters")}let t=await e.json();window.__lastAggregateResponse=t,console.log("Aggregate API response cached in window.__lastAggregateResponse for debugging"),console.log("Aggregate response:",{aggregationKeys:Object.keys(t.aggregations||{}),sampleKeys:Object.keys(t.aggregations||{}).slice(0,3).map(e=>({key:e,value:t.aggregations[e]}))});let a=t.aggregations||{};return Object.keys(a).map(e=>({id:e,label:e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),options:Object.keys(a[e])}))}async function s(e,t){var a,r;let s,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,d=!(arguments.length>4)||void 0===arguments[4]||arguments[4],c=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,g=t&&Object.keys(t).length>0;if(!e&&!g)return{results:[],aggregations:{},num_hits:0};let f=e&&""!==e.trim()?e.trim():"",p=u&&u.length>0&&!d,v=d?"search2":"search",x="".concat(o,"/discover/").concat(v);if(p){s=x;let e={query:[f],num_results:l},a=void 0!==h?h:(i-1)*l;e.offset=a,void 0!==c&&(e.alpha=c),e.top_level_ids_seen_so_far=u,t&&Object.entries(t).forEach(t=>{let[a,o]=t;o.length>0&&(e[a]=o)}),n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},console.log("Using POST request for pagination with body:",{query:[f],topLevelIdsCount:u.length,offset:a,endpoint:v})}else{let e=new URLSearchParams;void 0!==c&&e.set("alpha",c.toString()),e.append("query",f);let a=void 0!==h?h:(i-1)*l;e.set("num_results",l.toString()),e.set("offset",a.toString());let o={};if(t)for(let a in t)if(a.endsWith("_min")||a.endsWith("_max")){let r=a.replace(/_(min|max)$/,"");o[r]||(o[r]={}),a.endsWith("_min")?o[r].min=t[a][0]:o[r].max=t[a][0],e.append(a,t[a][0])}else t[a].forEach(t=>{e.append(a,t)});s="".concat(x,"?").concat(e.toString()),n={method:"GET"},Object.keys(o).length>0&&console.log("Numeric range parameters:",o),console.log("Using GET request:",s)}let m=await fetch(s,n);if(!m.ok)throw console.error("Search API error:",m.status,await m.text()),Error("Search API request failed");let y=await m.json();return window.__lastSearchResponse=y,console.log("Search API response cached in window.__lastSearchResponse for debugging"),console.log("Search results:",{totalHits:y.num_hits,resultCount:(null===(a=y.results)||void 0===a?void 0:a.length)||0,firstResult:null===(r=y.results)||void 0===r?void 0:r[0],aggregations:Object.keys(y.aggregations||{}),endpoint:v,method:p?"POST":"GET",hybridWeight:c}),{results:y.results||[],aggregations:y.aggregations||{},num_hits:y.num_hits,top_level_ids_seen_so_far:y.top_level_ids_seen_so_far||[],next_page_offset:y.next_page_offset}}async function n(e){let t="".concat(o,"/discover/lookup?uuid=").concat(e),a=await fetch(t);if(!a.ok)throw console.error("Failed to fetch result by UUID:",a.statusText),Error("Failed to fetch result by UUID: ".concat(a.statusText));let r=await a.json();return window.__lastLookupResponse=r,r.results[0]}async function i(e){let t=await fetch("https://harmonydata.azureedge.net/api/ogData?url=".concat(encodeURIComponent(e)));if(!t.ok)throw Error("Failed to fetch OpenGraph data");return t.json()}async function l(){let e=await fetch("".concat(o,"/info/version"));if(!e.ok)throw console.error("Failed to fetch version info:",e.statusText),Error("Failed to fetch version info");let t=await e.json();return window.__lastVersionResponse=t,console.log("Version API response cached in window.__lastVersionResponse for debugging"),t}async function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,o]=e;o.length>0&&o.forEach(e=>{t.append(a,e)})});let a=await fetch("".concat(o,"/discover/aggregate?").concat(t.toString()),{headers:{accept:"application/json"}});if(!a.ok)throw Error("Failed to fetch aggregate data");return a.json()}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,o]=e;o.length>0&&o.forEach(e=>{t.append(a,e)})});let a=await fetch("".concat(o,"/discover/get_numeric_values?").concat(t.toString()),{headers:{accept:"application/json"}});if(!a.ok)throw Error("Failed to fetch numeric values");return a.json()}async function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,o]=e;o.length>0&&o.forEach(e=>{t.append(a,e)})});let a=await fetch("".concat(o,"/discover/get_word_cloud?").concat(t.toString()),{headers:{accept:"application/json"}});if(!a.ok)throw Error("Failed to fetch word cloud data");return a.json()}async function h(){let e=await fetch("".concat(o,"/discover/sources"),{headers:{accept:"application/json"}});if(!e.ok)throw Error("Failed to fetch sources data");return e.json()}},14057:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var o=a(12115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,o.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:d="",children:c,iconNode:u,...h}=e;return(0,o.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:a,strokeWidth:l?24*Number(i)/Number(r):i,className:s("lucide",d),...h},[...u.map(e=>{let[t,a]=e;return(0,o.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),l=(e,t)=>{let a=(0,o.forwardRef)((a,n)=>{let{className:l,...d}=a;return(0,o.createElement)(i,{ref:n,iconNode:t,className:s("lucide-".concat(r(e)),l),...d})});return a.displayName="".concat(e),a}},9450:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});let o=(0,a(14057).A)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]])},1234:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});let o=(0,a(14057).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},64364:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});let o=(0,a(14057).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[380,679,970,976,234,173,779,441,517,358],()=>t(5465)),_N_E=e.O()}]);