(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{5465:(e,t,a)=>{Promise.resolve().then(a.bind(a,32905))},32905:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var o=a(95155),n=a(12115),s=a(9552),i=a(9561),r=a(35417),l=a(68998),d=a(42649),c=a(64665),h=a(42479),u=a(49234),g=a(5565),f=a(48173),p=a.n(f),v=a(1234),x=a(9450),m=a(64364);function y(e){var t,a,s,r,d,f,y,_,w,j,b,k,S,A,E,O,P;let{study:R}=e,[U,F]=(0,n.useState)(!1),W=(null===(t=R.dataset_schema)||void 0===t?void 0:t.name)||(null===(a=R.extra_data)||void 0===a?void 0:a.name)||"Untitled Study",z=(null===(s=R.dataset_schema)||void 0===s?void 0:s.description)||(null===(r=R.extra_data)||void 0===r?void 0:r.description)||"",C=null===(d=R.extra_data)||void 0===d?void 0:d.slug,H=(null===(f=R.extra_data)||void 0===f?void 0:f.resource_type)||(null===(y=R.dataset_schema)||void 0===y?void 0:y["@type"])||"",L=null===(_=R.dataset_schema)||void 0===_?void 0:_.number_of_variables,T=null===(w=R.extra_data)||void 0===w?void 0:w.country_codes,I=null===(j=R.extra_data)||void 0===j?void 0:j.study_design,q=null;(null===(b=R.dataset_schema)||void 0===b?void 0:b.image)&&!U?q=R.dataset_schema.image:R.image&&!U&&(q=R.image);let B=null===(A=R.dataset_schema)||void 0===A?void 0:null===(S=A.publisher)||void 0===S?void 0:null===(k=S[0])||void 0===k?void 0:k.name,D=null===(P=R.dataset_schema)||void 0===P?void 0:null===(O=P.includedInDataCatalog)||void 0===O?void 0:null===(E=O[0])||void 0===E?void 0:E.name,M=z.length>200?"".concat(z.substring(0,200),"..."):z,V=(0,o.jsxs)(c.A,{sx:{height:"100%",display:"flex",flexDirection:"column",cursor:C?"pointer":"default","&:hover":C?{boxShadow:4,transform:"translateY(-2px)"}:{},transition:"all 0.2s ease-in-out"},children:[(0,o.jsx)(l.default,{sx:{height:200,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"grey.50",borderBottom:"1px solid",borderColor:"grey.200"},children:q&&!U?(0,o.jsx)(g.default,{src:q,alt:W,width:180,height:180,style:{objectFit:"contain",maxHeight:"180px"},onError:()=>F(!0),unoptimized:!0}):(0,o.jsx)(l.default,{sx:{color:"grey.400"},children:H.includes("dataset")?(0,o.jsx)(v.A,{size:64}):H.includes("study")?(0,o.jsx)(x.A,{size:64}):(0,o.jsx)(m.A,{size:64})})}),(0,o.jsxs)(h.A,{sx:{flex:1,display:"flex",flexDirection:"column",p:3},children:[(0,o.jsx)(i.default,{variant:"h6",component:"h2",gutterBottom:!0,sx:{fontWeight:600,lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",minHeight:"2.4em"},children:W}),(0,o.jsx)(i.default,{variant:"body2",color:"text.secondary",sx:{mb:2,flex:1,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:M}),(0,o.jsxs)(l.default,{sx:{mt:"auto"},children:[L&&(0,o.jsx)(l.default,{sx:{mb:1},children:(0,o.jsxs)(i.default,{variant:"caption",color:"text.secondary",children:[L.toLocaleString()," variables"]})}),B&&(0,o.jsx)(l.default,{sx:{mb:1},children:(0,o.jsxs)(i.default,{variant:"caption",color:"text.secondary",children:["Published by ",B]})}),D&&(0,o.jsx)(l.default,{sx:{mb:2},children:(0,o.jsxs)(i.default,{variant:"caption",color:"text.secondary",children:["Available in ",D]})}),(0,o.jsxs)(l.default,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:[null==T?void 0:T.slice(0,3).map(e=>(0,o.jsx)(u.A,{label:e,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20}},e)),null==I?void 0:I.slice(0,2).map(e=>(0,o.jsx)(u.A,{label:e,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.7rem",height:20}},e))]})]})]})]});return C?(0,o.jsx)(p(),{href:"/studies/".concat(C),style:{textDecoration:"none"},children:V}):V}function _(){let[e,t]=(0,n.useState)([]),[a,c]=(0,n.useState)(!0),[h,u]=(0,n.useState)(null);return((0,n.useEffect)(()=>{(async function(){try{c(!0);let e=await (0,d.Hu)("*",{resource_type:["study"]},1,100,!1);t(e.results||[])}catch(e){console.error("Failed to load studies:",e),u("Failed to load studies")}finally{c(!1)}})()},[]),a)?(0,o.jsxs)(s.default,{maxWidth:"xl",sx:{py:4},children:[(0,o.jsx)(i.default,{variant:"h4",component:"h1",gutterBottom:!0,children:"All Studies"}),(0,o.jsx)(i.default,{children:"Loading studies..."})]}):h?(0,o.jsxs)(s.default,{maxWidth:"xl",sx:{py:4},children:[(0,o.jsx)(i.default,{variant:"h4",component:"h1",gutterBottom:!0,children:"All Studies"}),(0,o.jsx)(i.default,{color:"error",children:h})]}):(0,o.jsxs)(s.default,{maxWidth:"xl",sx:{py:4},children:[(0,o.jsx)(i.default,{variant:"h4",component:"h1",gutterBottom:!0,sx:{mb:4},children:"All Studies"}),(0,o.jsx)(i.default,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Browse through all available studies in our database"}),(0,o.jsx)(r.Ay,{container:!0,spacing:3,children:e.map(e=>{var t,a;return(0,o.jsx)(r.Ay,{item:!0,xs:12,sm:6,lg:4,xl:3,children:(0,o.jsx)(y,{study:e})},(null===(t=e.extra_data)||void 0===t?void 0:t.uuid)||(null===(a=e.dataset_schema)||void 0===a?void 0:a.name))})}),0===e.length&&(0,o.jsx)(l.default,{sx:{textAlign:"center",py:8},children:(0,o.jsx)(i.default,{variant:"h6",color:"text.secondary",children:"No studies found"})})]})}},42649:(e,t,a)=>{"use strict";a.d(t,{AV:()=>h,Dd:()=>n,Hu:()=>s,Pn:()=>l,U4:()=>d,Y3:()=>c,dh:()=>u,v5:()=>r,w3:()=>i});let o="https://harmonydataweaviate.azureedge.net";async function n(){let e=await fetch("".concat(o,"/discover/aggregate"),{method:"GET"});if(!e.ok){let t=await e.text();throw console.error("fetchAggregateFilters error. Status:",e.status,"Response:",t),Error("Failed to fetch aggregate filters")}let t=await e.json();window.__lastAggregateResponse=t,console.log("Aggregate API response cached in window.__lastAggregateResponse for debugging"),console.log("Aggregate response:",{aggregationKeys:Object.keys(t.aggregations||{}),sampleKeys:Object.keys(t.aggregations||{}).slice(0,3).map(e=>({key:e,value:t.aggregations[e]}))});let a=t.aggregations||{};return Object.keys(a).map(e=>({id:e,label:e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),options:Object.keys(a[e])}))}async function s(e,t){var a,n;let s,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,d=!(arguments.length>4)||void 0===arguments[4]||arguments[4],c=arguments.length>5?arguments[5]:void 0,h=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,g=t&&Object.keys(t).length>0;if(!e&&!g)return{results:[],aggregations:{},num_hits:0};let f=e&&""!==e.trim()?e.trim():"",p=h&&h.length>0&&!d,v=d?"search2":"search",x="".concat(o,"/discover/").concat(v);if(p){s=x;let e={query:[f],num_results:l},a=void 0!==u?u:(r-1)*l;e.offset=a,void 0!==c&&(e.alpha=c),e.top_level_ids_seen_so_far=h,t&&Object.entries(t).forEach(t=>{let[a,o]=t;o.length>0&&(e[a]=o)}),i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},console.log("Using POST request for pagination with body:",{query:[f],topLevelIdsCount:h.length,offset:a,endpoint:v})}else{let e=new URLSearchParams;void 0!==c&&e.set("alpha",c.toString()),e.append("query",f);let a=void 0!==u?u:(r-1)*l;e.set("num_results",l.toString()),e.set("offset",a.toString());let o={};if(t)for(let a in t)if(a.endsWith("_min")||a.endsWith("_max")){let n=a.replace(/_(min|max)$/,"");o[n]||(o[n]={}),a.endsWith("_min")?o[n].min=t[a][0]:o[n].max=t[a][0],e.append(a,t[a][0])}else t[a].forEach(t=>{e.append(a,t)});s="".concat(x,"?").concat(e.toString()),i={method:"GET"},Object.keys(o).length>0&&console.log("Numeric range parameters:",o),console.log("Using GET request:",s)}let m=await fetch(s,i);if(!m.ok)throw console.error("Search API error:",m.status,await m.text()),Error("Search API request failed");let y=await m.json();return window.__lastSearchResponse=y,console.log("Search API response cached in window.__lastSearchResponse for debugging"),console.log("Search results:",{totalHits:y.num_hits,resultCount:(null===(a=y.results)||void 0===a?void 0:a.length)||0,firstResult:null===(n=y.results)||void 0===n?void 0:n[0],aggregations:Object.keys(y.aggregations||{}),endpoint:v,method:p?"POST":"GET",hybridWeight:c}),{results:y.results||[],aggregations:y.aggregations||{},num_hits:y.num_hits,top_level_ids_seen_so_far:y.top_level_ids_seen_so_far||[],next_page_offset:y.next_page_offset}}async function i(e,t){let a=new URLSearchParams;a.set("uuid",e),t&&t.trim()&&a.set("query",t.trim());let n="".concat(o,"/discover/lookup?").concat(a.toString()),s=await fetch(n);if(!s.ok)throw console.error("Failed to fetch result by UUID:",s.statusText),Error("Failed to fetch result by UUID: ".concat(s.statusText));let i=await s.json();return window.__lastLookupResponse=i,i.results[0]}async function r(e){let t=function(e){if(!e||"string"!=typeof e)return e;if(e.endsWith(")")){let t=(e.match(/\(/g)||[]).length,a=(e.match(/\)/g)||[]).length;if(a>t){let o=a-t,n=e;for(let e=0;e<o;e++)n.endsWith(")")&&(n=n.slice(0,-1));return n!==e&&console.log('Cleaned URL: "'.concat(e,'" -> "').concat(n,'" (removed ').concat(o," extra closing brackets)")),n}}return e}(e),a=await fetch("https://harmonydata.azureedge.net/api/ogData?url=".concat(encodeURIComponent(t)));if(!a.ok)throw Error("Failed to fetch OpenGraph data");return a.json()}async function l(){let e=await fetch("".concat(o,"/info/version"));if(!e.ok)throw console.error("Failed to fetch version info:",e.statusText),Error("Failed to fetch version info");let t=await e.json();return window.__lastVersionResponse=t,console.log("Version API response cached in window.__lastVersionResponse for debugging"),t}async function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,o]=e;o.length>0&&o.forEach(e=>{t.append(a,e)})});let a=await fetch("".concat(o,"/discover/aggregate?").concat(t.toString()),{headers:{accept:"application/json"}});if(!a.ok)throw Error("Failed to fetch aggregate data");return a.json()}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,o]=e;o.length>0&&o.forEach(e=>{t.append(a,e)})});let a=await fetch("".concat(o,"/discover/get_numeric_values?").concat(t.toString()),{headers:{accept:"application/json"}});if(!a.ok)throw Error("Failed to fetch numeric values");return a.json()}async function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,o]=e;o.length>0&&o.forEach(e=>{t.append(a,e)})});let a=await fetch("".concat(o,"/discover/get_word_cloud?").concat(t.toString()),{headers:{accept:"application/json"}});if(!a.ok)throw Error("Failed to fetch word cloud data");return a.json()}async function u(){let e=await fetch("".concat(o,"/discover/sources"),{headers:{accept:"application/json"}});if(!e.ok)throw Error("Failed to fetch sources data");return e.json()}},9450:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});let o=(0,a(14057).A)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]])},1234:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});let o=(0,a(14057).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},64364:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});let o=(0,a(14057).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[380,679,565,26,512,125,417,441,517,358],()=>t(5465)),_N_E=e.O()}]);