"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4398],{63612:(e,o,t)=>{t.d(o,{S:()=>u,SearchProvider:()=>g});var n=t(95155),r=t(12115),s=t(76046);let l={query:"",debouncedQuery:"",selectedFilters:{},useSearch2:!1,hybridWeight:.5,maxDistance:.4,selectedCategory:null,resourceType:null,similarUid:null},i=(0,r.createContext)({searchSettings:l,updateQuery:()=>{console.warn("Search not available on server")},updateSearchSettings:()=>{console.warn("Search not available on server")},resetSearchSettings:()=>{console.warn("Search not available on server")},loadSearchFromSaved:()=>{console.warn("Search not available on server")}});function a(e,o){let t=new URLSearchParams;e.debouncedQuery&&""!==e.debouncedQuery.trim()&&t.set("query",e.debouncedQuery.trim()),e.selectedFilters.keywords&&e.selectedFilters.keywords.length>0&&e.selectedFilters.keywords.forEach(e=>t.append("topics",e)),e.selectedFilters.instruments&&e.selectedFilters.instruments.length>0&&e.selectedFilters.instruments.forEach(e=>t.append("instruments",e)),e.selectedFilters.study_design&&e.selectedFilters.study_design.length>0&&e.selectedFilters.study_design.forEach(e=>t.append("study_design",e)),e.selectedFilters.resource_type&&e.selectedFilters.resource_type.length>0&&t.set("resource_type",e.selectedFilters.resource_type[0]),Object.entries(e.selectedFilters).forEach(e=>{let[o,n]=e;!("keywords"===o||"instruments"===o||"study_design"===o||"resource_type"===o||o.includes("#"))&&n&&0!==n.length&&n.forEach(e=>{t.append(o,e)})}),e.useSearch2&&t.set("use_search2","true"),.5!==e.hybridWeight&&t.set("hybrid_weight",e.hybridWeight.toString()),.4!==e.maxDistance&&t.set("max_distance",e.maxDistance.toString()),e.selectedCategory&&t.set("category",e.selectedCategory),e.similarUid&&t.set("like",e.similarUid);let n=t.toString();return n?"".concat(o,"?").concat(n):o}function c(e){let o=e.get("query")||"",t=e.getAll("topics"),n=e.getAll("instruments"),r=e.getAll("study_design"),s=e.get("resource_type"),l=e.get("like"),i=e.get("use_search2"),a=e.get("hybrid_weight"),c=e.get("max_distance"),g=e.get("category"),u={};t.length>0&&(u.keywords=t),n.length>0&&(u.instruments=n),r.length>0&&(u.study_design=r),s&&(u.resource_type=[s]);let d=new Set(["query","topics","instruments","study_design","resource_type","like","use_search2","hybrid_weight","max_distance","category"]);return e.forEach((o,t)=>{if(!d.has(t)){let o=e.getAll(t);o.length>0&&(u[t]=o)}}),{query:o,debouncedQuery:o,selectedFilters:u,selectedCategory:g||null,useSearch2:"true"===i,hybridWeight:a?parseFloat(a):.5,maxDistance:c?parseFloat(c):.4,resourceType:s||null,similarUid:l||null}}function g(e){let{children:o}=e,t=(0,s.useRouter)(),g=(0,s.usePathname)(),u=(0,s.useSearchParams)(),[d,p]=(0,r.useState)(l),[h,C]=(0,r.useState)(!1),f=(0,r.useRef)(!0),y=(0,r.useRef)(null),S=(0,r.useRef)("");(0,r.useEffect)(()=>{let e=c(u);e.query||e.selectedFilters&&Object.keys(e.selectedFilters).length>0||e.useSearch2||.5!==e.hybridWeight||.4!==e.maxDistance||e.selectedCategory?p(o=>{let t={...o,...e};return S.current=a(t,g),t}):S.current=g,f.current=!1},[]),(0,r.useEffect)(()=>(y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{p(e=>({...e,debouncedQuery:e.query}))},800),()=>{y.current&&clearTimeout(y.current)}),[d.query]),(0,r.useEffect)(()=>{if(h||f.current)return;let e=a(d,g);e!==S.current&&(console.log("Updating SEARCH URL to:",e),S.current=e,(0,r.startTransition)(()=>{t.push(e)}))},[d.debouncedQuery,d.selectedFilters,d.useSearch2,d.hybridWeight,d.maxDistance,d.selectedCategory,d.resourceType,d.similarUid,g,t]),(0,r.useEffect)(()=>{if(h)return;if(f.current){f.current=!1;return}let e=c(u),o=e.debouncedQuery||"",t=e.selectedFilters||{};if(o!==d.debouncedQuery||JSON.stringify(t)!==JSON.stringify(d.selectedFilters)||e.useSearch2!==d.useSearch2||e.hybridWeight!==d.hybridWeight||e.maxDistance!==d.maxDistance||e.selectedCategory!==d.selectedCategory||e.resourceType!==d.resourceType||e.similarUid!==d.similarUid){C(!0);let o=a({...d,...e},g);S.current=o,p(o=>({...o,...e})),setTimeout(()=>C(!1),100)}},[u,g]);let m=(0,r.useCallback)(e=>{p(o=>({...o,query:e}))},[]),R=(0,r.useCallback)(e=>{p(o=>({...o,...e}))},[]),N=(0,r.useCallback)(()=>{p(l)},[]),E=(0,r.useCallback)(e=>{var o,t,n,r;p({...l,query:e.query,debouncedQuery:e.query,selectedFilters:e.filters||{},useSearch2:null!==(o=e.useSearch2)&&void 0!==o?o:l.useSearch2,hybridWeight:null!==(t=e.hybridWeight)&&void 0!==t?t:l.hybridWeight,maxDistance:null!==(n=e.maxDistance)&&void 0!==n?n:l.maxDistance,selectedCategory:null!==(r=e.selectedCategory)&&void 0!==r?r:l.selectedCategory})},[]);return(0,n.jsx)(i.Provider,{value:{searchSettings:d,updateQuery:m,updateSearchSettings:R,resetSearchSettings:N,loadSearchFromSaved:E},children:o})}function u(){return(0,r.useContext)(i)}},3485:(e,o,t)=>{t.d(o,{sM:()=>l,xC:()=>i});var n=t(2818);let r={"Office for National Statistics":"ONS","National Health Service":"NHS","Department for Education":"DfE","Department of Health":"DoH","Department of Health and Social Care":"DHSC","Medical Research Council":"MRC","National Institute for Health and Care Excellence":"NICE","National Institute for Health Research":"NIHR","Economic and Social Research Council":"ESRC","Arts and Humanities Research Council":"AHRC","Biotechnology and Biological Sciences Research Council":"BBSRC","Engineering and Physical Sciences Research Council":"EPSRC","Natural Environment Research Council":"NERC","Science and Technology Facilities Council":"STFC","UK Research and Innovation":"UKRI","University College London":"UCL","University of Oxford":"Oxford","University of Cambridge":"Cambridge","Imperial College London":"Imperial","King's College London":"KCL","London School of Economics":"LSE","Edinburgh University":"Edin","University of Manchester":"Manchester","University of Bristol":"Bristol","University of Warwick":"Warwick","World Health Organization":"WHO","United Nations":"UN","European Union":"EU_flag","Organisation for Economic Co-operation and Development":"OECD","Wellcome Trust":"Wellcome","Nuffield Foundation":"Nuffield","British Heart Foundation":"BHF","Cancer Research UK":"CRUK","Alzheimer's Society":"Alzheimer","Diabetes UK":"Diabetes","National Institute of Mental Health":"NIMH","National Institutes of Health":"NIH","Centers for Disease Control and Prevention":"CDC","Social Care Institute for Excellence":"SCIE"},s={MRC:"/logos/MRC.png",ESRC:"/logos/ESRC.png",UKRI:"/logos/UKRI.png",NERC:"/logos/NERC.png",STFC:"/logos/STFC.png",AHRC:"/logos/AHRC.png",BBSRC:"/logos/BBSRC.png",EPSRC:"/logos/EPSRC.png",NIHR:"/logos/NIHR.png",BHF:"/logos/BHF.png",CRUK:"/logos/CRUK.png",Wellcome:"/logos/Wellcome.png",Nuffield:"/logos/Nuffield.png",ONS:"/logos/ONS.png",NHS:"/logos/NHS.png",DfE:"/logos/DfE.png",DHSC:"/logos/DHSC.png",DoHSC:"/logos/DHSC.png",NICE:"/logos/NICE.png",SCIE:"/logos/SCIE.png",HOUK:"/logos/HOUK.png",UCL:"/logos/UCL.png",Oxford:"/logos/Oxford.png",Cambridge:"/logos/Cambridge.png",Imperial:"/logos/Imperial.png",KCL:"/logos/KCL.png",LSE:"/logos/LSE.png",Edin:"/logos/Edin.png",NIH:"/logos/NIH.png",NIMH:"/logos/NIMH.png",NIDA:"/logos/NIDA.png",NIAAA:"/logos/NIAAA.png",NSF:"/logos/NSF.png",CDC:"/logos/CDC.png",FDA:"/logos/FDA.png",EU_flag:"/logos/EU_flag.png",EUCom:"/logos/EUCom.png",ERC:"/logos/ERC.png",H2020:"/logos/H2020.png",HorizonEU:"/logos/HorizonEU.png",WHO:"/logos/WHO.png",VR:"/logos/VR.png",BMBF:"/logos/BMBF.png",DFG:"/logos/DFG.png",CNRS:"/logos/CNRS.png",INSERM:"/logos/INSERM.png",ARC:"/logos/ARC.png",NHMRC:"/logos/NHMRC.png",CIHR:"/logos/CIHR.png",Uni:"/logos/university.png",Hosp:"/logos/hospital.png",Gov:"/logos/government.png",NGO:"/logos/ngo.png",Charity:"/logos/charity.png",Rayne:"/logos/Rayne.png",SRFound:"/logos/SRFound.png",BCTrust:"/logos/BCTrust.png",UKHF:"/logos/UKHF.png",RCN:"/logos/RCN.png",KingsFund:"/logos/KingsFund.png",MHRN:"/logos/MHRN.png",McPF:"/logos/McPF.png",BLF:"/logos/BLF.png",CLAHRC:"/logos/CLAHRC.png",TNA:"/logos/TNA.png",NAO:"/logos/NAO.png",RCP:"/logos/RCP.png",SU:"/logos/SU.png",SLaM:"/logos/SLaM.png"};function l(e,o){if(o&&o.trim().length>0)return console.log("Using provided logo for ".concat(e||"Unknown",": ").concat(o)),o;if(!e||0===e.trim().length){console.log("No organization name provided to findOrganizationLogo");return}if(e.includes(" ")&&e.split(" ").every(e=>e.length<=6)){for(let o of(console.log('Organization name "'.concat(e,'" appears to be a space-delimited list of abbreviations')),e.split(" ").map(e=>e.trim()).filter(e=>e.length>0))){if(s[o])return console.log('Found direct logo match for abbreviation "'.concat(o,'": ').concat(s[o])),s[o];for(let[e,t]of Object.entries(r))if(e.toLowerCase().includes(o.toLowerCase())||t.toLowerCase()===o.toLowerCase()){let n="/logos/".concat(t,".png");return console.log('Found partial match for "'.concat(o,'" with known organization "').concat(e,'" (').concat(t,"): ").concat(n)),n}}console.log('No logo match found for any part of "'.concat(e,'"'));return}let t=r[e];if(t){let o="/logos/".concat(t,".png");return console.log('Found direct organization match for "'.concat(e,'": ').concat(o)),o}if(s[e])return console.log('Found direct logo match for organization abbreviation "'.concat(e,'": ').concat(s[e])),s[e];for(let[o,t]of Object.entries(r))if(e.toLowerCase().includes(o.toLowerCase())||e.toLowerCase().includes(t.toLowerCase())){let n="/logos/".concat(t,".png");return console.log('Found partial match for "'.concat(e,'" with known organization "').concat(o,'": ').concat(n)),n}console.log('No logo match found for "'.concat(e,'"'))}function i(){return n.env.GITHUB_PAGES_DEPLOYMENT?"/search/":window.location.pathname.startsWith("/search")?"/search/":"/"}}}]);