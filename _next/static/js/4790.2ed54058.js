"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4790],{28544:(e,a,t)=>{t.d(a,{A:()=>A});var i=t(95155),l=t(94049),s=t(73741),n=t(25635),r=t(1151),o=t(15239),d=t(18844),c=t(37609),h=t(12115),x=t(63082),p=t(2778),u=t(52363),m=t(65036),b=t(75912),f=t(70690),g=t(52277),y=t(77073),v=t(42168);function j(e){let{open:a,onClose:t,data:s,title:o="Debug Data"}=e,d=()=>{navigator.clipboard.writeText(JSON.stringify(s,null,2))};return(0,i.jsxs)(p.A,{open:a,onClose:t,maxWidth:"lg",fullWidth:!0,sx:{"& .MuiDialog-paper":{maxHeight:"90vh",height:"90vh"}},children:[(0,i.jsxs)(u.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[(0,i.jsx)(n.A,{variant:"h6",component:"div",children:o}),(0,i.jsxs)(l.default,{children:[(0,i.jsx)(r.A,{onClick:d,size:"small",sx:{mr:1},title:"Copy JSON to clipboard",children:(0,i.jsx)(g.A,{fontSize:"small"})}),(0,i.jsx)(r.A,{onClick:t,size:"small",children:(0,i.jsx)(y.A,{fontSize:"small"})})]})]}),(0,i.jsx)(m.A,{dividers:!0,sx:{p:0,height:"100%"},children:a&&(0,i.jsx)(l.default,{sx:{height:"100%",overflow:"auto","& .w-json-view-container":{backgroundColor:"#fafafa",fontSize:"13px",fontFamily:'"SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace'}},children:(0,i.jsx)(v.Ay,{value:s,collapsed:2,displayObjectSize:!0,displayDataTypes:!0,enableClipboard:!0,style:{backgroundColor:"#fafafa",padding:"16px"}})})}),(0,i.jsxs)(b.A,{children:[(0,i.jsx)(f.A,{onClick:d,startIcon:(0,i.jsx)(g.A,{}),children:"Copy JSON"}),(0,i.jsx)(f.A,{onClick:t,variant:"contained",children:"Close"})]})]})}function A(e){var a,t,p,u,m,b,f,g,y,v,A,C,_,w,k,z,S,M,D,I,W,V,F;let{result:O,isSelected:R,onClick:B,onFindSimilar:N,onReportResult:J}=e,T=!!(O.ancestors&&O.ancestors.length>0),E=null==(t=O.extra_data)||null==(a=t.resource_type)?void 0:a.includes("variable"),H=null==(u=O.extra_data)||null==(p=u.resource_type)?void 0:p.includes("dataset"),[L,U]=(0,h.useState)(!1),G=O,P=O;T&&(null==(m=O.ancestors)?void 0:m[0])&&(P=O.ancestors[0],G=O),(null==P||null==(b=P.extra_data)?void 0:b.resource_type)||P.dataset_schema&&P.dataset_schema["@type"];let Q=(null==(f=P.dataset_schema)?void 0:f.name)||(null==(g=P.extra_data)?void 0:g.name)||"Unnamed Resource",X=T&&H?(null==(y=G.dataset_schema)?void 0:y.description)||(null==(v=G.extra_data)?void 0:v.description)||"":(null==(A=P.dataset_schema)?void 0:A.description)||(null==(C=P.extra_data)?void 0:C.description)||"",K=((null==(_=P.dataset_schema)?void 0:_.keywords)||P.topics||[]).filter(e=>"string"==typeof e&&!e.includes("<a title=")&&!e.startsWith("<")),Z=(null==(w=G.dataset_schema)?void 0:w.number_of_variables)||(null==(z=G.dataset_schema)||null==(k=z.variableMeasured)?void 0:k.length)||0,q=(null==(S=G.variables_which_matched)?void 0:S.length)||0,Y=(null==(M=G.child_datasets)?void 0:M.length)||0,$=(null==(D=G.dataset_schema)?void 0:D.includedInDataCatalog)&&G.dataset_schema.includedInDataCatalog.length>0,ee=X.length>200?"".concat(X.substring(0,200),"..."):X,ea=null,[et,ei]=(0,h.useState)(!1);(null==(I=P.dataset_schema)?void 0:I.image)&&!et?ea=P.dataset_schema.image:P.thumbnail&&!et&&(ea=P.thumbnail);let el=(0,h.useMemo)(()=>{var e=(e=>{let a=0;for(let t=0;t<e.length;t++)a=(a<<5)-a+e.charCodeAt(t),a&=a;return Math.abs(a)})(Q);let a=Math.max(80,Math.min(220,(0xff0000&e)>>16)),t=Math.max(80,Math.min(220,(65280&e)>>8)),i=Math.max(80,Math.min(220,255&e));return"rgb(".concat(a,", ").concat(t,", ").concat(i,")")},[Q]),es=(0,h.useMemo)(()=>(e=>{let a=e.trim();return a&&(a.replace(/^(A|The)\s+/i,"").charAt(0).toUpperCase()||a.charAt(0).toUpperCase())||"?"})(Q),[Q]);return(0,i.jsxs)(l.default,{onClick:B,sx:{cursor:"pointer",display:"flex",width:"100%",bgcolor:R?"rgba(25, 118, 210, 0.08)":"transparent",borderLeft:R?"3px solid":"3px solid transparent",borderRight:R?"3px solid":"3px solid transparent",borderColor:R?"primary.main":"transparent","&:hover":{bgcolor:R?"rgba(25, 118, 210, 0.12)":"rgba(0, 0, 0, 0.02)"}},children:[(0,i.jsxs)(l.default,{sx:{width:120,minHeight:"100%",py:2,flexShrink:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"grey.500",background:"transparent",position:"relative"},children:[ea&&!et?(0,i.jsx)(o.default,{src:ea,alt:Q,width:100,height:100,style:{objectFit:"contain"},onError:()=>ei(!0),unoptimized:!0}):(0,i.jsx)(s.A,{sx:{width:60,height:60,bgcolor:el,fontSize:"1.5rem",fontWeight:"bold"},children:es}),T&&(0,i.jsxs)(i.Fragment,{children:[E&&(0,i.jsx)(l.default,{sx:{position:"absolute",top:0,right:0,bgcolor:"primary.main",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:"V"}),H&&(0,i.jsx)(l.default,{sx:{position:"absolute",top:0,right:0,bgcolor:"primary.main",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:(0,i.jsx)(d.A,{size:16})})]})]}),(0,i.jsxs)(l.default,{sx:{display:"flex",flexDirection:"column",p:2,flex:1,background:"transparent"},children:[(0,i.jsxs)(l.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,i.jsx)(n.A,{variant:"h6",gutterBottom:!0,sx:{mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.2,flex:1,mr:1},children:Q}),(0,i.jsx)(r.A,{size:"small",onClick:e=>{e.stopPropagation(),J?J():U(!0)},sx:{opacity:.6,"&:hover":{opacity:1},color:"text.secondary"},title:J?"Report search result issue":"Debug data",children:(0,i.jsx)(c.A,{size:16})})]}),K.length>0&&(0,i.jsx)(n.A,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:K.slice(0,5).map((e,a)=>(0,i.jsxs)(l.default,{component:"span",children:[(0,i.jsx)(l.default,{component:"strong",sx:{fontSize:{xs:"0.75rem",sm:"0.85rem"}},children:e}),a<Math.min(K.length,5)-1&&(0,i.jsx)(l.default,{component:"span",sx:{mx:.5},children:"â€¢"})]},"".concat(e,"-").concat(a)))}),(0,i.jsx)(n.A,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.4,mb:1.5},children:ee}),(0,i.jsx)(l.default,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:"auto"},children:T&&E?(0,i.jsx)(x.A,{chipVariant:"primary",size:"small",children:(null==(W=G.extra_data)?void 0:W.description)||(null==(V=G.extra_data)?void 0:V.name)},null==(F=G.extra_data)?void 0:F.uuid):(0,i.jsxs)(i.Fragment,{children:[Z>0&&(0,i.jsx)(x.A,{chipVariant:"primary",size:"small",children:q>0?"Matched by variable":"".concat(Z," Variables")}),$&&(0,i.jsx)(x.A,{chipVariant:"secondary",size:"small",children:"Data Available"}),Y>0&&(0,i.jsxs)(x.A,{chipVariant:"secondary",size:"small",sx:{backgroundColor:"#444653",color:"white","&:hover":{backgroundColor:"#3a3d47"}},children:[Y," Dataset",1!==Y?"s":""]}),G.hasFreeAccess&&(0,i.jsx)(x.A,{chipVariant:"secondary",size:"small",children:"Free Access"}),G.hasCohortsAvailable&&(0,i.jsx)(x.A,{chipVariant:"secondary",size:"small",children:"Cohorts Available"})]})})]}),(0,i.jsx)(j,{open:L,onClose:()=>U(!1),data:G,title:"Debug: ".concat(Q)})]})}},95465:(e,a,t)=>{t.r(a),t.d(a,{auth:()=>r,db:()=>o});var i=t(52078),l=t(33885),s=t(65705);let n=(0,i.Wp)({apiKey:"AIzaSyBQVkRjbTQD6BXCdo2JeiFfwyvGVT7bOXM",authDomain:"harmony-6bd51.firebaseapp.com",projectId:"harmony-6bd51",storageBucket:"harmony-6bd51.appspot.com",messagingSenderId:"914732561143",appId:"1:914732561143:web:b041f0c5e7fab57400d9f2",measurementId:"G-S79J6E39ZP"}),r=(0,l.getAuth)(n),o=(0,s.getFirestore)(n)}}]);