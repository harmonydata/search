"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5738],{51691:(e,t,o)=>{o.d(t,{sM:()=>i,xC:()=>l});var n=o(95704);let r={"Office for National Statistics":"ONS","National Health Service":"NHS","Department for Education":"DfE","Department of Health":"DoH","Department of Health and Social Care":"DHSC","Medical Research Council":"MRC","National Institute for Health and Care Excellence":"NICE","National Institute for Health Research":"NIHR","Economic and Social Research Council":"ESRC","Arts and Humanities Research Council":"AHRC","Biotechnology and Biological Sciences Research Council":"BBSRC","Engineering and Physical Sciences Research Council":"EPSRC","Natural Environment Research Council":"NERC","Science and Technology Facilities Council":"STFC","UK Research and Innovation":"UKRI","University College London":"UCL","University of Oxford":"Oxford","University of Cambridge":"Cambridge","Imperial College London":"Imperial","King's College London":"KCL","London School of Economics":"LSE","Edinburgh University":"Edin","University of Manchester":"Manchester","University of Bristol":"Bristol","University of Warwick":"Warwick","World Health Organization":"WHO","United Nations":"UN","European Union":"EU_flag","Organisation for Economic Co-operation and Development":"OECD","Wellcome Trust":"Wellcome","Nuffield Foundation":"Nuffield","British Heart Foundation":"BHF","Cancer Research UK":"CRUK","Alzheimer's Society":"Alzheimer","Diabetes UK":"Diabetes","National Institute of Mental Health":"NIMH","National Institutes of Health":"NIH","Centers for Disease Control and Prevention":"CDC","Social Care Institute for Excellence":"SCIE"},s={MRC:"/logos/MRC.png",ESRC:"/logos/ESRC.png",UKRI:"/logos/UKRI.png",NERC:"/logos/NERC.png",STFC:"/logos/STFC.png",AHRC:"/logos/AHRC.png",BBSRC:"/logos/BBSRC.png",EPSRC:"/logos/EPSRC.png",NIHR:"/logos/NIHR.png",BHF:"/logos/BHF.png",CRUK:"/logos/CRUK.png",Wellcome:"/logos/Wellcome.png",Nuffield:"/logos/Nuffield.png",ONS:"/logos/ONS.png",NHS:"/logos/NHS.png",DfE:"/logos/DfE.png",DHSC:"/logos/DHSC.png",DoHSC:"/logos/DHSC.png",NICE:"/logos/NICE.png",SCIE:"/logos/SCIE.png",HOUK:"/logos/HOUK.png",UCL:"/logos/UCL.png",Oxford:"/logos/Oxford.png",Cambridge:"/logos/Cambridge.png",Imperial:"/logos/Imperial.png",KCL:"/logos/KCL.png",LSE:"/logos/LSE.png",Edin:"/logos/Edin.png",NIH:"/logos/NIH.png",NIMH:"/logos/NIMH.png",NIDA:"/logos/NIDA.png",NIAAA:"/logos/NIAAA.png",NSF:"/logos/NSF.png",CDC:"/logos/CDC.png",FDA:"/logos/FDA.png",EU_flag:"/logos/EU_flag.png",EUCom:"/logos/EUCom.png",ERC:"/logos/ERC.png",H2020:"/logos/H2020.png",HorizonEU:"/logos/HorizonEU.png",WHO:"/logos/WHO.png",VR:"/logos/VR.png",BMBF:"/logos/BMBF.png",DFG:"/logos/DFG.png",CNRS:"/logos/CNRS.png",INSERM:"/logos/INSERM.png",ARC:"/logos/ARC.png",NHMRC:"/logos/NHMRC.png",CIHR:"/logos/CIHR.png",Uni:"/logos/university.png",Hosp:"/logos/hospital.png",Gov:"/logos/government.png",NGO:"/logos/ngo.png",Charity:"/logos/charity.png",Rayne:"/logos/Rayne.png",SRFound:"/logos/SRFound.png",BCTrust:"/logos/BCTrust.png",UKHF:"/logos/UKHF.png",RCN:"/logos/RCN.png",KingsFund:"/logos/KingsFund.png",MHRN:"/logos/MHRN.png",McPF:"/logos/McPF.png",BLF:"/logos/BLF.png",CLAHRC:"/logos/CLAHRC.png",TNA:"/logos/TNA.png",NAO:"/logos/NAO.png",RCP:"/logos/RCP.png",SU:"/logos/SU.png",SLaM:"/logos/SLaM.png"};function i(e,t){if(t&&t.trim().length>0)return console.log("Using provided logo for ".concat(e||"Unknown",": ").concat(t)),t;if(!e||0===e.trim().length)return void console.log("No organization name provided to findOrganizationLogo");if(e.includes(" ")&&e.split(" ").every(e=>e.length<=6)){for(let t of(console.log('Organization name "'.concat(e,'" appears to be a space-delimited list of abbreviations')),e.split(" ").map(e=>e.trim()).filter(e=>e.length>0))){if(s[t])return console.log('Found direct logo match for abbreviation "'.concat(t,'": ').concat(s[t])),s[t];for(let[e,o]of Object.entries(r))if(e.toLowerCase().includes(t.toLowerCase())||o.toLowerCase()===t.toLowerCase()){let n="/logos/".concat(o,".png");return console.log('Found partial match for "'.concat(t,'" with known organization "').concat(e,'" (').concat(o,"): ").concat(n)),n}}console.log('No logo match found for any part of "'.concat(e,'"'));return}let o=r[e];if(o){let t="/logos/".concat(o,".png");return console.log('Found direct organization match for "'.concat(e,'": ').concat(t)),t}if(s[e])return console.log('Found direct logo match for organization abbreviation "'.concat(e,'": ').concat(s[e])),s[e];for(let[t,o]of Object.entries(r))if(e.toLowerCase().includes(t.toLowerCase())||e.toLowerCase().includes(o.toLowerCase())){let n="/logos/".concat(o,".png");return console.log('Found partial match for "'.concat(e,'" with known organization "').concat(t,'": ').concat(n)),n}console.log('No logo match found for "'.concat(e,'"'))}function l(){return n.env.GITHUB_PAGES_DEPLOYMENT||window.location.pathname.startsWith("/search")?"/search/":"/"}},92114:(e,t,o)=>{o.d(t,{S:()=>u,SearchProvider:()=>g});var n=o(95155),r=o(12115),s=o(20063);let i={query:"",debouncedQuery:"",selectedFilters:{},useSearch2:!1,hybridWeight:.5,maxDistance:.4,directMatchWeight:.5,selectedCategory:null,resourceType:null,similarUid:null},l=(0,r.createContext)({searchSettings:i,updateQuery:()=>{console.warn("Search not available on server")},updateSearchSettings:()=>{console.warn("Search not available on server")},resetSearchSettings:()=>{console.warn("Search not available on server")},loadSearchFromSaved:()=>{console.warn("Search not available on server")}});function a(e,t){let o=new URLSearchParams;if(e.debouncedQuery&&""!==e.debouncedQuery.trim()&&o.set("query",e.debouncedQuery.trim()),e.selectedFilters.keywords&&e.selectedFilters.keywords.length>0&&e.selectedFilters.keywords.forEach(e=>o.append("topics",e)),e.selectedFilters.instruments&&e.selectedFilters.instruments.length>0&&e.selectedFilters.instruments.forEach(e=>o.append("instruments",e)),e.selectedFilters.study_design&&e.selectedFilters.study_design.length>0&&e.selectedFilters.study_design.forEach(e=>o.append("study_design",e)),e.selectedFilters.resource_type&&e.selectedFilters.resource_type.length>0&&o.set("resource_type",e.selectedFilters.resource_type[0]),Object.entries(e.selectedFilters).forEach(e=>{let[t,n]=e;!("keywords"===t||"instruments"===t||"study_design"===t||"resource_type"===t||t.includes("#"))&&n&&0!==n.length&&n.forEach(e=>{o.append(t,e)})}),e.useSearch2&&o.set("use_search2","true"),.5!==e.hybridWeight&&o.set("hybrid_weight",e.hybridWeight.toString()),.4!==e.maxDistance&&o.set("max_distance",e.maxDistance.toString()),.5!==e.directMatchWeight){let t=e.directMatchWeight<=.5?4*e.directMatchWeight:16*e.directMatchWeight-6;o.set("direct_match_weight",t.toString())}e.selectedCategory&&o.set("category",e.selectedCategory),e.similarUid&&o.set("like",e.similarUid);let n=o.toString();return n?"".concat(t,"?").concat(n):t}function c(e){let t=e.get("query")||"",o=e.getAll("topics"),n=e.getAll("instruments"),r=e.getAll("study_design"),s=e.get("resource_type"),i=e.get("like"),l=e.get("use_search2"),a=e.get("hybrid_weight"),c=e.get("max_distance"),g=e.get("direct_match_weight"),u=e.get("category"),d={};o.length>0&&(d.keywords=o),n.length>0&&(d.instruments=n),r.length>0&&(d.study_design=r),s&&(d.resource_type=[s]);let h=new Set(["query","topics","instruments","study_design","resource_type","like","use_search2","hybrid_weight","max_distance","direct_match_weight","category"]);return e.forEach((t,o)=>{if(!h.has(o)){let t=e.getAll(o);t.length>0&&(d[o]=t)}}),{query:t,debouncedQuery:t,selectedFilters:d,selectedCategory:u||null,useSearch2:"true"===l,hybridWeight:a?parseFloat(a):.5,maxDistance:c?parseFloat(c):.4,directMatchWeight:g?(()=>{let e=parseFloat(g);return e<=2?e/4:(e+6)/16})():.5,resourceType:s||null,similarUid:i||null}}function g(e){let{children:t}=e,o=(0,s.useRouter)(),g=(0,s.usePathname)(),u=(0,s.useSearchParams)(),[d,h]=(0,r.useState)(i),[p,C]=(0,r.useState)(!1),f=(0,r.useRef)(!0),y=(0,r.useRef)(null),S=(0,r.useRef)("");(0,r.useEffect)(()=>{let e=c(u);e.query||e.selectedFilters&&Object.keys(e.selectedFilters).length>0||e.useSearch2||.5!==e.hybridWeight||.4!==e.maxDistance||.5!==e.directMatchWeight||e.selectedCategory?h(t=>{let o={...t,...e};return S.current=a(o,g),o}):S.current=g,f.current=!1},[]),(0,r.useEffect)(()=>(y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{h(e=>({...e,debouncedQuery:e.query}))},800),()=>{y.current&&clearTimeout(y.current)}),[d.query]),(0,r.useEffect)(()=>{if(p||f.current)return;let e=a(d,g);e!==S.current&&(console.log("Updating SEARCH URL to:",e),S.current=e,(0,r.startTransition)(()=>{o.push(e)}))},[d.debouncedQuery,d.selectedFilters,d.useSearch2,d.hybridWeight,d.maxDistance,d.directMatchWeight,d.selectedCategory,d.resourceType,d.similarUid,g,o]),(0,r.useEffect)(()=>{if(p)return;if(f.current){f.current=!1;return}let e=c(u),t=e.debouncedQuery||"",o=e.selectedFilters||{};(t!==d.debouncedQuery||JSON.stringify(o)!==JSON.stringify(d.selectedFilters)||e.useSearch2!==d.useSearch2||e.hybridWeight!==d.hybridWeight||e.maxDistance!==d.maxDistance||e.directMatchWeight!==d.directMatchWeight||e.selectedCategory!==d.selectedCategory||e.resourceType!==d.resourceType||e.similarUid!==d.similarUid)&&(C(!0),S.current=a({...d,...e},g),h(t=>({...t,...e})),setTimeout(()=>C(!1),100))},[u,g]);let m=(0,r.useCallback)(e=>{h(t=>({...t,query:e}))},[]),R=(0,r.useCallback)(e=>{h(t=>({...t,...e}))},[]),N=(0,r.useCallback)(()=>{h(i)},[]),E=(0,r.useCallback)(e=>{var t,o,n,r,s;h({...i,query:e.query,debouncedQuery:e.query,selectedFilters:e.filters||{},useSearch2:null!=(t=e.useSearch2)?t:i.useSearch2,hybridWeight:null!=(o=e.hybridWeight)?o:i.hybridWeight,maxDistance:null!=(n=e.maxDistance)?n:i.maxDistance,directMatchWeight:null!=(r=e.directMatchWeight)?r:i.directMatchWeight,selectedCategory:null!=(s=e.selectedCategory)?s:i.selectedCategory})},[]);return(0,n.jsx)(l.Provider,{value:{searchSettings:d,updateQuery:m,updateSearchSettings:R,resetSearchSettings:N,loadSearchFromSaved:E},children:t})}function u(){return(0,r.useContext)(l)}}}]);