"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7626],{65776:(e,a,t)=>{t.d(a,{A:()=>c});var r=t(95155),l=t(64665),i=t(68998),s=t(9561),o=t(5565),n=t(3485),d=t(12115);function c(e){let{name:a,url:t,logo:c,inactive:u,compact:h}=e,[x,v]=(0,d.useState)(c),[m,f]=(0,d.useState)(!1);(0,d.useEffect)(()=>{console.log('Resolving logo for organization: "'.concat(a,'"'));try{let e=(0,n.sM)(a,c);console.log('Resolved logo for organization "'.concat(a,'":'),e),v(e),f(!1)}catch(e){console.error('Error resolving logo for organization "'.concat(a,'":'),e),v(void 0)}},[a,c]);let p=x&&x.length>0&&!m;return(0,r.jsxs)(l.A,{elevation:0,sx:{display:"flex",borderRadius:"16px",overflow:"hidden",width:h?"220px":"280px",height:h?"75px":"85px",flexShrink:0,border:"1px solid",borderColor:"grey.200",cursor:t?"pointer":"default",transition:"all 0.2s",opacity:u?.5:1,"&:hover":t?{boxShadow:2,borderColor:"primary.main"}:{}},onClick:()=>{t&&window.open(t,"_blank","noopener,noreferrer")},children:[(0,r.jsx)(i.default,{sx:{flex:1,bgcolor:"rgba(0,0,0,0.03)",p:2,display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,r.jsx)(s.A,{sx:{fontWeight:500,fontSize:h?"0.8rem":"0.9rem",lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",maxHeight:"3.9em",wordBreak:"break-word",paddingBottom:"1px"},children:a})}),p&&(0,r.jsx)(i.default,{sx:{width:"30%",bgcolor:"white",display:"flex",alignItems:"center",justifyContent:"center",p:1,borderLeft:"1px solid",borderColor:"grey.200"},children:(0,r.jsx)(o.default,{src:x,alt:a,width:h?40:50,height:h?40:50,style:{objectFit:"contain"},onError:()=>{console.error('Error loading image for organization "'.concat(a,'" from path: ').concat(x)),f(!0)},unoptimized:!0})})]})}},53452:(e,a,t)=>{t.d(a,{A:()=>l});var r=t(22282);let l=(0,t(89142).Ay)(r.A,{shouldForwardProp:e=>"chipVariant"!==e})(e=>{let{theme:a,chipVariant:t="primary",onClick:r=()=>{}}=e;return{onClick:r,borderRadius:8,textTransform:"none",padding:"0 16px",height:32,minHeight:32,fontSize:"0.875rem",fontWeight:500,whiteSpace:"nowrap",lineHeight:1,..."primary"===t&&{backgroundColor:a.palette.primary.main,color:a.palette.primary.contrastText,"&:hover":{backgroundColor:a.palette.primary.dark}},..."secondary"===t&&{backgroundColor:a.palette.secondary.main,color:a.palette.secondary.contrastText,"&:hover":{backgroundColor:a.palette.secondary.dark}},..."dark"===t&&{backgroundColor:"#444653",color:"#FFFFFF","&:hover":{backgroundColor:"#363742"}}}})},77626:(e,a,t)=>{t.d(a,{default:()=>F});var r=t(95155),l=t(68998),i=t(96854),s=t(9561),o=t(47821),n=t(35256),d=t(5565),c=t(20687),u=t(52488),h=t(32645),x=t(12115),v=t(53452),m=t(64665),f=t(3485);function p(e){let{name:a,url:t,logo:i}=e,[o,n]=(0,x.useState)(i),[c,u]=(0,x.useState)(!1);(0,x.useEffect)(()=>{console.log('Resolving logo for data catalog: "'.concat(a,'"'));try{let e=(0,f.sM)(a,i);console.log('Resolved logo for data catalog "'.concat(a,'":'),e),n(e),u(!1)}catch(e){console.error('Error resolving logo for data catalog "'.concat(a,'":'),e),n(void 0)}},[a,i]);let h=o&&o.length>0&&!c;return(0,r.jsxs)(m.A,{elevation:0,sx:{display:"flex",borderRadius:"16px",overflow:"hidden",width:"280px",height:"80px",flexShrink:0,border:"1px solid",borderColor:"grey.200",cursor:t?"pointer":"default",transition:"all 0.2s","&:hover":t?{boxShadow:2,borderColor:"primary.main"}:{}},onClick:()=>{t&&window.open(t,"_blank","noopener,noreferrer")},children:[(0,r.jsx)(l.default,{sx:{flex:1,bgcolor:"rgba(0,0,0,0.03)",p:2,display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,r.jsx)(s.A,{sx:{fontWeight:500,fontSize:"0.9rem",lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",maxHeight:"3.7em",wordBreak:"break-word"},children:a})}),h&&(0,r.jsx)(l.default,{sx:{width:"30%",bgcolor:"white",display:"flex",alignItems:"center",justifyContent:"center",p:1,borderLeft:"1px solid",borderColor:"grey.200"},children:(0,r.jsx)(d.default,{src:o,alt:a,width:50,height:50,style:{objectFit:"contain"},onError:()=>{console.error('Error loading image for data catalog "'.concat(a,'" from path: ').concat(o)),u(!0)},unoptimized:!0})})]})}var g=t(65776),b=t(51857),y=t(67247),_=t(77711),j=t(17146),w=t(83705),A=t(63612),k=t(42649),C=t(76046);let S=(0,_.default)(()=>Promise.all([t.e(6386),t.e(9197),t.e(2857),t.e(9234),t.e(2926),t.e(2492),t.e(594),t.e(1702),t.e(914),t.e(1983),t.e(4017)]).then(t.bind(t,72529)),{loadableGenerated:{webpack:()=>[72529]},loading:()=>(0,r.jsx)("div",{children:"Loading variables..."})}),I=(0,_.default)(()=>Promise.all([t.e(9197),t.e(2857),t.e(9234),t.e(2926),t.e(2492),t.e(8173),t.e(1702),t.e(944),t.e(914),t.e(8428)]).then(t.bind(t,8428)),{loadableGenerated:{webpack:()=>[8428]},loading:()=>(0,r.jsx)("div",{children:"Loading datasets..."})}),F=(0,x.memo)(e=>{var a,t,m,f,_,F,W,z,E,R,D,P,L,M,T,B,V,H,O,G,N,U,q,X,Y,J,K,Q,Z,$,ee,ea,et,er,el,ei,es,eo,en,ed,ec,eu,eh,ex;let{study:ev,isDrawerView:em=!1,studyDataComplete:ef=!1}=e,[ep,eg]=(0,x.useState)(!1),[eb,ey]=(0,x.useState)(!1),[e_,ej]=(0,x.useState)(!1),[ew,eA]=(0,x.useState)(!1),[ek,eC]=(0,x.useState)(!0),[eS,eI]=(0,x.useState)(!1),[eF,eW]=(0,x.useState)(!1),[ez,eE]=(0,x.useState)(null),[eR,eD]=(0,x.useState)(!1),[eP,eL]=(0,x.useState)({description:!0,details:!1,variables:!1,links:!1,childDatasets:!1}),[eM,eT]=(0,x.useState)(null),[eB,eV]=(0,x.useState)(!1),eH=(0,x.useRef)(null),{currentUser:eO}=(0,j.A)(),{checkIfResourceSaved:eG,saveResource:eN,unsaveResource:eU}=(0,w.D)(),{searchSettings:eq,updateSearchSettings:eX}=(0,A.S)(),[eY,eJ]=(0,x.useState)(eq.query),[eK,eQ]=(0,x.useState)(eq.hybridWeight),[eZ,e$]=(0,x.useState)(eq.maxDistance),e0=(0,C.useRouter)(),e1=(0,C.usePathname)(),[e2,e5]=(0,x.useState)(!1);(0,x.useEffect)(()=>{e5(!0)},[]);let e4=eM||ev;(0,x.useEffect)(()=>{eT(null)},[null===(a=ev.extra_data)||void 0===a?void 0:a.uuid]);let e6=(e,a)=>{let t=eq.selectedFilters,r=t[e]||[],l=r.includes(a)?r:[...r,a];eX({selectedFilters:{...t,[e]:l}}),"/discover"!==e1&&e0.push("/discover")},e7=(null===(t=e4.dataset_schema)||void 0===t?void 0:t.name)||(null===(m=e4.extra_data)||void 0===m?void 0:m.name)||"Untitled Dataset",e9=(null===(f=e4.dataset_schema)||void 0===f?void 0:f.description)||(null===(_=e4.extra_data)||void 0===_?void 0:_.description)||"",e3=(null===(F=e4.extra_data)||void 0===F?void 0:F.ai_summary)||null,e8=e3&&e3.trim().length>0,ae=ek&&e8?e3:e9,aa=(null===(W=e4.dataset_schema)||void 0===W?void 0:W.image)||e4.image||void 0,at=((null===(z=e4.dataset_schema)||void 0===z?void 0:z.keywords)||[]).filter(e=>"string"==typeof e&&!e.includes("<a title=")&&!e.startsWith("<")),ar=at.length>0,al=((null===(E=e4.extra_data)||void 0===E?void 0:E.instruments)||[]).length>0,ai=(e4.variables_which_matched||[]).length>0||((null===(R=e4.dataset_schema)||void 0===R?void 0:R.variableMeasured)||[]).length>0||((null===(D=e4.dataset_schema)||void 0===D?void 0:D.number_of_variables)||0)>0,as=[];if((null===(P=e4.dataset_schema)||void 0===P?void 0:P.identifier)&&Array.isArray(e4.dataset_schema.identifier)){let e=e4.dataset_schema.identifier.filter(e=>!!(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("10.")&&e.includes("/"))).map(e=>e.startsWith("10.")&&e.includes("/")?"https://doi.org/".concat(e):e);as.push(...e)}(null===(L=e4.dataset_schema)||void 0===L?void 0:L.url)&&Array.isArray(e4.dataset_schema.url)&&as.push(...e4.dataset_schema.url);let ao=as.length>0;(0,x.useEffect)(()=>{eA(!1)},[null===(M=e4.dataset_schema)||void 0===M?void 0:M.name,null===(T=e4.extra_data)||void 0===T?void 0:T.name]),(0,x.useEffect)(()=>{ej(!1)},[null===(B=e4.dataset_schema)||void 0===B?void 0:B.name,null===(V=e4.extra_data)||void 0===V?void 0:V.name]),(0,x.useEffect)(()=>{eH.current&&eH.current.scrollTo({top:0,behavior:"smooth"})},[null===(H=e4.extra_data)||void 0===H?void 0:H.uuid]),(0,x.useEffect)(()=>{(async()=>{var e;if(eO&&(null===(e=e4.extra_data)||void 0===e?void 0:e.uuid))try{let e=await eG(eO.uid,e4.extra_data.uuid);eI(e.isSaved),eE(e.resourceId||null)}catch(e){console.error("Error checking if resource is saved:",e)}})()},[eO,null===(O=e4.extra_data)||void 0===O?void 0:O.uuid,eG]);let an=async()=>{var e,a,t,r,l,i,s,o,n,d,c,u,h,x,v;if(eO&&(null===(e=e4.extra_data)||void 0===e?void 0:e.uuid)&&!eF){eW(!0);try{if(eS&&ez)await eU(ez),eI(!1),eE(null);else{let e=(null===(a=e4.dataset_schema)||void 0===a?void 0:a.name)||(null===(t=e4.extra_data)||void 0===t?void 0:t.name)||"Untitled Dataset",m=(null===(r=e4.extra_data)||void 0===r?void 0:r.ai_summary)||(null===(l=e4.dataset_schema)||void 0===l?void 0:l.description)||(null===(i=e4.extra_data)||void 0===i?void 0:i.description)||"",f=(null===(s=e4.dataset_schema)||void 0===s?void 0:s.image)||e4.image||null,p=(null===(o=e4.extra_data)||void 0===o?void 0:o.ai_summary)||null,g={title:e,description:p||m,image:f||null,uuid:e4.extra_data.uuid,slug:e4.extra_data.slug||null,resourceType:e4.extra_data.resource_type||null,keywords:(null===(n=e4.dataset_schema)||void 0===n?void 0:n.keywords)||[],variablesCount:(null===(c=e4.dataset_schema)||void 0===c?void 0:null===(d=c.variableMeasured)||void 0===d?void 0:d.length)||(null===(u=e4.dataset_schema)||void 0===u?void 0:u.number_of_variables)||0,datasetsCount:(null===(h=e4.child_datasets)||void 0===h?void 0:h.length)||0,hasDataAvailable:!!(null===(v=e4.dataset_schema)||void 0===v?void 0:null===(x=v.includedInDataCatalog)||void 0===x?void 0:x.length),hasFreeAccess:e4.hasFreeAccess||!1,hasCohortsAvailable:e4.hasCohortsAvailable||!1},b=await eN(eO.uid,g);eI(!0),eE(b)}}catch(e){console.error("Error saving/unsaving resource:",e)}finally{eW(!1)}}};(0,x.useEffect)(()=>{var e;eC(!!((null===(e=e4.extra_data)||void 0===e?void 0:e.ai_summary)&&e4.extra_data.ai_summary.trim().length>0))},[null===(G=e4.dataset_schema)||void 0===G?void 0:G.name,null===(N=e4.extra_data)||void 0===N?void 0:N.name,null===(U=e4.extra_data)||void 0===U?void 0:U.ai_summary]),(0,x.useEffect)(()=>{var e;let a=!1;if(eT(null),!ef&&(null==e4?void 0:null===(e=e4.extra_data)||void 0===e?void 0:e.uuid))return eV(!0),(async()=>{try{let e=await (0,k.w3)(e4.extra_data.uuid,eY,eK,eZ);a||(eT(e),eV(!1))}catch(e){console.error("Failed to load enhanced study data:",e),a||eV(!1)}})(),()=>{a=!0}},[null==e4?void 0:null===(q=e4.extra_data)||void 0===q?void 0:q.uuid,ef,eY,eK,eZ]),(0,x.useEffect)(()=>{let e=setTimeout(()=>{eJ(eq.query),eQ(eq.hybridWeight),e$(eq.maxDistance)},800);return()=>clearTimeout(e)},[eq.query,eq.hybridWeight,eq.maxDistance]);let ad=e=>{eL(a=>({...a,[e]:!a[e]}))},{allStudyVariables:ac,matchedCount:au,totalCount:ah}=(0,x.useMemo)(()=>{var e;let a=e4.variables_which_matched||[],t=(null===(e=e4.dataset_schema)||void 0===e?void 0:e.variableMeasured)||[],r=new Map,l=new Map;a.forEach(e=>{let a=e.name;a&&l.set(a,(l.get(a)||0)+1)});let i=(e,a)=>{e.forEach(e=>{let t=e.name;if(!t)return;let i=r.get(t);if(i)a&&!i.matched&&(i.matched=!0,i.variable={...e,matched:!0});else{let i=l.get(t)||1;r.set(t,{variable:{...e,matched:a},matched:a,repeatCount:i})}})};i(a,!0),i(t,!1);let s=Array.from(r.values()).map(e=>{let{variable:a,repeatCount:t}=e;return{...a,repeatCount:t,displayName:t>1?"".concat(a.name," (x").concat(t,")"):a.name}}),o=s.filter(e=>e.matched).length,n=s.length;return{allStudyVariables:s,matchedCount:o,totalCount:n}},[e4.variables_which_matched,null===(X=e4.dataset_schema)||void 0===X?void 0:X.variableMeasured]);return(0,r.jsxs)(l.default,{ref:eH,sx:{p:3,width:"100%",height:"100%",overflowY:"auto",flex:1,display:"flex",flexDirection:"column",position:"relative"},children:[eB&&(0,r.jsxs)(l.default,{sx:{position:"absolute",top:8,right:8,zIndex:10,display:"flex",alignItems:"center",gap:.5,p:.5,bgcolor:"background.paper",borderRadius:1,boxShadow:1,border:"1px solid",borderColor:"divider"},children:[(0,r.jsx)(i.A,{size:12}),(0,r.jsx)(s.A,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.6rem",sm:"0.7rem"}},children:"Loading..."})]}),em&&eO&&(0,r.jsx)(l.default,{sx:{display:"flex",justifyContent:"flex-end",mb:2},children:(0,r.jsx)(o.A,{onClick:an,disabled:eF,sx:{color:eS?"primary.main":"text.secondary","&:hover":{color:eS?"primary.dark":"primary.main"}},title:eS?"Remove from saved":"Save to my resources",children:eF?(0,r.jsx)(i.A,{size:20}):(0,r.jsx)(c.A,{size:20,fill:eS?"currentColor":"none"})})}),!em&&(0,r.jsxs)(l.default,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:2,mb:4},children:[(0,r.jsx)(l.default,{sx:{flex:1},children:(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"h4",gutterBottom:!0,sx:{flex:1,mr:1},children:e7}),eO&&(0,r.jsx)(o.A,{onClick:an,disabled:eF,sx:{color:eS?"primary.main":"text.secondary","&:hover":{color:eS?"primary.dark":"primary.main"}},title:eS?"Remove from saved":"Save to my resources",children:eF?(0,r.jsx)(i.A,{size:20}):(0,r.jsx)(c.A,{size:20,fill:eS?"currentColor":"none"})})]})}),aa&&!ew&&(0,r.jsx)(l.default,{sx:{width:100,height:100,position:"relative",borderRadius:"8px",overflow:"hidden",flexShrink:0},children:(0,r.jsx)(d.default,{src:aa,alt:e7,fill:!0,style:{objectFit:"contain"},onError:()=>eA(!0),unoptimized:!0},e7)})]}),ae&&(0,r.jsxs)(l.default,{sx:{mb:4},children:[e_?(0,r.jsx)(b.A,{text:ae,paragraphProps:{variant:"body1",sx:{mb:2}},compact:!0}):(0,r.jsx)(s.A,{variant:"body1",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:5,WebkitBoxOrient:"vertical",mb:2},children:ae}),e8&&e_&&(0,r.jsx)(l.default,{sx:{mt:2,mb:1},children:(0,r.jsx)(s.A,{variant:"body2",color:"primary",sx:{cursor:"pointer",textDecoration:"underline","&:hover":{textDecoration:"none"}},onClick:()=>eC(!ek),children:ek?"Showing AI summary, click to see original":"Showing original, click to see AI summary"})}),ae.length>300&&(0,r.jsxs)(l.default,{onClick:()=>ej(!e_),sx:{display:"flex",alignItems:"center",color:"primary.main",cursor:"pointer",mt:1},children:[(0,r.jsx)(s.A,{variant:"body2",color:"primary",sx:{fontWeight:500,mr:1},children:e_?"Show Less":"Show More"}),e_?(0,r.jsx)(u.A,{size:16}):(0,r.jsx)(h.A,{size:16})]})]}),ai&&(0,r.jsxs)(l.default,{sx:{mb:4},children:[(0,r.jsx)(v.A,{fullWidth:!0,chipVariant:"secondary",endIcon:ep?(0,r.jsx)(u.A,{size:16,style:{fill:"#004735",stroke:"none"}}):(0,r.jsx)(h.A,{size:16,style:{fill:"#004735",stroke:"none"}}),sx:{justifyContent:"space-between",py:2,height:"auto"},onClick:()=>eg(!ep),children:au?"Related Variables (".concat(au," / ").concat(ah,")"):"Variables (".concat(ah,")")}),(0,r.jsx)(n.A,{in:ep,children:(0,r.jsx)(l.default,{sx:{p:2,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2,mb:2},children:(0,r.jsx)(S,{variables:ac,studyName:e7})})})]}),(0,r.jsxs)(l.default,{sx:{mb:4},children:[(0,r.jsx)(v.A,{fullWidth:!0,chipVariant:"secondary",endIcon:eP.details?(0,r.jsx)(u.A,{size:16,style:{fill:"#004735",stroke:"none"}}):(0,r.jsx)(h.A,{size:16,style:{fill:"#004735",stroke:"none"}}),sx:{justifyContent:"space-between",py:2,height:"auto"},onClick:()=>ad("details"),children:"Details"}),(0,r.jsx)(n.A,{in:eP.details,children:(0,r.jsx)(l.default,{sx:{p:2,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2,mb:2},children:(0,r.jsxs)(l.default,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(null===(J=ev.dataset_schema)||void 0===J?void 0:null===(Y=J.publisher)||void 0===Y?void 0:Y[0])&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Publisher:"}),(0,r.jsx)(g.A,{name:ev.dataset_schema.publisher[0].name||"Unknown Publisher",url:null===(K=ev.dataset_schema.publisher[0])||void 0===K?void 0:K.url,logo:null===(Q=ev.dataset_schema.publisher[0])||void 0===Q?void 0:Q.logo})]}),((null===(Z=ev.extra_data)||void 0===Z?void 0:Z.geographic_coverage)||(null===($=ev.extra_data)||void 0===$?void 0:$.country_codes))&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Geographic Coverage:"}),(0,r.jsx)(s.A,{children:ev.extra_data.geographic_coverage||(null===(ee=ev.extra_data.country_codes)||void 0===ee?void 0:ee.join(", "))})]}),((null===(ea=ev.dataset_schema)||void 0===ea?void 0:ea.temporalCoverage)||(null===(et=ev.extra_data)||void 0===et?void 0:et.start_year)&&(null===(er=ev.extra_data)||void 0===er?void 0:er.end_year))&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Temporal Coverage:"}),(0,r.jsx)(s.A,{children:(e=>{if(!e)return"Not specified";if(e.includes("..")){let[a,t]=e.split("..");return t?"".concat(a," - ").concat(t):"".concat(a," - Present (Ongoing)")}return e})((null===(el=ev.dataset_schema)||void 0===el?void 0:el.temporalCoverage)||"".concat(ev.extra_data.start_year,"..").concat(ev.extra_data.end_year))})]}),(null===(ei=ev.extra_data)||void 0===ei?void 0:ei.sample_size)&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Sample Size:"}),(0,r.jsx)(s.A,{children:ev.extra_data.sample_size})]}),((null===(es=ev.extra_data)||void 0===es?void 0:es.age_lower)||(null===(eo=ev.extra_data)||void 0===eo?void 0:eo.age_upper))&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Age Coverage:"}),(0,r.jsx)(s.A,{children:ev.extra_data.age_lower&&ev.extra_data.age_upper?"".concat(ev.extra_data.age_lower," - ").concat(ev.extra_data.age_upper," years"):ev.extra_data.age_lower?"".concat(ev.extra_data.age_lower,"+ years"):"0 - ".concat(ev.extra_data.age_upper," years")})]}),(null===(en=ev.extra_data)||void 0===en?void 0:en.resource_type)&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Resource Type:"}),(0,r.jsx)(s.A,{children:ev.extra_data.resource_type})]}),(null===(ed=ev.extra_data)||void 0===ed?void 0:ed.study_design)&&ev.extra_data.study_design.length>0&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Study Design:"}),(0,r.jsx)(s.A,{children:ev.extra_data.study_design.join(", ")})]})]})})})]}),(null===(ec=ev.dataset_schema)||void 0===ec?void 0:ec.funder)&&ev.dataset_schema.funder.length>0&&(0,r.jsxs)(l.default,{sx:{mb:4,flexShrink:0},children:[(0,r.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Funders:"}),(0,r.jsx)(l.default,{sx:{display:"flex",overflowX:"auto",gap:2,pb:1,"&::-webkit-scrollbar":{height:6},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.2)",borderRadius:3}},children:ev.dataset_schema.funder.map((e,a)=>(0,r.jsx)(g.A,{name:e.name||"Funding Organization",url:null==e?void 0:e.url,logo:null==e?void 0:e.logo},"".concat(e.name,"-").concat(a)))})]}),(null===(eu=ev.dataset_schema)||void 0===eu?void 0:eu.includedInDataCatalog)&&ev.dataset_schema.includedInDataCatalog.length>0&&(0,r.jsxs)(l.default,{sx:{mb:4,flexShrink:0},children:[(0,r.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Available in Data Catalogs:"}),(0,r.jsx)(l.default,{sx:{display:"flex",overflowX:"auto",gap:2,pb:1,"&::-webkit-scrollbar":{height:6},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.2)",borderRadius:3}},children:ev.dataset_schema.includedInDataCatalog.map((e,a)=>(0,r.jsx)(p,{name:e.name||"Data Catalog",url:e.url,logo:e.image},"".concat(e.name,"-").concat(a)))})]}),ar&&(0,r.jsxs)(l.default,{sx:{mb:4},children:[(0,r.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Topics:"}),(0,r.jsx)(l.default,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:at.map((e,a)=>(0,r.jsx)(v.A,{onClick:a=>{a.stopPropagation(),e2&&e6("keywords",e)},sx:{cursor:"pointer"},children:e},"topic-".concat(a)))})]}),ao&&(0,r.jsxs)(l.default,{sx:{mb:4,flexShrink:0},children:[(0,r.jsx)(v.A,{fullWidth:!0,chipVariant:"secondary",endIcon:eb?(0,r.jsx)(u.A,{size:16,style:{fill:"#004735",stroke:"none"}}):(0,r.jsx)(h.A,{size:16,style:{fill:"#004735",stroke:"none"}}),sx:{justifyContent:"space-between",py:2,height:"auto",mb:2},onClick:()=>ey(!eb),children:"Related Links & Papers"}),(0,r.jsx)(n.A,{in:eb,children:eb&&(0,r.jsx)(l.default,{sx:{display:"flex",flexWrap:"wrap",gap:2,mb:2,alignItems:"flex-start"},children:null==as?void 0:as.map((e,a)=>(0,r.jsx)(l.default,{sx:{flex:"1 1 350px",minWidth:300,maxWidth:500},children:(0,r.jsx)(y.A,{url:e})},"link-".concat(a)))})})]}),al&&(0,r.jsxs)(l.default,{sx:{mb:2},children:[(0,r.jsxs)(v.A,{fullWidth:!0,chipVariant:"secondary",endIcon:eR?(0,r.jsx)(u.A,{size:16,style:{fill:"#004735",stroke:"none"}}):(0,r.jsx)(h.A,{size:16,style:{fill:"#004735",stroke:"none"}}),sx:{justifyContent:"space-between",py:2,height:"auto",mb:2},onClick:()=>eD(!eR),children:["Instruments (",((null===(eh=ev.extra_data)||void 0===eh?void 0:eh.instruments)||[]).length,")"]}),(0,r.jsx)(n.A,{in:eR,children:(0,r.jsx)(l.default,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:((null===(ex=ev.extra_data)||void 0===ex?void 0:ex.instruments)||[]).map((e,a)=>(0,r.jsx)(v.A,{onClick:a=>{a.stopPropagation(),e2&&e6("instruments",e)},sx:{cursor:"pointer"},children:e},"instrument-".concat(a)))})})]}),Array.isArray(ev.child_datasets)&&(ev.child_datasets||[]).length>0&&(0,r.jsxs)(l.default,{sx:{mb:4},children:[(0,r.jsxs)(v.A,{fullWidth:!0,chipVariant:"secondary",endIcon:eP.childDatasets?(0,r.jsx)(u.A,{size:16,style:{fill:"#004735",stroke:"none"}}):(0,r.jsx)(h.A,{size:16,style:{fill:"#004735",stroke:"none"}}),sx:{justifyContent:"space-between",py:2,height:"auto"},onClick:()=>ad("childDatasets"),children:["Related Datasets (",(ev.child_datasets||[]).length,")"]}),(0,r.jsx)(n.A,{in:eP.childDatasets,children:(0,r.jsx)(l.default,{sx:{p:2,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2,mb:2},children:(0,r.jsx)(I,{datasets:ev.child_datasets})})})]})]})})},17146:(e,a,t)=>{t.d(a,{A:()=>n,AuthProvider:()=>d});var r=t(95155),l=t(12115);let i=null,s=async()=>{if(i)return i;console.log("\uD83D\uDD0D Loading Firebase modules dynamically");let[{auth:e},{GithubAuthProvider:a,TwitterAuthProvider:r,GoogleAuthProvider:l,signInWithPopup:s,signInWithEmailAndPassword:o,createUserWithEmailAndPassword:n,sendPasswordResetEmail:d,signOut:c,onAuthStateChanged:u}]=await Promise.all([Promise.all([t.e(9895),t.e(2154),t.e(1972),t.e(7512),t.e(1175)]).then(t.bind(t,95918)),Promise.all([t.e(9895),t.e(1972),t.e(7512)]).then(t.bind(t,14565))]);return i={auth:e,GithubAuthProvider:a,TwitterAuthProvider:r,GoogleAuthProvider:l,signInWithPopup:s,signInWithEmailAndPassword:o,createUserWithEmailAndPassword:n,sendPasswordResetEmail:d,signOut:c,onAuthStateChanged:u}},o=(0,l.createContext)({currentUser:null,login:async()=>(console.warn("Auth not available on server"),null),signup:async()=>(console.warn("Auth not available on server"),null),logout:async()=>{console.warn("Auth not available on server")},resetPassword:async()=>{console.warn("Auth not available on server")},signInWithGoogle:async()=>(console.warn("Auth not available on server"),null),signInWithGitHub:async()=>(console.warn("Auth not available on server"),null),signInWithTwitter:async()=>(console.warn("Auth not available on server"),null),loading:!1});function n(){return(0,l.useContext)(o)}function d(e){let{children:a}=e,[t,i]=(0,l.useState)(null),[n,d]=(0,l.useState)(!0),[c,u]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{let{auth:e,onAuthStateChanged:a}=await s();if(!e){console.warn("Firebase auth not available"),d(!1);return}return u(!0),a(e,e=>{console.log("\uD83D\uDD04 Auth state changed:",{hasUser:!!e,uid:null==e?void 0:e.uid,SSR:!1}),i(e),d(!1)})}catch(e){console.error("Failed to load Firebase modules:",e),d(!1)}})()},[]);let h={currentUser:t,...l.useMemo(()=>{let e=async e=>{let{auth:a,signInWithPopup:t}=await s();return t(a,e).then(e=>e.user).catch(a=>e.credentialFromError(a))};return{login:async(e,a)=>{let{auth:t,signInWithEmailAndPassword:r}=await s();return r(t,e,a)},signup:async(e,a)=>{let{auth:t,createUserWithEmailAndPassword:r}=await s();return r(t,e,a)},logout:async()=>{let{auth:e,signOut:a}=await s();return a(e)},resetPassword:async e=>{let{auth:a,sendPasswordResetEmail:t}=await s();return t(a,e)},signInWithGoogle:async()=>{let{GoogleAuthProvider:a}=await s();return e(new a)},signInWithGitHub:async()=>{let{GithubAuthProvider:a}=await s();return e(new a)},signInWithTwitter:async()=>{let{TwitterAuthProvider:a}=await s();return e(new a)}}},[]),loading:n};return(0,r.jsx)(o.Provider,{value:h,children:a})}},83705:(e,a,t)=>{t.d(a,{D:()=>d,FirebaseProvider:()=>c});var r=t(95155),l=t(12115);let i=null,s=null,o=async()=>{if(i)return i;console.log("\uD83D\uDD0D Loading Firebase Firestore modules dynamically");let[{collection:e,query:a,where:r,getDocs:l,addDoc:o,deleteDoc:n,doc:d,serverTimestamp:c},{db:u}]=await Promise.all([Promise.all([t.e(2154),t.e(1972),t.e(7710)]).then(t.bind(t,54615)),Promise.all([t.e(9895),t.e(2154),t.e(1972),t.e(7512),t.e(1175)]).then(t.bind(t,95918))]);return i={collection:e,query:a,where:r,getDocs:l,addDoc:o,deleteDoc:n,doc:d,serverTimestamp:c},s=u,{...i,db:u}},n=(0,l.createContext)({checkIfResourceSaved:async()=>({isSaved:!1}),saveResource:async()=>{throw Error("Firebase not available on server")},unsaveResource:async()=>{throw Error("Firebase not available on server")},submitFeedback:async()=>{throw Error("Firebase not available on server")},firestoreReady:!1});function d(){return(0,l.useContext)(n)}function c(e){let{children:a}=e,[t,i]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{await o(),i(!0)}catch(e){console.error("Failed to load Firebase Firestore modules:",e),i(!1)}})()},[]);let d={...l.useMemo(()=>t?{checkIfResourceSaved:async(e,a)=>{let{collection:t,query:r,where:l,getDocs:i}=await o(),n=r(t(s,"saved_resources"),l("uid","==",e),l("uuid","==",a)),d=await i(n);return d.empty?{isSaved:!1}:{isSaved:!0,resourceId:d.docs[0].id}},saveResource:async(e,a)=>{let{collection:t,addDoc:r,serverTimestamp:l}=await o(),i={...a,uid:e,created:l()};return(await r(t(s,"saved_resources"),i)).id},unsaveResource:async e=>{let{deleteDoc:a,doc:t}=await o();await a(t(s,"saved_resources",e))},submitFeedback:async(e,a)=>{let{collection:t,addDoc:r,serverTimestamp:l}=await o(),i={uid:"anon",rating:e,comment:a||"",created:l(),source:"discoverynext"};return await r(t(s,"ratings"),i)}}:{checkIfResourceSaved:async()=>({isSaved:!1}),saveResource:async()=>{throw Error("Firebase not available on server")},unsaveResource:async()=>{throw Error("Firebase not available on server")},submitFeedback:async()=>{throw Error("Firebase not available on server")}},[t]),firestoreReady:t};return(0,r.jsx)(n.Provider,{value:d,children:a})}}}]);