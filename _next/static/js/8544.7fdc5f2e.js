"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8544],{28544:(e,a,t)=>{t.d(a,{A:()=>_});var l=t(95155),i=t(94049),n=t(73741),s=t(25635),r=t(1151),o=t(15239),d=t(18844),c=t(37609),h=t(12115),u=t(63082),x=t(2778),p=t(52363),m=t(65036),b=t(75912),f=t(70690),g=t(52277),v=t(77073),j=t(42168);function y(e){let{open:a,onClose:t,data:n,title:o="Debug Data"}=e,d=()=>{navigator.clipboard.writeText(JSON.stringify(n,null,2))};return(0,l.jsxs)(x.A,{open:a,onClose:t,maxWidth:"lg",fullWidth:!0,sx:{"& .MuiDialog-paper":{maxHeight:"90vh",height:"90vh"}},children:[(0,l.jsxs)(p.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[(0,l.jsx)(s.A,{variant:"h6",component:"div",children:o}),(0,l.jsxs)(i.default,{children:[(0,l.jsx)(r.A,{onClick:d,size:"small",sx:{mr:1},title:"Copy JSON to clipboard",children:(0,l.jsx)(g.A,{fontSize:"small"})}),(0,l.jsx)(r.A,{onClick:t,size:"small",children:(0,l.jsx)(v.A,{fontSize:"small"})})]})]}),(0,l.jsx)(m.A,{dividers:!0,sx:{p:0,height:"100%"},children:a&&(0,l.jsx)(i.default,{sx:{height:"100%",overflow:"auto","& .w-json-view-container":{backgroundColor:"#fafafa",fontSize:"13px",fontFamily:'"SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace'}},children:(0,l.jsx)(j.Ay,{value:n,collapsed:2,displayObjectSize:!0,displayDataTypes:!0,enableClipboard:!0,style:{backgroundColor:"#fafafa",padding:"16px"}})})}),(0,l.jsxs)(b.A,{children:[(0,l.jsx)(f.A,{onClick:d,startIcon:(0,l.jsx)(g.A,{}),children:"Copy JSON"}),(0,l.jsx)(f.A,{onClick:t,variant:"contained",children:"Close"})]})]})}function _(e){var a,t,x,p,m,b,f,g,v,j,_,C,A,w,k,z,M,S,D,W,I,V,F,O,N,R,H,B,E,J;let{result:L,isSelected:T,onClick:U,onFindSimilar:P,onReportResult:q}=e,G=!!(L.ancestors&&L.ancestors.length>0),K=null==(t=L.extra_data)||null==(a=t.resource_type)?void 0:a.includes("variable"),Q=null==(p=L.extra_data)||null==(x=p.resource_type)?void 0:x.includes("dataset"),[X,Y]=(0,h.useState)(!1),Z=L,$=L;G&&(null==(m=L.ancestors)?void 0:m[0])&&($=L.ancestors[0],Z=L),(null==$||null==(b=$.extra_data)?void 0:b.resource_type)||$.dataset_schema&&$.dataset_schema["@type"];let ee=(null==(f=$.dataset_schema)?void 0:f.name)||(null==(g=$.extra_data)?void 0:g.name)||"Unnamed Resource",ea=G&&Q?(null==(v=Z.dataset_schema)?void 0:v.description)||(null==(j=Z.extra_data)?void 0:j.description)||"":(null==(_=$.dataset_schema)?void 0:_.description)||(null==(C=$.extra_data)?void 0:C.description)||"",et=((null==(A=$.dataset_schema)?void 0:A.keywords)||$.topics||[]).filter(e=>"string"==typeof e&&!e.includes("<a title=")&&!e.startsWith("<")),el=null!=(J=null!=(E=null!=(B=null!=(H=null!=(R=Z.num_descendant_variables)?R:null==(w=Z.extra_data)?void 0:w.num_variables)?H:null==(k=Z.extra_data)?void 0:k.number_of_variables)?B:null==(z=Z.dataset_schema)?void 0:z.number_of_variables)?E:null==(S=Z.dataset_schema)||null==(M=S.variableMeasured)?void 0:M.length)?J:0,ei=(null==(D=Z.variables_which_matched)?void 0:D.length)||0,en=(null==(W=Z.child_datasets)?void 0:W.length)||0,es=(null==(I=Z.dataset_schema)?void 0:I.includedInDataCatalog)&&Z.dataset_schema.includedInDataCatalog.length>0,er=ea.length>200?"".concat(ea.substring(0,200),"..."):ea,eo=null,[ed,ec]=(0,h.useState)(!1);(null==(V=$.dataset_schema)?void 0:V.image)&&!ed?eo=$.dataset_schema.image:$.thumbnail&&!ed&&(eo=$.thumbnail);let eh=(0,h.useMemo)(()=>{var e=(e=>{let a=0;for(let t=0;t<e.length;t++)a=(a<<5)-a+e.charCodeAt(t),a&=a;return Math.abs(a)})(ee);let a=Math.max(80,Math.min(220,(0xff0000&e)>>16)),t=Math.max(80,Math.min(220,(65280&e)>>8)),l=Math.max(80,Math.min(220,255&e));return"rgb(".concat(a,", ").concat(t,", ").concat(l,")")},[ee]),eu=(0,h.useMemo)(()=>(e=>{let a=e.trim();return a&&(a.replace(/^(A|The)\s+/i,"").charAt(0).toUpperCase()||a.charAt(0).toUpperCase())||"?"})(ee),[ee]);return(0,l.jsxs)(i.default,{onClick:U,sx:{cursor:"pointer",display:"flex",width:"100%",bgcolor:T?"rgba(25, 118, 210, 0.08)":"transparent",borderLeft:T?"3px solid":"3px solid transparent",borderRight:T?"3px solid":"3px solid transparent",borderColor:T?"primary.main":"transparent","&:hover":{bgcolor:T?"rgba(25, 118, 210, 0.12)":"rgba(0, 0, 0, 0.02)"}},children:[(0,l.jsxs)(i.default,{sx:{width:120,minHeight:"100%",py:2,flexShrink:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"grey.500",background:"transparent",position:"relative"},children:[eo&&!ed?(0,l.jsx)(o.default,{src:eo,alt:ee,width:100,height:100,style:{objectFit:"contain"},onError:()=>ec(!0),unoptimized:!0}):(0,l.jsx)(n.A,{sx:{width:60,height:60,bgcolor:eh,fontSize:"1.5rem",fontWeight:"bold"},children:eu}),G&&(0,l.jsxs)(l.Fragment,{children:[K&&(0,l.jsx)(i.default,{sx:{position:"absolute",top:0,right:0,bgcolor:"primary.main",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:"V"}),Q&&(0,l.jsx)(i.default,{sx:{position:"absolute",top:0,right:0,bgcolor:"primary.main",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:(0,l.jsx)(d.A,{size:16})})]})]}),(0,l.jsxs)(i.default,{sx:{display:"flex",flexDirection:"column",p:2,flex:1,background:"transparent"},children:[(0,l.jsxs)(i.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,l.jsx)(s.A,{variant:"h6",gutterBottom:!0,sx:{mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.2,flex:1,mr:1},children:ee}),(0,l.jsx)(r.A,{size:"small",onClick:e=>{e.stopPropagation(),q?q():Y(!0)},sx:{opacity:.6,"&:hover":{opacity:1},color:"text.secondary"},title:q?"Report search result issue":"Debug data",children:(0,l.jsx)(c.A,{size:16})})]}),et.length>0&&(0,l.jsx)(s.A,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:et.slice(0,5).map((e,a)=>(0,l.jsxs)(i.default,{component:"span",children:[(0,l.jsx)(i.default,{component:"strong",sx:{fontSize:{xs:"0.75rem",sm:"0.85rem"}},children:e}),a<Math.min(et.length,5)-1&&(0,l.jsx)(i.default,{component:"span",sx:{mx:.5},children:"â€¢"})]},"".concat(e,"-").concat(a)))}),(0,l.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.4,mb:1.5},children:er}),(0,l.jsx)(i.default,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:"auto"},children:G&&K?(0,l.jsx)(u.A,{chipVariant:"primary",size:"small",children:(null==(F=Z.extra_data)?void 0:F.description)||(null==(O=Z.extra_data)?void 0:O.name)},null==(N=Z.extra_data)?void 0:N.uuid):(0,l.jsxs)(l.Fragment,{children:[el>0&&(0,l.jsx)(u.A,{chipVariant:"primary",size:"small",children:ei>0?"Matched by variable":"".concat(el," Variables")}),es&&(0,l.jsx)(u.A,{chipVariant:"secondary",size:"small",children:"Data Available"}),en>0&&(0,l.jsxs)(u.A,{chipVariant:"secondary",size:"small",sx:{backgroundColor:"#444653",color:"white","&:hover":{backgroundColor:"#3a3d47"}},children:[en," Dataset",1!==en?"s":""]}),Z.hasFreeAccess&&(0,l.jsx)(u.A,{chipVariant:"secondary",size:"small",children:"Free Access"}),Z.hasCohortsAvailable&&(0,l.jsx)(u.A,{chipVariant:"secondary",size:"small",children:"Cohorts Available"})]})})]}),(0,l.jsx)(y,{open:X,onClose:()=>Y(!1),data:Z,title:"Debug: ".concat(ee)})]})}}}]);