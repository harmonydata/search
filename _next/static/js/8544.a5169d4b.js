"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8544],{28544:(e,t,a)=>{a.d(t,{A:()=>C});var i=a(95155),l=a(94049),s=a(73741),n=a(25635),r=a(1151),o=a(15239),d=a(18844),c=a(37609),h=a(12115),x=a(63082),u=a(2778),p=a(52363),m=a(65036),b=a(75912),f=a(70690),g=a(52277),v=a(77073),j=a(42168);function y(e){let{open:t,onClose:a,data:s,title:o="Debug Data"}=e,d=()=>{navigator.clipboard.writeText(JSON.stringify(s,null,2))};return(0,i.jsxs)(u.A,{open:t,onClose:a,maxWidth:"lg",fullWidth:!0,sx:{"& .MuiDialog-paper":{maxHeight:"90vh",height:"90vh"}},children:[(0,i.jsxs)(p.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[(0,i.jsx)(n.A,{variant:"h6",component:"div",children:o}),(0,i.jsxs)(l.default,{children:[(0,i.jsx)(r.A,{onClick:d,size:"small",sx:{mr:1},title:"Copy JSON to clipboard",children:(0,i.jsx)(g.A,{fontSize:"small"})}),(0,i.jsx)(r.A,{onClick:a,size:"small",children:(0,i.jsx)(v.A,{fontSize:"small"})})]})]}),(0,i.jsx)(m.A,{dividers:!0,sx:{p:0,height:"100%"},children:t&&(0,i.jsx)(l.default,{sx:{height:"100%",overflow:"auto","& .w-json-view-container":{backgroundColor:"#fafafa",fontSize:"13px",fontFamily:'"SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace'}},children:(0,i.jsx)(j.Ay,{value:s,collapsed:2,displayObjectSize:!0,displayDataTypes:!0,enableClipboard:!0,style:{backgroundColor:"#fafafa",padding:"16px"}})})}),(0,i.jsxs)(b.A,{children:[(0,i.jsx)(f.A,{onClick:d,startIcon:(0,i.jsx)(g.A,{}),children:"Copy JSON"}),(0,i.jsx)(f.A,{onClick:a,variant:"contained",children:"Close"})]})]})}function C(e){var t,a,u,p,m,b,f,g,v,j,C,A,_,w,k,z,M,S,D,W,I,V,F;let{result:O,isSelected:N,onClick:R,onFindSimilar:H,onReportResult:B}=e,E=!!(O.ancestors&&O.ancestors.length>0),J=null==(a=O.extra_data)||null==(t=a.resource_type)?void 0:t.includes("variable"),L=null==(p=O.extra_data)||null==(u=p.resource_type)?void 0:u.includes("dataset"),[T,U]=(0,h.useState)(!1),P=O,q=O;E&&(null==(m=O.ancestors)?void 0:m[0])&&(q=O.ancestors[0],P=O),(null==q||null==(b=q.extra_data)?void 0:b.resource_type)||q.dataset_schema&&q.dataset_schema["@type"];let G=(null==(f=q.dataset_schema)?void 0:f.name)||(null==(g=q.extra_data)?void 0:g.name)||"Unnamed Resource",K=E&&L?(null==(v=P.dataset_schema)?void 0:v.description)||(null==(j=P.extra_data)?void 0:j.description)||"":(null==(C=q.dataset_schema)?void 0:C.description)||(null==(A=q.extra_data)?void 0:A.description)||"",Q=((null==(_=q.dataset_schema)?void 0:_.keywords)||q.topics||[]).filter(e=>"string"==typeof e&&!e.includes("<a title=")&&!e.startsWith("<")),X=(null==(w=P.dataset_schema)?void 0:w.number_of_variables)||(null==(z=P.dataset_schema)||null==(k=z.variableMeasured)?void 0:k.length)||0,Y=(null==(M=P.variables_which_matched)?void 0:M.length)||0,Z=(null==(S=P.child_datasets)?void 0:S.length)||0,$=(null==(D=P.dataset_schema)?void 0:D.includedInDataCatalog)&&P.dataset_schema.includedInDataCatalog.length>0,ee=K.length>200?"".concat(K.substring(0,200),"..."):K,et=null,[ea,ei]=(0,h.useState)(!1);(null==(W=q.dataset_schema)?void 0:W.image)&&!ea?et=q.dataset_schema.image:q.thumbnail&&!ea&&(et=q.thumbnail);let el=(0,h.useMemo)(()=>{var e=(e=>{let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t&=t;return Math.abs(t)})(G);let t=Math.max(80,Math.min(220,(0xff0000&e)>>16)),a=Math.max(80,Math.min(220,(65280&e)>>8)),i=Math.max(80,Math.min(220,255&e));return"rgb(".concat(t,", ").concat(a,", ").concat(i,")")},[G]),es=(0,h.useMemo)(()=>(e=>{let t=e.trim();return t&&(t.replace(/^(A|The)\s+/i,"").charAt(0).toUpperCase()||t.charAt(0).toUpperCase())||"?"})(G),[G]);return(0,i.jsxs)(l.default,{onClick:R,sx:{cursor:"pointer",display:"flex",width:"100%",bgcolor:N?"rgba(25, 118, 210, 0.08)":"transparent",borderLeft:N?"3px solid":"3px solid transparent",borderRight:N?"3px solid":"3px solid transparent",borderColor:N?"primary.main":"transparent","&:hover":{bgcolor:N?"rgba(25, 118, 210, 0.12)":"rgba(0, 0, 0, 0.02)"}},children:[(0,i.jsxs)(l.default,{sx:{width:120,minHeight:"100%",py:2,flexShrink:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"grey.500",background:"transparent",position:"relative"},children:[et&&!ea?(0,i.jsx)(o.default,{src:et,alt:G,width:100,height:100,style:{objectFit:"contain"},onError:()=>ei(!0),unoptimized:!0}):(0,i.jsx)(s.A,{sx:{width:60,height:60,bgcolor:el,fontSize:"1.5rem",fontWeight:"bold"},children:es}),E&&(0,i.jsxs)(i.Fragment,{children:[J&&(0,i.jsx)(l.default,{sx:{position:"absolute",top:0,right:0,bgcolor:"primary.main",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:"V"}),L&&(0,i.jsx)(l.default,{sx:{position:"absolute",top:0,right:0,bgcolor:"primary.main",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:(0,i.jsx)(d.A,{size:16})})]})]}),(0,i.jsxs)(l.default,{sx:{display:"flex",flexDirection:"column",p:2,flex:1,background:"transparent"},children:[(0,i.jsxs)(l.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,i.jsx)(n.A,{variant:"h6",gutterBottom:!0,sx:{mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.2,flex:1,mr:1},children:G}),(0,i.jsx)(r.A,{size:"small",onClick:e=>{e.stopPropagation(),B?B():U(!0)},sx:{opacity:.6,"&:hover":{opacity:1},color:"text.secondary"},title:B?"Report search result issue":"Debug data",children:(0,i.jsx)(c.A,{size:16})})]}),Q.length>0&&(0,i.jsx)(n.A,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:Q.slice(0,5).map((e,t)=>(0,i.jsxs)(l.default,{component:"span",children:[(0,i.jsx)(l.default,{component:"strong",sx:{fontSize:{xs:"0.75rem",sm:"0.85rem"}},children:e}),t<Math.min(Q.length,5)-1&&(0,i.jsx)(l.default,{component:"span",sx:{mx:.5},children:"â€¢"})]},"".concat(e,"-").concat(t)))}),(0,i.jsx)(n.A,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.4,mb:1.5},children:ee}),(0,i.jsx)(l.default,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:"auto"},children:E&&J?(0,i.jsx)(x.A,{chipVariant:"primary",size:"small",children:(null==(I=P.extra_data)?void 0:I.description)||(null==(V=P.extra_data)?void 0:V.name)},null==(F=P.extra_data)?void 0:F.uuid):(0,i.jsxs)(i.Fragment,{children:[X>0&&(0,i.jsx)(x.A,{chipVariant:"primary",size:"small",children:Y>0?"Matched by variable":"".concat(X," Variables")}),$&&(0,i.jsx)(x.A,{chipVariant:"secondary",size:"small",children:"Data Available"}),Z>0&&(0,i.jsxs)(x.A,{chipVariant:"secondary",size:"small",sx:{backgroundColor:"#444653",color:"white","&:hover":{backgroundColor:"#3a3d47"}},children:[Z," Dataset",1!==Z?"s":""]}),P.hasFreeAccess&&(0,i.jsx)(x.A,{chipVariant:"secondary",size:"small",children:"Free Access"}),P.hasCohortsAvailable&&(0,i.jsx)(x.A,{chipVariant:"secondary",size:"small",children:"Cohorts Available"})]})})]}),(0,i.jsx)(y,{open:T,onClose:()=>U(!1),data:P,title:"Debug: ".concat(G)})]})}}}]);