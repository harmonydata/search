"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8544],{28544:(e,a,t)=>{t.d(a,{A:()=>_});var l=t(95155),i=t(94049),s=t(73741),n=t(25635),r=t(1151),o=t(15239),d=t(18844),c=t(37609),h=t(12115),x=t(63082),u=t(2778),p=t(52363),m=t(65036),b=t(75912),f=t(70690),g=t(52277),v=t(77073),j=t(42168);function y(e){let{open:a,onClose:t,data:s,title:o="Debug Data"}=e,d=()=>{navigator.clipboard.writeText(JSON.stringify(s,null,2))};return(0,l.jsxs)(u.A,{open:a,onClose:t,maxWidth:"lg",fullWidth:!0,sx:{"& .MuiDialog-paper":{maxHeight:"90vh",height:"90vh"}},children:[(0,l.jsxs)(p.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[(0,l.jsx)(n.A,{variant:"h6",component:"div",children:o}),(0,l.jsxs)(i.default,{children:[(0,l.jsx)(r.A,{onClick:d,size:"small",sx:{mr:1},title:"Copy JSON to clipboard",children:(0,l.jsx)(g.A,{fontSize:"small"})}),(0,l.jsx)(r.A,{onClick:t,size:"small",children:(0,l.jsx)(v.A,{fontSize:"small"})})]})]}),(0,l.jsx)(m.A,{dividers:!0,sx:{p:0,height:"100%"},children:a&&(0,l.jsx)(i.default,{sx:{height:"100%",overflow:"auto","& .w-json-view-container":{backgroundColor:"#fafafa",fontSize:"13px",fontFamily:'"SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace'}},children:(0,l.jsx)(j.Ay,{value:s,collapsed:2,displayObjectSize:!0,displayDataTypes:!0,enableClipboard:!0,style:{backgroundColor:"#fafafa",padding:"16px"}})})}),(0,l.jsxs)(b.A,{children:[(0,l.jsx)(f.A,{onClick:d,startIcon:(0,l.jsx)(g.A,{}),children:"Copy JSON"}),(0,l.jsx)(f.A,{onClick:t,variant:"contained",children:"Close"})]})]})}function _(e){var a,t,u,p,m,b,f,g,v,j,_,C,A,w,k,z,M,S,D,W,I,V,F,O,N;let{result:R,isSelected:H,onClick:B,onFindSimilar:E,onReportResult:J}=e,L=!!(R.ancestors&&R.ancestors.length>0),T=null==(t=R.extra_data)||null==(a=t.resource_type)?void 0:a.includes("variable"),U=null==(p=R.extra_data)||null==(u=p.resource_type)?void 0:u.includes("dataset"),[P,q]=(0,h.useState)(!1),G=R,K=R;L&&(null==(m=R.ancestors)?void 0:m[0])&&(K=R.ancestors[0],G=R),(null==K||null==(b=K.extra_data)?void 0:b.resource_type)||K.dataset_schema&&K.dataset_schema["@type"];let Q=(null==(f=K.dataset_schema)?void 0:f.name)||(null==(g=K.extra_data)?void 0:g.name)||"Unnamed Resource",X=L&&U?(null==(v=G.dataset_schema)?void 0:v.description)||(null==(j=G.extra_data)?void 0:j.description)||"":(null==(_=K.dataset_schema)?void 0:_.description)||(null==(C=K.extra_data)?void 0:C.description)||"",Y=((null==(A=K.dataset_schema)?void 0:A.keywords)||K.topics||[]).filter(e=>"string"==typeof e&&!e.includes("<a title=")&&!e.startsWith("<")),Z=(null==(w=G.extra_data)?void 0:w.num_variables)||(null==(k=G.extra_data)?void 0:k.number_of_variables)||(null==(z=G.dataset_schema)?void 0:z.number_of_variables)||(null==(S=G.dataset_schema)||null==(M=S.variableMeasured)?void 0:M.length)||0,$=(null==(D=G.variables_which_matched)?void 0:D.length)||0,ee=(null==(W=G.child_datasets)?void 0:W.length)||0,ea=(null==(I=G.dataset_schema)?void 0:I.includedInDataCatalog)&&G.dataset_schema.includedInDataCatalog.length>0,et=X.length>200?"".concat(X.substring(0,200),"..."):X,el=null,[ei,es]=(0,h.useState)(!1);(null==(V=K.dataset_schema)?void 0:V.image)&&!ei?el=K.dataset_schema.image:K.thumbnail&&!ei&&(el=K.thumbnail);let en=(0,h.useMemo)(()=>{var e=(e=>{let a=0;for(let t=0;t<e.length;t++)a=(a<<5)-a+e.charCodeAt(t),a&=a;return Math.abs(a)})(Q);let a=Math.max(80,Math.min(220,(0xff0000&e)>>16)),t=Math.max(80,Math.min(220,(65280&e)>>8)),l=Math.max(80,Math.min(220,255&e));return"rgb(".concat(a,", ").concat(t,", ").concat(l,")")},[Q]),er=(0,h.useMemo)(()=>(e=>{let a=e.trim();return a&&(a.replace(/^(A|The)\s+/i,"").charAt(0).toUpperCase()||a.charAt(0).toUpperCase())||"?"})(Q),[Q]);return(0,l.jsxs)(i.default,{onClick:B,sx:{cursor:"pointer",display:"flex",width:"100%",bgcolor:H?"rgba(25, 118, 210, 0.08)":"transparent",borderLeft:H?"3px solid":"3px solid transparent",borderRight:H?"3px solid":"3px solid transparent",borderColor:H?"primary.main":"transparent","&:hover":{bgcolor:H?"rgba(25, 118, 210, 0.12)":"rgba(0, 0, 0, 0.02)"}},children:[(0,l.jsxs)(i.default,{sx:{width:120,minHeight:"100%",py:2,flexShrink:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"grey.500",background:"transparent",position:"relative"},children:[el&&!ei?(0,l.jsx)(o.default,{src:el,alt:Q,width:100,height:100,style:{objectFit:"contain"},onError:()=>es(!0),unoptimized:!0}):(0,l.jsx)(s.A,{sx:{width:60,height:60,bgcolor:en,fontSize:"1.5rem",fontWeight:"bold"},children:er}),L&&(0,l.jsxs)(l.Fragment,{children:[T&&(0,l.jsx)(i.default,{sx:{position:"absolute",top:0,right:0,bgcolor:"primary.main",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:"V"}),U&&(0,l.jsx)(i.default,{sx:{position:"absolute",top:0,right:0,bgcolor:"primary.main",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:(0,l.jsx)(d.A,{size:16})})]})]}),(0,l.jsxs)(i.default,{sx:{display:"flex",flexDirection:"column",p:2,flex:1,background:"transparent"},children:[(0,l.jsxs)(i.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,l.jsx)(n.A,{variant:"h6",gutterBottom:!0,sx:{mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.2,flex:1,mr:1},children:Q}),(0,l.jsx)(r.A,{size:"small",onClick:e=>{e.stopPropagation(),J?J():q(!0)},sx:{opacity:.6,"&:hover":{opacity:1},color:"text.secondary"},title:J?"Report search result issue":"Debug data",children:(0,l.jsx)(c.A,{size:16})})]}),Y.length>0&&(0,l.jsx)(n.A,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:Y.slice(0,5).map((e,a)=>(0,l.jsxs)(i.default,{component:"span",children:[(0,l.jsx)(i.default,{component:"strong",sx:{fontSize:{xs:"0.75rem",sm:"0.85rem"}},children:e}),a<Math.min(Y.length,5)-1&&(0,l.jsx)(i.default,{component:"span",sx:{mx:.5},children:"â€¢"})]},"".concat(e,"-").concat(a)))}),(0,l.jsx)(n.A,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.4,mb:1.5},children:et}),(0,l.jsx)(i.default,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:"auto"},children:L&&T?(0,l.jsx)(x.A,{chipVariant:"primary",size:"small",children:(null==(F=G.extra_data)?void 0:F.description)||(null==(O=G.extra_data)?void 0:O.name)},null==(N=G.extra_data)?void 0:N.uuid):(0,l.jsxs)(l.Fragment,{children:[Z>0&&(0,l.jsx)(x.A,{chipVariant:"primary",size:"small",children:$>0?"Matched by variable":"".concat(Z," Variables")}),ea&&(0,l.jsx)(x.A,{chipVariant:"secondary",size:"small",children:"Data Available"}),ee>0&&(0,l.jsxs)(x.A,{chipVariant:"secondary",size:"small",sx:{backgroundColor:"#444653",color:"white","&:hover":{backgroundColor:"#3a3d47"}},children:[ee," Dataset",1!==ee?"s":""]}),G.hasFreeAccess&&(0,l.jsx)(x.A,{chipVariant:"secondary",size:"small",children:"Free Access"}),G.hasCohortsAvailable&&(0,l.jsx)(x.A,{chipVariant:"secondary",size:"small",children:"Cohorts Available"})]})})]}),(0,l.jsx)(y,{open:P,onClose:()=>q(!1),data:G,title:"Debug: ".concat(Q)})]})}}}]);