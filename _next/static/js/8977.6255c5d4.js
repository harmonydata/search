"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8977],{13709:(e,a,t)=>{t.d(a,{A:()=>m});var r=t(95155),l=t(2778),n=t(52363),s=t(94049),i=t(25635),o=t(1151),d=t(65036),c=t(75912),u=t(70690),h=t(77073),x=t(98168);function m(e){let{open:a,onClose:t,featureName:m="This feature"}=e;return(0,r.jsxs)(l.A,{open:a,onClose:t,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[(0,r.jsx)(n.A,{children:(0,r.jsxs)(s.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(x.A,{size:24,style:{color:"#ff9800"}}),(0,r.jsx)(i.A,{variant:"h6",children:"Coming Soon"})]}),(0,r.jsx)(o.A,{size:"small",onClick:t,children:(0,r.jsx)(h.A,{})})]})}),(0,r.jsx)(d.A,{dividers:!0,children:(0,r.jsxs)(i.A,{variant:"body1",color:"text.secondary",children:[m," is coming soon! We're working hard to bring you this feature."]})}),(0,r.jsx)(c.A,{sx:{p:3,pt:2},children:(0,r.jsx)(u.A,{onClick:t,variant:"contained",children:"Got it"})})]})}},39030:(e,a,t)=>{t.d(a,{A:()=>c});var r=t(95155),l=t(29767),n=t(94049),s=t(25635),i=t(15239),o=t(51691),d=t(12115);function c(e){let{name:a,url:t,logo:c,inactive:u,compact:h}=e,[x,m]=(0,d.useState)(c),[f,g]=(0,d.useState)(!1);(0,d.useEffect)(()=>{console.log('Resolving logo for organization: "'.concat(a,'"'));try{let e=(0,o.sM)(a,c);console.log('Resolved logo for organization "'.concat(a,'":'),e),m(e),g(!1)}catch(e){console.error('Error resolving logo for organization "'.concat(a,'":'),e),m(void 0)}},[a,c]);let p=x&&x.length>0&&!f;return(0,r.jsxs)(l.A,{elevation:0,sx:{display:"flex",borderRadius:"16px",overflow:"hidden",width:h?"220px":"280px",height:h?"75px":"85px",flexShrink:0,border:"1px solid",borderColor:"grey.200",cursor:t?"pointer":"default",transition:"all 0.2s",opacity:u?.5:1,"&:hover":t?{boxShadow:2,borderColor:"primary.main"}:{}},onClick:()=>{t&&window.open(t,"_blank","noopener,noreferrer")},children:[(0,r.jsx)(n.default,{sx:{flex:1,bgcolor:"rgba(0,0,0,0.03)",p:2,display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,r.jsx)(s.A,{sx:{fontWeight:500,fontSize:h?"0.8rem":"0.9rem",lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",maxHeight:"3.9em",wordBreak:"break-word",paddingBottom:"1px"},children:a})}),p&&(0,r.jsx)(n.default,{sx:{width:"30%",bgcolor:"white",display:"flex",alignItems:"center",justifyContent:"center",p:1,borderLeft:"1px solid",borderColor:"grey.200"},children:(0,r.jsx)(i.default,{src:x,alt:a,width:h?40:50,height:h?40:50,style:{objectFit:"contain"},onError:()=>{console.error('Error loading image for organization "'.concat(a,'" from path: ').concat(x)),g(!0)},unoptimized:!0})})]})}},41627:(e,a,t)=>{t.d(a,{D:()=>u,FirebaseProvider:()=>h});var r=t(95155),l=t(12115);let n=null,s=null,i="discoverynext_saved_resources_cache",o=e=>{try{let a={};for(let[t,r]of e.entries())a[t]=Object.fromEntries(r);localStorage.setItem(i,JSON.stringify(a))}catch(e){console.error("Error saving saved resources cache to localStorage:",e)}},d=async()=>{if(n)return n;console.log("\uD83D\uDD0D Loading Firebase Firestore modules dynamically");let[{collection:e,query:a,where:r,getDocs:l,getDoc:i,addDoc:o,deleteDoc:d,doc:c,serverTimestamp:u},{db:h}]=await Promise.all([Promise.all([t.e(2154),t.e(1398),t.e(282)]).then(t.bind(t,65705)),Promise.all([t.e(9895),t.e(2154),t.e(1398),t.e(1182),t.e(2691)]).then(t.bind(t,68464))]);return n={collection:e,query:a,where:r,getDocs:l,getDoc:i,addDoc:o,deleteDoc:d,doc:c,serverTimestamp:u},s=h,{...n,db:h}},c=(0,l.createContext)({checkIfResourceSaved:async()=>({isSaved:!1}),saveResource:async()=>{throw Error("Firebase not available on server")},unsaveResource:async()=>{throw Error("Firebase not available on server")},submitFeedback:async()=>{throw Error("Firebase not available on server")},firestoreReady:!1});function u(){return(0,l.useContext)(c)}function h(e){let{children:a}=e,[t,n]=(0,l.useState)(!1),u=(0,l.useRef)((()=>{try{let e=localStorage.getItem(i);if(e){let a=JSON.parse(e),t=new Map;for(let[e,r]of Object.entries(a))t.set(e,new Map(Object.entries(r)));return t}}catch(e){console.error("Error loading saved resources cache from localStorage:",e)}return new Map})());(0,l.useEffect)(()=>{(async()=>{try{await d(),n(!0)}catch(e){console.error("Failed to load Firebase Firestore modules:",e),n(!1)}})()},[]);let h={...l.useMemo(()=>t?{checkIfResourceSaved:async(e,a)=>{let t=u.current.get(e);if(t){let e=t.get(a);if(void 0!==e)return e}let{collection:r,query:l,where:n,getDocs:i}=await d(),c=l(r(s,"saved_resources"),n("uid","==",e),n("uuid","==",a)),h=await i(c),x=h.empty?{isSaved:!1}:{isSaved:!0,resourceId:h.docs[0].id};return u.current.has(e)||u.current.set(e,new Map),u.current.get(e).set(a,x),o(u.current),x},saveResource:async(e,a)=>{let{collection:t,addDoc:r,serverTimestamp:l}=await d(),n={...a,uid:e,created:l()},i=await r(t(s,"saved_resources"),n);u.current.has(e)||u.current.set(e,new Map);let c=a.uuid;return u.current.get(e).set(c,{isSaved:!0,resourceId:i.id}),o(u.current),i.id},unsaveResource:async e=>{let{deleteDoc:a,doc:t,getDoc:r}=await d(),l=t(s,"saved_resources",e),n=await r(l);if(n.exists()){let e=n.data(),t=e.uid,r=e.uuid;await a(l);let s=u.current.get(t);s&&r&&(s.set(r,{isSaved:!1}),o(u.current))}else await a(l)},submitFeedback:async(e,a)=>{let{collection:t,addDoc:r,serverTimestamp:l}=await d(),n={uid:"anon",rating:e,comment:a||"",created:l(),source:"discoverynext"};return await r(t(s,"ratings"),n)}}:{checkIfResourceSaved:async()=>({isSaved:!1}),saveResource:async()=>{throw Error("Firebase not available on server")},unsaveResource:async()=>{throw Error("Firebase not available on server")},submitFeedback:async()=>{throw Error("Firebase not available on server")}},[t]),firestoreReady:t};return(0,r.jsx)(c.Provider,{value:h,children:a})}},63082:(e,a,t)=>{t.d(a,{A:()=>l});var r=t(70690);let l=(0,t(48116).Ay)(r.A,{shouldForwardProp:e=>"chipVariant"!==e})(e=>{let{theme:a,chipVariant:t="primary",onClick:r=()=>{}}=e;return{onClick:r,borderRadius:8,textTransform:"none",padding:"0 16px",height:32,minHeight:32,fontSize:"0.875rem",fontWeight:500,whiteSpace:"nowrap",lineHeight:1,..."primary"===t&&{backgroundColor:a.palette.primary.main,color:a.palette.primary.contrastText,"&:hover":{backgroundColor:a.palette.primary.dark}},..."secondary"===t&&{backgroundColor:a.palette.secondary.main,color:a.palette.secondary.contrastText,"&:hover":{backgroundColor:a.palette.secondary.dark}},..."dark"===t&&{backgroundColor:"#444653",color:"#FFFFFF","&:hover":{backgroundColor:"#363742"}}}})},65380:(e,a,t)=>{t.d(a,{A:()=>o,AuthProvider:()=>d});var r=t(95155),l=t(12115);let n=null,s=async()=>{if(n)return n;console.log("\uD83D\uDD0D Loading Firebase modules dynamically");let[{auth:e},{GithubAuthProvider:a,TwitterAuthProvider:r,GoogleAuthProvider:l,signInWithPopup:s,signInWithEmailAndPassword:i,createUserWithEmailAndPassword:o,sendPasswordResetEmail:d,signOut:c,onAuthStateChanged:u}]=await Promise.all([Promise.all([t.e(9895),t.e(2154),t.e(1398),t.e(1182),t.e(2691)]).then(t.bind(t,68464)),Promise.all([t.e(9895),t.e(1398),t.e(1182)]).then(t.bind(t,33885))]);return n={auth:e,GithubAuthProvider:a,TwitterAuthProvider:r,GoogleAuthProvider:l,signInWithPopup:s,signInWithEmailAndPassword:i,createUserWithEmailAndPassword:o,sendPasswordResetEmail:d,signOut:c,onAuthStateChanged:u}},i=(0,l.createContext)({currentUser:null,login:async()=>(console.warn("Auth not available on server"),null),signup:async()=>(console.warn("Auth not available on server"),null),logout:async()=>{console.warn("Auth not available on server")},resetPassword:async()=>{console.warn("Auth not available on server")},signInWithGoogle:async()=>(console.warn("Auth not available on server"),null),signInWithGitHub:async()=>(console.warn("Auth not available on server"),null),signInWithTwitter:async()=>(console.warn("Auth not available on server"),null),loading:!1});function o(){return(0,l.useContext)(i)}function d(e){let{children:a}=e,[t,n]=(0,l.useState)(null),[o,d]=(0,l.useState)(!0),[c,u]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{let{auth:e,onAuthStateChanged:a}=await s();if(!e){console.warn("Firebase auth not available"),d(!1);return}return u(!0),a(e,e=>{console.log("\uD83D\uDD04 Auth state changed:",{hasUser:!!e,uid:null==e?void 0:e.uid,SSR:!1}),n(e),d(!1)})}catch(e){console.error("Failed to load Firebase modules:",e),d(!1)}})()},[]);let h={currentUser:t,...l.useMemo(()=>{let e=async e=>{let{auth:a,signInWithPopup:t}=await s();return t(a,e).then(e=>e.user).catch(a=>e.credentialFromError(a))};return{login:async(e,a)=>{let{auth:t,signInWithEmailAndPassword:r}=await s();return r(t,e,a)},signup:async(e,a)=>{let{auth:t,createUserWithEmailAndPassword:r}=await s();return r(t,e,a)},logout:async()=>{let{auth:e,signOut:a}=await s();return a(e)},resetPassword:async e=>{let{auth:a,sendPasswordResetEmail:t}=await s();return t(a,e)},signInWithGoogle:async()=>{let{GoogleAuthProvider:a}=await s();return e(new a)},signInWithGitHub:async()=>{let{GithubAuthProvider:a}=await s();return e(new a)},signInWithTwitter:async()=>{let{TwitterAuthProvider:a}=await s();return e(new a)}}},[]),loading:o};return(0,r.jsx)(i.Provider,{value:h,children:a})}},78977:(e,a,t)=>{t.d(a,{default:()=>F});var r=t(95155),l=t(94049),n=t(4474),s=t(25635),i=t(1151),o=t(78470),d=t(50430),c=t(15239),u=t(12537),h=t(42614),x=t(59007),m=t(66065),f=t(12115),g=t(63082),p=t(29767),v=t(51691);function b(e){let{name:a,url:t,logo:n}=e,[i,o]=(0,f.useState)(n),[d,u]=(0,f.useState)(!1);(0,f.useEffect)(()=>{console.log('Resolving logo for data catalog: "'.concat(a,'"'));try{let e=(0,v.sM)(a,n);console.log('Resolved logo for data catalog "'.concat(a,'":'),e),o(e),u(!1)}catch(e){console.error('Error resolving logo for data catalog "'.concat(a,'":'),e),o(void 0)}},[a,n]);let h=i&&i.length>0&&!d;return(0,r.jsxs)(p.A,{elevation:0,sx:{display:"flex",borderRadius:"16px",overflow:"hidden",width:"280px",height:"80px",flexShrink:0,border:"1px solid",borderColor:"grey.200",cursor:t?"pointer":"default",transition:"all 0.2s","&:hover":t?{boxShadow:2,borderColor:"primary.main"}:{}},onClick:()=>{t&&window.open(t,"_blank","noopener,noreferrer")},children:[(0,r.jsx)(l.default,{sx:{flex:1,bgcolor:"rgba(0,0,0,0.03)",p:2,display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,r.jsx)(s.A,{sx:{fontWeight:500,fontSize:"0.9rem",lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",maxHeight:"3.7em",wordBreak:"break-word"},children:a})}),h&&(0,r.jsx)(l.default,{sx:{width:"30%",bgcolor:"white",display:"flex",alignItems:"center",justifyContent:"center",p:1,borderLeft:"1px solid",borderColor:"grey.200"},children:(0,r.jsx)(c.default,{src:i,alt:a,width:50,height:50,style:{objectFit:"contain"},onError:()=>{console.error('Error loading image for data catalog "'.concat(a,'" from path: ').concat(i)),u(!0)},unoptimized:!0})})]})}var y=t(39030),_=t(43055),j=t(30249),w=t(13709),A=t(67909),C=t(65380),k=t(41627),S=t(92114),W=t(75183),I=t(20063);let D=(0,A.default)(()=>Promise.all([t.e(9594),t.e(7213),t.e(9474),t.e(8548),t.e(3423),t.e(2695),t.e(77),t.e(3820),t.e(897)]).then(t.bind(t,20897)),{loadableGenerated:{webpack:()=>[20897]},loading:()=>(0,r.jsx)("div",{children:"Loading variables..."})}),E=(0,A.default)(()=>Promise.all([t.e(7213),t.e(9474),t.e(8548),t.e(3423),t.e(2695),t.e(2619),t.e(77),t.e(3725)]).then(t.bind(t,33725)),{loadableGenerated:{webpack:()=>[33725]},loading:()=>(0,r.jsx)("div",{children:"Loading datasets..."})}),F=(0,f.memo)(e=>{var a,t,p,v,A,F,R,M,P,z,T,O,L,V,B,H,G,N,q,U,J,X,Y,K,Q,Z,$,ee,ea,et,er,el,en,es,ei,eo,ed,ec,eu,eh,ex,em,ef,eg,ep,ev,eb,ey,e_,ej,ew;let{study:eA,isDrawerView:eC=!1,studyDataComplete:ek=!1}=e,[eS,eW]=(0,f.useState)(!1),[eI,eD]=(0,f.useState)(!1),[eE,eF]=(0,f.useState)(!0),[eR,eM]=(0,f.useState)(!1),[eP,ez]=(0,f.useState)(!1),[eT,eO]=(0,f.useState)(null),[eL,eV]=(0,f.useState)(!1),[eB,eH]=(0,f.useState)(null),[eG,eN]=(0,f.useState)(!1),[eq,eU]=(0,f.useState)(null),[eJ,eX]=(0,f.useState)(!1),eY=(0,f.useRef)(null),eK=(0,f.useRef)(null),{currentUser:eQ}=(0,C.A)(),{checkIfResourceSaved:eZ,saveResource:e$,unsaveResource:e0}=(0,k.D)(),{searchSettings:e1,updateSearchSettings:e2}=(0,S.S)(),[e5,e3]=(0,f.useState)(e1.query),[e9,e4]=(0,f.useState)(e1.hybridWeight),[e6,e7]=(0,f.useState)(e1.maxDistance),[e8,ae]=(0,f.useState)(e1.maxDistanceMode),aa=(0,I.useRouter)(),at=(0,I.usePathname)(),[ar,al]=(0,f.useState)(!1);(0,f.useEffect)(()=>{al(!0)},[]);let an=eB?{...eB,child_datasets:eB.child_datasets&&eB.child_datasets.length>0?eB.child_datasets:eA.child_datasets}:eA;(0,f.useEffect)(()=>{eH(null),eU(null),eX(!1),eK.current=null},[null==(a=eA.extra_data)?void 0:a.uuid]);let as=(e,a)=>{let t=e1.selectedFilters,r=t[e]||[],l=r.includes(a)?r:[...r,a];e2({selectedFilters:{...t,[e]:l}}),"/discover"!==at&&aa.push("/discover")},ai=(null==(t=an.dataset_schema)?void 0:t.name)||(null==(p=an.extra_data)?void 0:p.name)||"Untitled Dataset",ao=(null==(v=an.dataset_schema)?void 0:v.description)||(null==(A=an.extra_data)?void 0:A.description)||"",ad=(null==(F=an.extra_data)?void 0:F.ai_summary)||null,ac=ad&&ad.trim().length>0,au=eE&&ac?ad:ao,ah=(null==(R=an.dataset_schema)?void 0:R.image)||an.image||void 0,ax=((null==(M=an.dataset_schema)?void 0:M.keywords)||[]).filter(e=>"string"==typeof e&&!e.includes("<a title=")&&!e.startsWith("<")),am=ax.length>0,af=((null==(P=an.extra_data)?void 0:P.instruments)||[]).length>0,ag=an.num_descendant_variables,ap=!eJ&&(!!(null==(z=an.extra_data)?void 0:z.uuid)||void 0!==ag&&ag>0||(an.variables_which_matched||[]).length>0||((null==(T=an.dataset_schema)?void 0:T.variableMeasured)||[]).length>0||((null==(O=an.dataset_schema)?void 0:O.number_of_variables)||0)>0||((null==(L=an.extra_data)?void 0:L.num_variables)||0)>0||((null==(V=an.extra_data)?void 0:V.number_of_variables)||0)>0),av=[];if((null==(B=an.dataset_schema)?void 0:B.identifier)&&Array.isArray(an.dataset_schema.identifier)){let e=an.dataset_schema.identifier.filter(e=>!!(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("10.")&&e.includes("/"))).map(e=>e.startsWith("10.")&&e.includes("/")?"https://doi.org/".concat(e):e);av.push(...e)}(null==(H=an.dataset_schema)?void 0:H.url)&&Array.isArray(an.dataset_schema.url)&&av.push(...an.dataset_schema.url);let ab=av.length>0;(0,f.useEffect)(()=>{eD(!1)},[null==(G=an.dataset_schema)?void 0:G.name,null==(N=an.extra_data)?void 0:N.name]),(0,f.useEffect)(()=>{eW(!1)},[null==(q=an.dataset_schema)?void 0:q.name,null==(U=an.extra_data)?void 0:U.name]),(0,f.useEffect)(()=>{eY.current&&eY.current.scrollTo({top:0,behavior:"smooth"})},[null==(J=an.extra_data)?void 0:J.uuid]),(0,f.useEffect)(()=>{(async()=>{var e;if(eQ&&(null==(e=an.extra_data)?void 0:e.uuid))try{let e=await eZ(eQ.uid,an.extra_data.uuid);eM(e.isSaved),eO(e.resourceId||null)}catch(e){console.error("Error checking if resource is saved:",e)}})()},[eQ,null==(X=an.extra_data)?void 0:X.uuid,eZ]);let ay=async()=>{eV(!0)};(0,f.useEffect)(()=>{var e;eF(!!((null==(e=an.extra_data)?void 0:e.ai_summary)&&an.extra_data.ai_summary.trim().length>0))},[null==(Y=an.dataset_schema)?void 0:Y.name,null==(K=an.extra_data)?void 0:K.name,null==(Q=an.extra_data)?void 0:Q.ai_summary]),(0,f.useEffect)(()=>{var e,a;let t=!1;if(ek||!(null==an||null==(e=an.extra_data)?void 0:e.uuid))return;let r=an.extra_data.uuid,l={uuid:r,query:e5,hybridWeight:e9,maxDistance:e6,maxDistanceMode:e8},n=eK.current;return n&&n.uuid===r&&n.query===l.query&&n.hybridWeight===l.hybridWeight&&n.maxDistance===l.maxDistance&&n.maxDistanceMode===l.maxDistanceMode&&(null==eB||null==(a=eB.extra_data)?void 0:a.uuid)===r?void console.log("StudyDetail: Skipping duplicate lookup for same UUID and params"):(n&&n.uuid===r||eH(null),eN(!0),(async()=>{try{let e=await (0,W.w3)(r,e5,e9,e6,e8);t||(eH(e),eN(!1),eK.current=l)}catch(e){console.error("Failed to load enhanced study data:",e),t||eN(!1)}})(),()=>{t=!0})},[null==an||null==(Z=an.extra_data)?void 0:Z.uuid,ek,e5,e9,e6,e8,null==eB||null==($=eB.extra_data)?void 0:$.uuid]),(0,f.useEffect)(()=>{let e=setTimeout(()=>{e3(e1.query),e4(e1.hybridWeight),e7(e1.maxDistance),ae(e1.maxDistanceMode)},800);return()=>clearTimeout(e)},[e1.query,e1.hybridWeight,e1.maxDistance,e1.maxDistanceMode]);let{allStudyVariables:a_,matchedCount:aj,totalCount:aw}=(0,f.useMemo)(()=>{var e;let a=an.num_descendant_variables,t=an.variables_which_matched||[],r=(null==(e=an.dataset_schema)?void 0:e.variableMeasured)||[],l=new Map,n=new Map;t.forEach(e=>{let a=e.name;a&&n.set(a,(n.get(a)||0)+1)});let s=(e,a)=>{e.forEach(e=>{let t=e.name;if(!t)return;let r=l.get(t);if(r)a&&!r.matched&&(r.matched=!0,r.variable={...e,matched:!0});else{let r=n.get(t)||1;l.set(t,{variable:{...e,matched:a},matched:a,repeatCount:r})}})};s(t,!0),s(r,!1);let i=Array.from(l.values()).map(e=>{let{variable:a,repeatCount:t}=e;return{...a,repeatCount:t,displayName:t>1?"".concat(a.name," (x").concat(t,")"):a.name}}),o=i.filter(e=>e.matched).length,d=void 0!==a?a:i.length;return{allStudyVariables:i,matchedCount:o,totalCount:d}},[an.variables_which_matched,null==(ee=an.dataset_schema)?void 0:ee.variableMeasured,an.num_descendant_variables]);return(0,r.jsxs)(l.default,{ref:eY,sx:{p:3,width:"100%",height:"100%",overflowY:"auto",flex:1,display:"flex",flexDirection:"column",position:"relative"},children:[eG&&(0,r.jsxs)(l.default,{sx:{position:"absolute",top:8,right:8,zIndex:10,display:"flex",alignItems:"center",gap:.5,p:.5,bgcolor:"background.paper",borderRadius:1,boxShadow:1,border:"1px solid",borderColor:"divider"},children:[(0,r.jsx)(n.A,{size:12}),(0,r.jsx)(s.A,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.6rem",sm:"0.7rem"}},children:"Loading..."})]}),eC&&(0,r.jsx)(l.default,{sx:{display:"flex",justifyContent:"flex-end",mb:2},children:(0,r.jsx)(i.A,{onClick:ay,disabled:eP,sx:{color:"text.secondary","&:hover":{color:"primary.main"}},title:"Save to my resources",children:(0,r.jsx)(u.A,{size:20,fill:"none"})})}),(0,r.jsx)(w.A,{open:eL,onClose:()=>eV(!1),featureName:"Bookmark Study"}),!eC&&(0,r.jsxs)(l.default,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:2,mb:4},children:[(0,r.jsx)(l.default,{sx:{flex:1},children:(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"h4",gutterBottom:!0,sx:{flex:1,mr:1},children:ai}),(0,r.jsx)(i.A,{onClick:ay,disabled:eP,sx:{color:"text.secondary","&:hover":{color:"primary.main"}},title:"Save to my resources",children:(0,r.jsx)(u.A,{size:20,fill:"none"})})]})}),ah&&!eI&&(0,r.jsx)(l.default,{sx:{width:100,height:100,position:"relative",borderRadius:"8px",overflow:"hidden",flexShrink:0},children:(0,r.jsx)(c.default,{src:ah,alt:ai,fill:!0,style:{objectFit:"contain"},onError:()=>eD(!0),unoptimized:!0},ai)})]}),au&&(0,r.jsxs)(l.default,{sx:{mb:4},children:[eS?(0,r.jsx)(_.A,{text:au,paragraphProps:{variant:"body1",sx:{mb:2}},compact:!0}):(0,r.jsx)(s.A,{variant:"body1",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:5,WebkitBoxOrient:"vertical",mb:2},children:au}),ac&&eS&&(0,r.jsx)(l.default,{sx:{mt:2,mb:1},children:(0,r.jsx)(s.A,{variant:"body2",color:"primary",sx:{cursor:"pointer",textDecoration:"underline","&:hover":{textDecoration:"none"}},onClick:()=>eF(!eE),children:eE?"Showing AI summary, click to see original":"Showing original, click to see AI summary"})}),au.length>300&&(0,r.jsxs)(l.default,{onClick:()=>eW(!eS),sx:{display:"flex",alignItems:"center",color:"primary.main",cursor:"pointer",mt:1},children:[(0,r.jsx)(s.A,{variant:"body2",color:"primary",sx:{fontWeight:500,mr:1},children:eS?"Show Less":"Show More"}),eS?(0,r.jsx)(h.A,{size:16}):(0,r.jsx)(x.A,{size:16})]})]}),ap&&(0,r.jsxs)(l.default,{sx:{mb:4},children:[(0,r.jsx)(g.A,{fullWidth:!0,chipVariant:"secondary",sx:{justifyContent:"space-between",py:2,height:"auto"},children:(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(null==(ea=an.extra_data)?void 0:ea.uuid)?null!==eq?"Variables (".concat(eq,")"):"Variables":aj?"Related Variables (".concat(aj," / ").concat(aw,")"):"Variables (".concat(aw,")"),(0,r.jsx)(o.A,{title:"This list is intended as an overview of variables and may not be comprehensive. Metadata is limited to information available from available sources. Always refer to source metadata.",children:(0,r.jsx)(m.A,{size:16,style:{cursor:"help"}})})]})}),(0,r.jsx)(d.A,{in:!0,children:(0,r.jsx)(l.default,{sx:{p:2,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2,mb:2},children:(0,r.jsx)(D,{variables:(null==(et=an.extra_data)?void 0:et.uuid)?void 0:a_,studyName:ai,studyUuid:null==(er=an.extra_data)?void 0:er.uuid,studyAncestors:an.ancestors,query:e5,variablesWhichMatched:an.variables_which_matched,alpha:e9,maxVectorDistance:e6,maxDistanceMode:e1.maxDistanceMode,directMatchWeight:e1.directMatchWeight,onTotalCountChange:eU,onShouldHideTable:eX})})})]}),(0,r.jsxs)(l.default,{sx:{mb:4},children:[(0,r.jsx)(g.A,{fullWidth:!0,chipVariant:"secondary",sx:{justifyContent:"space-between",py:2,height:"auto"},children:"Details"}),(0,r.jsx)(d.A,{in:!0,children:(0,r.jsx)(l.default,{sx:{p:2,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2,mb:2},children:(0,r.jsxs)(l.default,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(null==(en=eA.dataset_schema)||null==(el=en.publisher)?void 0:el[0])&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Publisher:"}),(0,r.jsx)(y.A,{name:eA.dataset_schema.publisher[0].name||"Unknown Publisher",url:null==(es=eA.dataset_schema.publisher[0])?void 0:es.url,logo:null==(ei=eA.dataset_schema.publisher[0])?void 0:ei.logo})]}),((null==(eo=eA.extra_data)?void 0:eo.geographic_coverage)||(null==(ed=eA.extra_data)?void 0:ed.country_codes))&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Geographic Coverage:"}),(0,r.jsx)(s.A,{children:eA.extra_data.geographic_coverage||(null==(ec=eA.extra_data.country_codes)?void 0:ec.join(", "))})]}),((null==(eu=eA.dataset_schema)?void 0:eu.temporalCoverage)||(null==(eh=eA.extra_data)?void 0:eh.start_year)&&(null==(ex=eA.extra_data)?void 0:ex.end_year))&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Temporal Coverage:"}),(0,r.jsx)(s.A,{children:(e=>{if(!e)return"Not specified";if(e.includes("..")){let[a,t]=e.split("..");return t?"".concat(a," - ").concat(t):"".concat(a," - Present (Ongoing)")}return e})((null==(em=eA.dataset_schema)?void 0:em.temporalCoverage)||"".concat(eA.extra_data.start_year,"..").concat(eA.extra_data.end_year))})]}),(null==(ef=eA.extra_data)?void 0:ef.sample_size)&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Sample Size:"}),(0,r.jsx)(s.A,{children:eA.extra_data.sample_size})]}),((null==(eg=eA.extra_data)?void 0:eg.age_lower)||(null==(ep=eA.extra_data)?void 0:ep.age_upper))&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Age Coverage:"}),(0,r.jsx)(s.A,{children:eA.extra_data.age_lower&&eA.extra_data.age_upper?"".concat(eA.extra_data.age_lower," - ").concat(eA.extra_data.age_upper," years"):eA.extra_data.age_lower?"".concat(eA.extra_data.age_lower,"+ years"):"0 - ".concat(eA.extra_data.age_upper," years")})]}),(null==(ev=eA.extra_data)?void 0:ev.resource_type)&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Resource Type:"}),(0,r.jsx)(s.A,{children:eA.extra_data.resource_type})]}),(null==(eb=eA.extra_data)?void 0:eb.study_design)&&eA.extra_data.study_design.length>0&&(0,r.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(s.A,{variant:"subtitle2",children:"Study Design:"}),(0,r.jsx)(s.A,{children:eA.extra_data.study_design.join(", ")})]})]})})})]}),(null==(ey=eA.dataset_schema)?void 0:ey.funder)&&eA.dataset_schema.funder.length>0&&(0,r.jsxs)(l.default,{sx:{mb:4,flexShrink:0},children:[(0,r.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Funders:"}),(0,r.jsx)(l.default,{sx:{display:"flex",overflowX:"auto",gap:2,pb:1,"&::-webkit-scrollbar":{height:6},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.2)",borderRadius:3}},children:eA.dataset_schema.funder.map((e,a)=>(0,r.jsx)(y.A,{name:e.name||"Funding Organization",url:null==e?void 0:e.url,logo:null==e?void 0:e.logo},"".concat(e.name,"-").concat(a)))})]}),(null==(e_=eA.dataset_schema)?void 0:e_.includedInDataCatalog)&&eA.dataset_schema.includedInDataCatalog.length>0&&(0,r.jsxs)(l.default,{sx:{mb:4,flexShrink:0},children:[(0,r.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Available in Data Catalogs:"}),(0,r.jsx)(l.default,{sx:{display:"flex",overflowX:"auto",gap:2,pb:1,"&::-webkit-scrollbar":{height:6},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.2)",borderRadius:3}},children:eA.dataset_schema.includedInDataCatalog.map((e,a)=>(0,r.jsx)(b,{name:e.name||"Data Catalog",url:e.url,logo:e.image},"".concat(e.name,"-").concat(a)))})]}),am&&(0,r.jsxs)(l.default,{sx:{mb:4},children:[(0,r.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Topics:"}),(0,r.jsx)(l.default,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:ax.map((e,a)=>(0,r.jsx)(g.A,{onClick:a=>{a.stopPropagation(),ar&&as("keywords",e)},sx:{cursor:"pointer"},children:e},"topic-".concat(a)))})]}),ab&&(0,r.jsxs)(l.default,{sx:{mb:4,flexShrink:0},children:[(0,r.jsx)(g.A,{fullWidth:!0,chipVariant:"secondary",sx:{justifyContent:"space-between",py:2,height:"auto",mb:2},children:"Related Links & Papers"}),(0,r.jsx)(d.A,{in:!0,children:(0,r.jsx)(l.default,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:2,mb:2,"@media (max-width: 800px)":{gridTemplateColumns:"1fr"}},children:null==av?void 0:av.filter(e=>e&&""!==e.trim()).map((e,a,t)=>{let n=a===t.length-1,s=t.length%2!=0;return(0,r.jsx)(l.default,{sx:{display:"flex",gridColumn:n&&s?"1 / -1":"auto"},children:(0,r.jsx)(j.A,{url:e})},"link-".concat(a))})})})]}),af&&(0,r.jsxs)(l.default,{sx:{mb:2},children:[(0,r.jsxs)(g.A,{fullWidth:!0,chipVariant:"secondary",sx:{justifyContent:"space-between",py:2,height:"auto",mb:2},children:["Instruments (",((null==(ej=eA.extra_data)?void 0:ej.instruments)||[]).length,")"]}),(0,r.jsx)(d.A,{in:!0,children:(0,r.jsx)(l.default,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:((null==(ew=eA.extra_data)?void 0:ew.instruments)||[]).map((e,a)=>(0,r.jsx)(g.A,{onClick:a=>{a.stopPropagation(),ar&&as("instruments",e)},sx:{cursor:"pointer"},children:e},"instrument-".concat(a)))})})]}),Array.isArray(an.child_datasets)&&(an.child_datasets||[]).length>0&&(0,r.jsxs)(l.default,{sx:{mb:4},children:[(0,r.jsxs)(g.A,{fullWidth:!0,chipVariant:"secondary",sx:{justifyContent:"space-between",py:2,height:"auto"},children:["Related Datasets (",(an.child_datasets||[]).length,")"]}),(0,r.jsx)(d.A,{in:!0,children:(0,r.jsx)(l.default,{sx:{p:2,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2,mb:2},children:(0,r.jsx)(E,{datasets:an.child_datasets})})})]})]})})}}]);