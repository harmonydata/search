(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5314],{29755:(e,t,r)=>{Promise.resolve().then(r.bind(r,53134))},39030:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(95155),o=r(29767),l=r(94049),i=r(25635),a=r(15239),s=r(51691),c=r(12115);function d(e){let{name:t,url:r,logo:d,inactive:h,compact:u}=e,[x,f]=(0,c.useState)(d),[p,m]=(0,c.useState)(!1);(0,c.useEffect)(()=>{console.log('Resolving logo for organization: "'.concat(t,'"'));try{let e=(0,s.sM)(t,d);console.log('Resolved logo for organization "'.concat(t,'":'),e),f(e),m(!1)}catch(e){console.error('Error resolving logo for organization "'.concat(t,'":'),e),f(void 0)}},[t,d]);let g=x&&x.length>0&&!p;return(0,n.jsxs)(o.A,{elevation:0,sx:{display:"flex",borderRadius:"16px",overflow:"hidden",width:u?"220px":"280px",height:u?"75px":"85px",flexShrink:0,border:"1px solid",borderColor:"grey.200",cursor:r?"pointer":"default",transition:"all 0.2s",opacity:h?.5:1,"&:hover":r?{boxShadow:2,borderColor:"primary.main"}:{}},onClick:()=>{r&&window.open(r,"_blank","noopener,noreferrer")},children:[(0,n.jsx)(l.default,{sx:{flex:1,bgcolor:"rgba(0,0,0,0.03)",p:2,display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,n.jsx)(i.A,{sx:{fontWeight:500,fontSize:u?"0.8rem":"0.9rem",lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",maxHeight:"3.9em",wordBreak:"break-word",paddingBottom:"1px"},children:t})}),g&&(0,n.jsx)(l.default,{sx:{width:"30%",bgcolor:"white",display:"flex",alignItems:"center",justifyContent:"center",p:1,borderLeft:"1px solid",borderColor:"grey.200"},children:(0,n.jsx)(a.default,{src:x,alt:t,width:u?40:50,height:u?40:50,style:{objectFit:"contain"},onError:()=>{console.error('Error loading image for organization "'.concat(t,'" from path: ').concat(x)),m(!0)},unoptimized:!0})})]})}},53134:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var n=r(95155),o=r(12115),l=r(29767),i=r(84578),a=r(94049),s=r(25635),c=r(4474),d=r(97322),h=r(22003),u=r(33077),x=r(78470),f=r(2300),p=r(26991),m=r(58749),g=r(23508),y=r(86790),j=r(68425),b=r(47734),A=r(73697),v=r(47643),k=r(77568),w=r(75183),C=r(88540),S=r(63082),_=r(39030),E=r(51691);let W=e=>{let{root:t,depth:r,x:o,y:l,width:i,height:a,index:s,payload:c,...d}=e,h=F[s%F.length],u=t.children[s].name||"Unknown";return(0,n.jsx)(O,{root:t,depth:r,x:o,y:l,width:i,height:a,index:s,name:u,color:h})},F=["#8884d8","#82ca9d","#ffc658","#ff7c7c","#8dd1e1","#d084d0","#87d068","#ffb347","#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff"],O=e=>{let{root:t,depth:r,x:o,y:l,width:i,height:a,index:s,name:c,color:d}=e;if(i<30||a<20)return null;let h=c.split(" "),u=[],x=h[0];for(let e=1;e<h.length;e++){let t=h[e];(x.length+t.length+1)*7<i-10?x+=" ".concat(t):(u.push(x),x=t)}u.push(x);let f=11*u.length*1.1;return f>a-10?null:(0,n.jsxs)("g",{children:[(0,n.jsx)("rect",{x:o,y:l,width:i,height:a,style:{fill:d,stroke:"#fff",strokeWidth:2/(r+1e-10),cursor:"pointer"},onClick:()=>{let e="".concat((0,E.xC)(),"?query=").concat(encodeURIComponent(c));window.open(e,"_blank")}}),(0,n.jsx)("text",{x:o+i/2,y:l+(a-f)/2+11,textAnchor:"middle",fill:"#000",fontSize:11,strokeWidth:"0",style:{pointerEvents:"none",fontWeight:"normal"},children:u.map((e,t)=>(0,n.jsx)("tspan",{x:o+i/2,dy:0===t?0:"".concat(1.1,"em"),children:e},t))})]})},z=e=>{let{title:t,value:r,icon:o}=e;return(0,n.jsx)(l.A,{elevation:1,sx:{height:"100%"},children:(0,n.jsxs)(i.A,{sx:{p:3,textAlign:"center"},children:[o&&(0,n.jsx)(a.default,{sx:{mb:2,display:"flex",justifyContent:"center"},children:o}),(0,n.jsx)(s.A,{variant:"h3",component:"div",sx:{mb:1,fontWeight:"bold",color:"primary.main"},children:r.toLocaleString()}),(0,n.jsx)(s.A,{variant:"body2",color:"text.secondary",children:t})]})})},D=e=>{let{filters:t}=e,[r,C]=(0,o.useState)(!0),[F,O]=(0,o.useState)(null),[D,B]=(0,o.useState)(null),[M,q]=(0,o.useState)({}),[I,R]=(0,o.useState)([]),[P,T]=(0,o.useState)(null);if((0,o.useEffect)(()=>{(async()=>{try{C(!0);let[e,r,n]=await Promise.all([(0,w.U4)(t),(0,w.Y3)(t),(0,w.dh)()]),o={};r.aggregations&&Object.entries(r.aggregations).forEach(e=>{let[t,r]=e;if(Array.isArray(r)){let{values:e,frequencies:n,labels:l}=((e,t)=>{let r="sample_size"===t,n=[...e].filter(e=>null!=e&&!isNaN(e));if(0===n.length)return{values:[],frequencies:[],labels:[]};if(r){let e=[1e3,1e4,1e5,1e6,1e7],t=["<1k","<10k","<100k","<1m","<10m"],r=Array(t.length).fill(0);return n.forEach(t=>{for(let n=0;n<e.length;n++)if(t>(0==n?0:e[n-1])&&t<=e[n]){r[n]++;break}}),{values:e,frequencies:r,labels:t}}let o=Math.min(...n),l=Math.max(...n),i=[],a=[];if(t.includes("year")){let e=5*Math.floor(o/5),t=(5*Math.ceil(l/5)-e)/5,r=Array(t).fill(0),s=Array(t).fill(0).map((t,r)=>e+5*r);n.forEach(n=>{let o=Math.floor((n-e)/5);o>=0&&o<t&&r[o]++}),i=s,a=r}else{let e=10;t.includes("age")?e=6:t.includes("duration")&&(e=5);let r=(l-o)/e,s=Array(e).fill(0),c=Array(e+1).fill(0).map((e,t)=>o+t*r);n.forEach(t=>{let n=Math.min(Math.floor((t-o)/r),e-1);s[n]++}),i=c.slice(0,-1).map((e,t)=>e+r/2),a=s}return{values:i,frequencies:a,labels:[]}})(r,t);o[t]={values:e,frequencies:n,labels:l,formatXAxis:e=>((e,t)=>"string"==typeof e?e:t.includes("year")?e.toString():(t.includes("num_")||t.includes("age")||t.includes("duration"),Math.round(e).toString()))(e,t)}}}),B(e),q(o),T(n);try{let e,r=await (0,w.AV)(t);R((e=r.aggregations,Object.entries(e).map(e=>{let[t,r]=e;return{name:t,value:Math.round(1e3*r)}}).filter(e=>e.value>0).sort((e,t)=>t.value-e.value).slice(0,50)))}catch(e){console.warn("Word cloud data fetch failed:",e),R([])}}catch(e){console.error("Error fetching data:",e),O(e instanceof Error?e.message:"Failed to fetch data")}finally{C(!1)}})()},[t]),r)return(0,n.jsx)(a.default,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,n.jsx)(c.A,{})});if(F)return(0,n.jsx)(d.A,{maxWidth:"lg",sx:{mt:4},children:(0,n.jsx)(h.A,{severity:"error",children:F})});let U=(null==D?void 0:D.aggregations)||{},N=U.resource_type||{},H=(N.study||0)+(N.dataset||0),K=U.source||{},L=Object.keys(K).length,V=U.keywords||{},X=Object.keys(V).length,G=N.variable||0,Y=Object.entries(V).map(e=>{let[t,r]=e;return{key:t,doc_count:r}}).sort((e,t)=>t.doc_count-e.doc_count).slice(0,20),J=Object.entries(K).map(e=>{let[t,r]=e;return{key:t,doc_count:r,sourceInfo:(null==P?void 0:P[t])||null}}).sort((e,t)=>t.doc_count-e.doc_count).slice(0,4),Q=Object.entries(U.instruments||{}).map(e=>{let[t,r]=e;return{key:t,doc_count:r}}).sort((e,t)=>t.doc_count-e.doc_count).slice(0,10),Z=Object.entries(U.study_design||{}).map(e=>{let[t,r]=e;return{key:t,doc_count:r}}).sort((e,t)=>t.doc_count-e.doc_count).slice(0,20);return(0,n.jsxs)(a.default,{sx:{width:"100%"},children:[(0,n.jsxs)(u.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,n.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(z,{title:"Studies / Datasets",value:H})}),(0,n.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(z,{title:"Data Sources",value:L})}),(0,n.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(z,{title:"Topics",value:X})}),(0,n.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,n.jsx)(z,{title:"Variables",value:G})})]}),I.length>0&&(0,n.jsx)(l.A,{elevation:1,sx:{mb:4},children:(0,n.jsxs)(i.A,{sx:{p:3},children:[(0,n.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Popular Phrases"}),(0,n.jsx)(a.default,{sx:{height:400,width:"100%"},children:(0,n.jsx)(p.u,{width:"100%",height:"100%",children:(0,n.jsx)(m.V,{data:I,dataKey:"value",nameKey:"name",aspectRatio:4/3,stroke:"#fff",content:W,children:(0,n.jsx)(g.m,{content:e=>{let{active:t,payload:r}=e;if(t&&r&&r.length){let e=r[0].payload;return(0,n.jsxs)(a.default,{sx:{bgcolor:"background.paper",p:2,borderRadius:1,boxShadow:2,border:1,borderColor:"divider"},children:[(0,n.jsx)(s.A,{variant:"body2",sx:{fontWeight:"bold"},children:e.name}),(0,n.jsxs)(s.A,{variant:"body2",color:"text.secondary",children:["Frequency: ",(e.value/1e3).toFixed(3)]}),(0,n.jsx)(s.A,{variant:"caption",color:"text.secondary",children:"Click to search"})]})}return null}})})})})]})}),(0,n.jsxs)(u.Ay,{container:!0,spacing:3,sx:{mb:4},children:[Y.length>0&&(0,n.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,n.jsx)(l.A,{elevation:1,sx:{height:"100%"},children:(0,n.jsxs)(i.A,{sx:{p:3},children:[(0,n.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Popular Topics"}),(0,n.jsx)(a.default,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Y.map((e,t)=>(0,n.jsx)(x.A,{title:'Click to search for "'.concat(e.key,'"'),children:(0,n.jsx)("span",{children:(0,n.jsx)(S.A,{sx:{cursor:"pointer"},onClick:()=>{let t="".concat((0,E.xC)(),"?topics=").concat(encodeURIComponent(e.key));window.open(t,"_blank")},children:e.key})})},"keyword-tooltip-".concat(t)))})]})})}),J.length>0&&(0,n.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,n.jsx)(l.A,{elevation:1,sx:{height:"100%"},children:(0,n.jsxs)(i.A,{sx:{p:3},children:[(0,n.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Popular Data Sources"}),(0,n.jsx)(u.Ay,{container:!0,spacing:2,children:J.map((e,t)=>{var r,o,l;return(0,n.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,n.jsx)(_.A,{name:(null==(r=e.sourceInfo)?void 0:r.name)||e.key,url:null==(o=e.sourceInfo)?void 0:o.url,logo:null==(l=e.sourceInfo)?void 0:l.logo,compact:!1})},"source-".concat(t))})})]})})})]}),(0,n.jsxs)(u.Ay,{container:!0,spacing:3,sx:{mb:4},children:[Q.length>0&&(0,n.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,n.jsx)(l.A,{elevation:1,sx:{height:"100%"},children:(0,n.jsxs)(i.A,{sx:{p:3},children:[(0,n.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Popular Instruments"}),(0,n.jsx)(a.default,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Q.map((e,t)=>(0,n.jsx)(x.A,{title:'Click to search for "'.concat(e.key,'"'),children:(0,n.jsx)("span",{children:(0,n.jsx)(S.A,{sx:{cursor:"pointer"},onClick:()=>{let t="".concat((0,E.xC)(),"?instruments=").concat(encodeURIComponent(e.key));window.open(t,"_blank")},children:e.key})})},"instrument-tooltip-".concat(t)))})]})})}),Z.length>0&&(0,n.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,n.jsx)(l.A,{elevation:1,sx:{height:"100%"},children:(0,n.jsxs)(i.A,{sx:{p:3},children:[(0,n.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Popular Study Designs"}),(0,n.jsx)(a.default,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Z.map((e,t)=>(0,n.jsx)(x.A,{title:'Click to search for "'.concat(e.key,'"'),children:(0,n.jsx)("span",{children:(0,n.jsx)(S.A,{sx:{cursor:"pointer"},onClick:()=>{let t="".concat((0,E.xC)(),"?study_design=").concat(encodeURIComponent(e.key));window.open(t,"_blank")},children:e.key})})},"design-tooltip-".concat(t)))})]})})})]}),M&&Object.entries(M).length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{variant:"h5",component:"h2",gutterBottom:!0,sx:{mb:3,fontWeight:"bold"},children:"Distribution Analysis"}),(0,n.jsx)(u.Ay,{container:!0,spacing:3,sx:{mb:4},children:Object.entries(M).filter(e=>{let[t,r]=e;return r.values.length>0}).map(e=>{let[t,r]=e,o=r.values.map((e,t)=>({value:e,frequency:r.frequencies[t],name:r.labels&&r.labels.length?r.labels[t]:r.formatXAxis?r.formatXAxis(e):e.toString()}));return console.log("Chart data for ",t,":",o),(0,n.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,n.jsxs)(f.A,{sx:{p:3,width:"100%"},children:[(0,n.jsxs)(s.A,{variant:"h6",gutterBottom:!0,children:[t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())," ","Distribution (",o.reduce((e,t)=>e+t.frequency,0)," ","datasets)"]}),(0,n.jsx)(a.default,{sx:{width:"100%",minHeight:250},children:(0,n.jsx)(p.u,{width:"100%",aspect:2,children:(0,n.jsxs)(y.b,{data:o,margin:{top:20,right:30,left:20,bottom:5},children:[(0,n.jsx)(j.d,{strokeDasharray:"3 3"}),(0,n.jsx)(b.W,{dataKey:"value",tick:{fontSize:12},interval:"preserveStartEnd",type:"number",domain:[o[0].value,o[o.length-1].value],allowDecimals:!1,scale:"sample_size"!==t?"linear":"log",tickFormatter:e=>{let t=o.find(t=>t.value===e);return t?t.name:e.toString()}}),(0,n.jsx)(A.h,{tick:{fontSize:12},label:{value:"Frequency",angle:-90,position:"insideLeft",style:{fontSize:12}}}),(0,n.jsx)(g.m,{}),(0,n.jsx)(v.N,{type:"monotone",dataKey:"frequency",stroke:"#8884d8",strokeWidth:2,dot:!1,activeDot:{r:8}}),(0,n.jsx)(k.G,{type:"monotone",dataKey:"frequency",fill:"#8884d8",fillOpacity:.1})]})})})]})},t)})})]})]})};function B(){let[e,t]=(0,o.useState)({}),[r,l]=(0,o.useState)([]),i=function(e,t){let[r,n]=(0,o.useState)(e);return(0,o.useEffect)(()=>{let t=setTimeout(()=>{n(e)},500);return()=>{clearTimeout(t)}},[e,500]),r}(e,500);(0,o.useEffect)(()=>{(async()=>{try{let e=await (0,w.Dd)();l(e)}catch(e){console.error("Error fetching filters:",e)}})()},[]);let c=(0,o.useCallback)((e,r)=>{t(t=>({...t,[e]:r}))},[]);return(0,n.jsxs)(d.A,{maxWidth:!1,sx:{mt:4,width:"100%",px:{xs:0,sm:2}},children:[(0,n.jsx)(a.default,{sx:{mb:4},children:(0,n.jsx)(C.A,{filtersData:r,onSelectionChange:c,selectedFilters:e})}),(0,n.jsx)(s.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{mb:4,fontWeight:"bold"},children:"Meta Data Explorer"}),(0,n.jsx)(D,{filters:i})]})}},63082:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(70690);let o=(0,r(48116).Ay)(n.A,{shouldForwardProp:e=>"chipVariant"!==e})(e=>{let{theme:t,chipVariant:r="primary",onClick:n=()=>{}}=e;return{onClick:n,borderRadius:8,textTransform:"none",padding:"0 16px",height:32,minHeight:32,fontSize:"0.875rem",fontWeight:500,whiteSpace:"nowrap",lineHeight:1,..."primary"===r&&{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,"&:hover":{backgroundColor:t.palette.primary.dark}},..."secondary"===r&&{backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText,"&:hover":{backgroundColor:t.palette.secondary.dark}},..."dark"===r&&{backgroundColor:"#444653",color:"#FFFFFF","&:hover":{backgroundColor:"#363742"}}}})}},e=>{e.O(0,[9692,1828,690,7213,9474,7133,8548,3423,4456,6011,4657,5183,5738,8540,8441,1255,7358],()=>e(e.s=29755)),_N_E=e.O()}]);