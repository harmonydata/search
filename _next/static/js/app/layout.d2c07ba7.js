(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{13673:()=>{},20190:(e,t,o)=>{"use strict";o.d(t,{default:()=>B});var n=o(95155),i=o(12115),r=o(94049),s=o(73707),a=o(49501),l=o(25635),c=o(23820),d=o(52619),h=o.n(d),x=o(15239),m=o(88822),p=o(45444),f=o(51691),g=o(20063),u=o(78470),v=o(73741),y=o(53756),C=o(86973),j=o(21067),F=o(65380),w=o(6441),A=o(28121),b=o(65288),S=o(4220),z=o(55426),E=o(34384),I=o(13709);let _=["My Harmony","Logout"],k={"My Harmony":(0,n.jsx)(w.A,{}),Logout:(0,n.jsx)(A.A,{})},H=[{text:"Search",icon:(0,f.xC)()+"icons/discover.svg",activeIcon:(0,f.xC)()+"icons/discover-active.svg",href:"/"},{text:"Browse",icon:"",activeIcon:"",href:"/studies"},{text:"Explore",icon:(0,f.xC)()+"icons/explore.svg",activeIcon:(0,f.xC)()+"icons/explore-active.svg",href:"/explore"},{text:"Compare",icon:(0,f.xC)()+"icons/compare.svg",activeIcon:(0,f.xC)()+"icons/compare-active.svg",href:"/compare"},{text:"Saves",icon:(0,f.xC)()+"icons/saves.svg",activeIcon:(0,f.xC)()+"icons/saves-active.svg",href:"/saves"}];function P(e){var t;let{isMobile:o=!1}=e,[r,s]=(0,i.useState)(null),[a,c]=(0,i.useState)(!1),[d,p]=(0,i.useState)(""),[w,A]=(0,i.useState)(H),P=(0,g.usePathname)(),{currentUser:W,logout:B,signInWithGoogle:M,signInWithGitHub:T,signInWithTwitter:G}=(0,F.A)();i.useEffect(()=>{A([...H,{text:"Harmonise",icon:(0,f.xC)()+"icons/harmonise.svg",activeIcon:(0,f.xC)()+"icons/harmonise-active.svg",href:"".concat((0,E.C4)()).concat((0,E.ud)())}])},[]);let O=()=>{s(null)},R=async e=>{try{await e(),O()}catch(e){console.error("Sign in error:",e)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.A,{title:"My Harmony",children:(0,n.jsx)(v.A,{src:(null==W?void 0:W.photoURL)||void 0,imgProps:{referrerPolicy:"no-referrer"},onClick:e=>{s(e.currentTarget)},sx:{display:"flex",cursor:"pointer",width:o?40:48,height:o?40:48},children:W&&!W.photoURL&&(null==(t=W.email)?void 0:t.substring(0,1).toUpperCase())},W&&W.uid||"anonUser")}),(0,n.jsxs)(y.A,{sx:{mt:o?"45px":"-8px",maxWidth:"50%","& .MuiPaper-root":{transform:o?"none":"translateY(-100%)"}},id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:o?"bottom":"top",horizontal:"right"},transformOrigin:{vertical:o?"top":"bottom",horizontal:"right"},open:!!r,onClose:O,children:[o&&w.map(e=>{let t=e.href.startsWith("http"),o=!t&&P===e.href;return(0,n.jsxs)(C.A,{component:t?"a":h(),href:e.href,onClick:t=>{["Browse","Explore","Compare","Saves"].includes(e.text)&&(t.preventDefault(),p(e.text),c(!0),O()),["Browse","Explore","Compare","Saves"].includes(e.text)||O()},sx:{color:o?"primary.main":"inherit",bgcolor:o?"action.selected":"inherit"},children:["Browse"===e.text?(0,n.jsx)(m.A,{size:20,color:o?"#2E5FFF":"#444653"}):(0,n.jsx)(x.default,{src:o?e.activeIcon:e.icon,alt:"".concat(e.text," icon"),width:20,height:20}),(0,n.jsx)(l.A,{textAlign:"center",sx:{pl:1},children:e.text})]},e.text)}),o&&(0,n.jsx)(j.A,{}),_.map(e=>(0,n.jsxs)(C.A,{onClick:()=>{"Logout"===e&&(O(),console.log("logging out"),B())},disabled:!W,children:[k[e],(0,n.jsx)(l.A,{textAlign:"center",sx:{pl:1},children:e})]},e)),!W&&[(0,n.jsx)(j.A,{},"oauthSigninDiv"),(0,n.jsx)(l.A,{sx:{margin:"0 0.5rem",textAlign:"center",p:1},children:"Signing in with one of the OAuth providers below allows you access to My Harmony where you can save and share your harmonisations."},"oauthSigninText")],!W&&(0,n.jsxs)(C.A,{onClick:()=>R(M),children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(l.A,{textAlign:"center",sx:{pl:1},children:"Sign in with Google"})]},"SSOGoogle"),!W&&(0,n.jsxs)(C.A,{onClick:()=>R(T),children:[(0,n.jsx)(S.A,{}),(0,n.jsx)(l.A,{textAlign:"center",sx:{pl:1},children:"Sign in with GitHub"})]},"SSOGithub"),!W&&(0,n.jsxs)(C.A,{onClick:()=>R(G),children:[(0,n.jsx)(z.A,{}),(0,n.jsx)(l.A,{textAlign:"center",sx:{pl:1},children:"Sign in with Twitter"})]},"SSOTwitter")]}),(0,n.jsx)(I.A,{open:a,onClose:()=>c(!1),featureName:d})]})}let W=[{text:"Search",icon:(0,f.xC)()+"icons/discover.svg",activeIcon:(0,f.xC)()+"icons/discover-active.svg",href:"/"},{text:"Browse",icon:"",activeIcon:"",href:"/studies"},{text:"Explore",icon:(0,f.xC)()+"icons/explore.svg",activeIcon:(0,f.xC)()+"icons/explore-active.svg",href:"/explore"},{text:"Compare",icon:(0,f.xC)()+"icons/compare.svg",activeIcon:(0,f.xC)()+"icons/compare-active.svg",href:"/compare"},{text:"Saves",icon:(0,f.xC)()+"icons/saves.svg",activeIcon:(0,f.xC)()+"icons/saves-active.svg",href:"/saves"}];function B(){let e=(0,g.usePathname)(),{isAdmin:t}=(0,F.A)(),[o,d]=(0,i.useState)(W),[u,v]=(0,i.useState)(!1),[y,C]=(0,i.useState)(""),j=(e,t)=>{["Browse","Explore","Compare","Saves"].includes(t.text)&&(e.preventDefault(),C(t.text),v(!0))};return(0,i.useEffect)(()=>{let e=[...W],o={text:"Harmonise",icon:(0,f.xC)()+"icons/harmonise.svg",activeIcon:(0,f.xC)()+"icons/harmonise-active.svg",href:"".concat((0,E.C4)()).concat((0,E.ud)())};e.push(o),t&&e.push({text:"Admin",icon:"",activeIcon:"",href:"/admin"}),d(e)},[t]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.default,{component:"nav",sx:{width:"100%",height:64,position:"fixed",top:0,left:0,bgcolor:"#FAF8FF",borderBottom:"1px solid",borderColor:"grey.200",zIndex:1200,display:"flex",alignItems:"center",justifyContent:"center",gap:2,px:2,"@media (min-width: 900px)":{display:"none"}},children:[(0,n.jsx)(r.default,{sx:{position:"absolute",left:2,display:"flex",alignItems:"center"},children:(0,n.jsx)("a",{href:"https://harmonydata.ac.uk",target:"harmonyHome",children:(0,n.jsx)(x.default,{src:(0,f.xC)()+"harmony.png",alt:"Harmony Logo",width:40,height:40,priority:!0,style:{objectFit:"contain"}})})}),(0,n.jsx)(r.default,{sx:{display:{xs:"none",sm:"flex"},gap:2},children:o.map(t=>{let o=t.href.startsWith("http"),i=o?"a":h(),r={href:t.href};return(0,n.jsxs)(s.A,{component:i,...r,onClick:e=>j(e,t),selected:!o&&e===t.href,sx:{flexDirection:"column",minWidth:48,minHeight:48,px:1,py:.5,borderRadius:2,color:o||e!==t.href?"#444653":"primary.main",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:o||e!==t.href?"inherit":"action.selected","&.Mui-selected":{bgcolor:"action.selected"}},children:[(0,n.jsx)(a.A,{sx:{minWidth:0,color:"inherit",position:"relative",mb:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:"Browse"===t.text?(0,n.jsx)(m.A,{size:16,color:o||e!==t.href?"#444653":"#2E5FFF",style:{position:"relative",zIndex:1}}):"Admin"===t.text?(0,n.jsx)(p.A,{size:16,color:o||e!==t.href?"#444653":"#2E5FFF",style:{position:"relative",zIndex:1}}):(0,n.jsx)(x.default,{src:o||e!==t.href?t.icon:t.activeIcon,alt:"".concat(t.text," icon"),width:16,height:16,style:{position:"relative",zIndex:1}})}),(0,n.jsx)(l.A,{variant:"caption",sx:{color:"#444653",fontSize:"10px",fontWeight:500,textAlign:"center"},children:t.text})]},t.text)})}),(0,n.jsx)(r.default,{sx:{position:"absolute",right:2,display:"flex",alignItems:"center"},children:(0,n.jsx)(P,{isMobile:!0})})]}),(0,n.jsxs)(r.default,{component:"nav",sx:{width:72,borderRight:"1px solid",borderColor:"grey.200",height:"100vh",position:"fixed",left:0,top:0,bgcolor:"#FAF8FF",overflow:"hidden","@media (max-width: 899px)":{display:"none"}},children:[(0,n.jsx)(r.default,{sx:{p:1,pt:3,display:"flex",justifyContent:"center"},children:(0,n.jsx)("a",{href:"https://harmonydata.ac.uk",target:"harmonyHome",children:(0,n.jsx)(x.default,{src:(0,f.xC)()+"harmony.png",alt:"Harmony Logo",width:64,height:64,priority:!0,style:{objectFit:"contain"}})})}),(0,n.jsx)(r.default,{sx:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%"},children:o.map(t=>{let o=t.href.startsWith("http"),i=o?"a":h(),r={href:t.href};return(0,n.jsx)(c.Ay,{disablePadding:!0,children:(0,n.jsxs)(s.A,{component:i,...r,onClick:e=>j(e,t),selected:!o&&e===t.href,sx:{minHeight:48,justifyContent:"center",px:2.5,flexDirection:"column",color:o||e!==t.href?"#444653":"primary.main","&.Mui-selected":{bgcolor:"action.selected"}},children:[(0,n.jsx)(a.A,{sx:{minWidth:0,color:"inherit",position:"relative",width:"100%",display:"flex",justifyContent:"center"},children:"Browse"===t.text?(0,n.jsx)(m.A,{size:20,color:o||e!==t.href?"#444653":"#2E5FFF",style:{position:"relative",zIndex:1}}):"Admin"===t.text?(0,n.jsx)(p.A,{size:20,color:o||e!==t.href?"#444653":"#2E5FFF",style:{position:"relative",zIndex:1}}):(0,n.jsx)(x.default,{src:o||e!==t.href?t.icon:t.activeIcon,alt:"".concat(t.text," icon"),width:20,height:20,style:{position:"relative",zIndex:1}})}),(0,n.jsx)(l.A,{variant:"caption",sx:{color:"#444653",fontSize:"12px",fontWeight:500,textAlign:"center"},children:t.text})]})},t.text)})}),(0,n.jsx)(r.default,{sx:{position:"absolute",bottom:16,left:"50%",transform:"translateX(-50%)",display:"flex",justifyContent:"center"},children:(0,n.jsx)(P,{isMobile:!1})})]}),(0,n.jsx)(I.A,{open:u,onClose:()=>v(!1),featureName:y})]})}},34384:(e,t,o)=>{"use strict";o.d(t,{C4:()=>n,F_:()=>r,ud:()=>i});let n=()=>"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:3000":window.location.origin,i=()=>("localhost"===window.location.hostname||window.location.hostname,"/app/"),r=e=>"".concat(n()).concat(i(),"#/model/").concat(e)},35531:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(12115);let i=e=>"undefined"!=typeof document&&!!document.cookie.split("; ").find(t=>t.startsWith("".concat(e,"=")));function r(){let[e,t]=(0,n.useState)(!1),[o,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let n=i("harmonyCookieConsent");if(t(n),"function"==typeof window.gtag&&!o){let e=window.gtag;n?(e("config","G-S79J6E39ZP",{anonymize_ip:!1,allow_google_signals:!0,allow_ad_personalization_signals:!0}),console.log("GA enabled - full tracking mode (consent granted)")):(e("config","G-S79J6E39ZP",{anonymize_ip:!0,allow_google_signals:!1,allow_ad_personalization_signals:!1}),console.log("GA enabled - anonymized mode (no consent)")),r(!0)}let s=0,a=setInterval(()=>{s++;let o=i("harmonyCookieConsent");if(o!==e&&(t(o),"function"==typeof window.gtag)){let e=window.gtag;o?(e("config","G-S79J6E39ZP",{anonymize_ip:!1,allow_google_signals:!0,allow_ad_personalization_signals:!0}),console.log("GA updated - switched to full tracking mode")):(e("config","G-S79J6E39ZP",{anonymize_ip:!0,allow_google_signals:!1,allow_ad_personalization_signals:!1}),console.log("GA updated - switched to anonymized mode"))}s>=15&&clearInterval(a)},2e3);return()=>{clearInterval(a)}},[e,o]),null}},40783:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(95155),i=o(12115),r=o(68321);function s(){let[e,t]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let e=()=>{let e="undefined"!=typeof document&&!!document.cookie.split("; ").find(e=>e.startsWith("".concat("harmonyCookieConsent","=")));t(e),e&&console.log("Hotjar enabled - consent cookie found")};e();let o=0,n=setInterval(()=>{if(o++,e(),o>=15){clearInterval(n);let t=setInterval(()=>{e()},1e4);setTimeout(()=>{clearInterval(t)},3e5)}},2e3);return()=>{clearInterval(n)}},[]),e)?(0,n.jsx)(r.default,{id:"hotjar",strategy:"afterInteractive",children:'\n        (function (h, o, t, j, a, r) {\n          h.hj =\n            h.hj ||\n            function () {\n              (h.hj.q = h.hj.q || []).push(arguments);\n            };\n          h._hjSettings = { hjid: 3792735, hjsv: 6 };\n          a = o.getElementsByTagName("head")[0];\n          r = o.createElement("script");\n          r.async = 1;\n          r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;\n          a.appendChild(r);\n        })(window, document, "https://static.hotjar.com/c/hotjar-", ".js?sv=");\n      '}):null}},52332:(e,t,o)=>{"use strict";o.d(t,{default:()=>d});var n=o(95155),i=o(18436),r=o(84563),s=o(27915),a=o(43920),l=o.n(a);let c=(0,o(29197).A)({palette:{primary:{main:"#2E5FFF",light:"#5B82FF",dark:"#2048CC",contrastText:"#FFFFFF"},secondary:{main:"#27EDB9",light:"#52F1C7",dark:"#1BA581",contrastText:"#004735"},neutral:{main:"#444653",contrastText:"#FFFFFF"},grey:{50:"#F5F5F5",100:"#EEEEEE",200:"#E0E0E0",300:"#CCCCCC",400:"#AAAAAA",500:"#9E9E9E",600:"#757685",700:"#616161",800:"#424242",900:"#212121"},background:{default:"#FFFFFF",paper:"#FFFFFF"},text:{primary:"#1A1A1A",secondary:"#4A4A4A"},action:{active:"#444653"}},typography:{fontFamily:l().style.fontFamily,h1:{fontSize:"1.5rem",fontWeight:600,lineHeight:1.2,"@media (min-width:600px)":{fontSize:"2rem"}},h2:{fontSize:"1.25rem",fontWeight:600,lineHeight:1.3,"@media (min-width:600px)":{fontSize:"1.5rem"}},h3:{fontSize:"1.125rem",fontWeight:600,lineHeight:1.3,"@media (min-width:600px)":{fontSize:"1.25rem"}},h4:{fontSize:"1rem",fontWeight:600,lineHeight:1.3,"@media (min-width:600px)":{fontSize:"1.125rem"}},h5:{fontSize:"0.875rem",fontWeight:600,lineHeight:1.3,"@media (min-width:600px)":{fontSize:"1rem"}},h6:{fontSize:"0.8rem",fontWeight:600,lineHeight:1.3,"@media (min-width:600px)":{fontSize:"0.875rem"}},subtitle1:{fontSize:"0.875rem",fontWeight:500,lineHeight:1.43,"@media (min-width:600px)":{fontSize:"1rem"}},subtitle2:{fontSize:"0.75rem",fontWeight:500,lineHeight:1.43,"@media (min-width:600px)":{fontSize:"0.875rem"}},body1:{fontSize:"0.875rem",lineHeight:1.5,"@media (min-width:600px)":{fontSize:"1rem"}},body2:{fontSize:"0.75rem",lineHeight:1.43,"@media (min-width:600px)":{fontSize:"0.875rem"}},button:{textTransform:"none",fontWeight:500,fontSize:"0.875rem","@media (min-width:600px)":{fontSize:"0.875rem"}},caption:{fontSize:"0.7rem",lineHeight:1.43,"@media (min-width:600px)":{fontSize:"0.75rem"}},overline:{fontSize:"0.65rem",fontWeight:500,lineHeight:1.43,textTransform:"uppercase","@media (min-width:600px)":{fontSize:"0.7rem"}}},shape:{borderRadius:8},components:{MuiButton:{styleOverrides:{root:{borderRadius:20,textTransform:"none",padding:"6px 16px","&.MuiButton-containedInherit":{backgroundColor:"#444653",color:"#FFFFFF","&:hover":{backgroundColor:"#363742"}}},containedPrimary:{backgroundColor:"#2E5FFF",color:"#FFFFFF","&:hover":{backgroundColor:"#2048CC"}},containedSecondary:{backgroundColor:"#27EDB9",color:"#004735","&:hover":{backgroundColor:"#1BA581"}}}},MuiChip:{styleOverrides:{root:{borderRadius:20,height:40,"& .MuiChip-label":{padding:"10px 16px 10px 16px",fontWeight:500}},outlined:{borderColor:"#757685",color:"#003BC4","& .MuiChip-label":{color:"#003BC4"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{backgroundColor:"#F5F5F5",borderRadius:20,"& fieldset":{borderColor:"transparent"},"&:hover fieldset":{borderColor:"#E0E0E0"},"&.Mui-focused fieldset":{borderColor:"#2E5FFF"}}}}}}});function d(e){let{children:t}=e;return(0,n.jsx)(s.A,{options:{key:"mui"},children:(0,n.jsxs)(i.A,{theme:c,children:[(0,n.jsx)(r.Ay,{}),t]})})}},65283:(e,t,o)=>{Promise.resolve().then(o.bind(o,94049)),Promise.resolve().then(o.t.bind(o,41402,23)),Promise.resolve().then(o.bind(o,74744)),Promise.resolve().then(o.t.bind(o,33262,23)),Promise.resolve().then(o.t.bind(o,13673,23)),Promise.resolve().then(o.bind(o,35531)),Promise.resolve().then(o.bind(o,40783)),Promise.resolve().then(o.bind(o,20190)),Promise.resolve().then(o.bind(o,52332)),Promise.resolve().then(o.bind(o,65380)),Promise.resolve().then(o.bind(o,41627)),Promise.resolve().then(o.bind(o,92114))}},e=>{e.O(0,[8963,9692,4616,690,5239,7213,7133,9829,2619,3820,701,5738,5714,8441,1255,7358],()=>e(e.s=65283)),_N_E=e.O()}]);