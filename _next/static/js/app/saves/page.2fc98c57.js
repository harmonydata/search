(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9079],{70460:(e,t,r)=>{Promise.resolve().then(r.bind(r,48147))},30555:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,K:()=>n});var a=r(81045),o=r(37157);function n(e){return(0,o.Ay)("MuiDivider",e)}let i=(0,a.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])},93857:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,f:()=>n});var a=r(81045),o=r(37157);function n(e){return(0,o.Ay)("MuiListItemIcon",e)}let i=(0,a.A)("MuiListItemIcon",["root","alignItemsFlexStart"])},28005:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,b:()=>n});var a=r(81045),o=r(37157);function n(e){return(0,o.Ay)("MuiListItemText",e)}let i=(0,a.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},91888:(e,t,r)=>{"use strict";r.d(t,{A:()=>C});var a=r(12115),o=r(43463),n=r(7123),i=r(39793),s=r(37306),l=r(89142),c=r(98330),d=r(12567),u=r(72762),h=r(89679),x=r(59396),p=r(59328),m=r(30555),v=r(93857),y=r(28005),g=r(81045),b=r(37157);function A(e){return(0,b.Ay)("MuiMenuItem",e)}let j=(0,g.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var f=r(95155);let w=e=>{let{disabled:t,dense:r,divider:a,disableGutters:o,selected:i,classes:s}=e,l=(0,n.A)({root:["root",r&&"dense",t&&"disabled",!o&&"gutters",a&&"divider",i&&"selected"]},A,s);return{...s,...l}},k=(0,l.Ay)(h.A,{shouldForwardProp:e=>(0,s.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]}})((0,c.A)(e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(j.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,i.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(j.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,i.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(j.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,i.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,i.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(j.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(j.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(m.A.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(m.A.inset)]:{marginLeft:52},["& .".concat(y.A.root)]:{marginTop:0,marginBottom:0},["& .".concat(y.A.inset)]:{paddingLeft:36},["& .".concat(v.A.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,["& .".concat(v.A.root," svg")]:{fontSize:"1.25rem"}}}]}})),C=a.forwardRef(function(e,t){let r;let n=(0,d.b)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:l=!1,divider:c=!1,disableGutters:h=!1,focusVisibleClassName:m,role:v="menuitem",tabIndex:y,className:g,...b}=n,A=a.useContext(u.A),j=a.useMemo(()=>({dense:l||A.dense||!1,disableGutters:h}),[A.dense,l,h]),C=a.useRef(null);(0,x.A)(()=>{i&&C.current&&C.current.focus()},[i]);let z={...n,dense:j.dense,divider:c,disableGutters:h},I=w(n),S=(0,p.A)(C,t);return n.disabled||(r=void 0!==y?y:-1),(0,f.jsx)(u.A.Provider,{value:j,children:(0,f.jsx)(k,{ref:S,role:v,tabIndex:r,component:s,focusVisibleClassName:(0,o.A)(I.focusVisible,m),className:(0,o.A)(I.root,g),...b,ownerState:z,classes:I})})})},48147:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var a=r(95155),o=r(12115),n=r(35761),i=r(55295),s=r(68998),l=r(9561),c=r(64665),d=r(96854),u=r(10897),h=r(35417),x=r(70152),p=r(70503),m=r(22678),v=r(90507),y=r(90847),g=r(91888),b=r(90662),A=r(28222),j=r(49234),f=r(65330),w=r(72926),k=r(22282),C=r(42479),z=r(32645),I=r(20687),S=r(14057);let D=(0,S.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),M=(0,S.A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),L=(0,S.A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),_=(0,S.A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var F=r(17146),O=r(63612),H=r(76046),P=r(98245),T=r(54615),B=r(73179),E=r(44766),W=r(3485),R=r(5565);let N=e=>{let t=e.variablesCount||0,r=t>0?Array(t).fill({name:"Variable"}):[];return{extra_data:{uuid:e.uuid,slug:e.slug,resource_type:e.resourceType,name:e.title,description:e.description,keywords:e.keywords||[],number_of_variables:t},dataset_schema:{name:e.title,description:e.description,keywords:e.keywords||[],number_of_variables:t,variableMeasured:r,includedInDataCatalog:e.hasDataAvailable?[{}]:[]},child_datasets:Array(e.datasetsCount||0).fill({}),hasFreeAccess:e.hasFreeAccess||!1,hasCohortsAvailable:e.hasCohortsAvailable||!1,thumbnail:e.image}};function V(){let{currentUser:e}=(0,F.A)(),{loadSearchFromSaved:t}=(0,O.S)(),r=(0,H.useRouter)(),S=(0,n.A)(),V=(0,i.A)(S.breakpoints.down("sm")),[q,U]=(0,o.useState)([]),[G,X]=(0,o.useState)([]),[K,Y]=(0,o.useState)([]),[Z,J]=(0,o.useState)([]),[Q,$]=(0,o.useState)(!0),[ee,et]=(0,o.useState)(null),[er,ea]=(0,o.useState)(""),[eo,en]=(0,o.useState)("all"),ei=async()=>{if(e)try{let t=(0,T.query)((0,T.collection)(B.db,"harmonisations"),(0,T.where)("uid","==",e.uid),(0,T.orderBy)("created","desc"),(0,T.limit)(50)),r=await (0,T.getDocs)(t),a=[];r.forEach(e=>{a.push({id:e.id,...e.data()})}),U(a)}catch(e){console.error("Error loading harmonizations:",e),et("Failed to load harmonizations")}},es=async()=>{try{let e=(0,T.query)((0,T.collection)(B.db,"harmonisations"),(0,T.where)("public","==",!0),(0,T.orderBy)("lastAccessed","desc"),(0,T.limit)(10)),t=await (0,T.getDocs)(e),r=[];t.forEach(e=>{r.push({id:e.id,...e.data()})}),X(r)}catch(e){console.error("Error loading recent public harmonizations:",e)}},el=async()=>{if(e)try{let t=(0,T.query)((0,T.collection)(B.db,"saved_searches"),(0,T.where)("uid","==",e.uid),(0,T.orderBy)("created","desc"),(0,T.limit)(50)),r=await (0,T.getDocs)(t),a=[];r.forEach(e=>{a.push({id:e.id,...e.data()})}),Y(a)}catch(e){console.error("Error loading saved searches:",e)}},ec=async()=>{if(e)try{let t=(0,T.query)((0,T.collection)(B.db,"saved_resources"),(0,T.where)("uid","==",e.uid),(0,T.orderBy)("created","desc"),(0,T.limit)(50)),r=await (0,T.getDocs)(t),a=[];r.forEach(e=>{a.push({id:e.id,...e.data()})}),J(a)}catch(e){console.error("Error loading saved resources:",e)}};(0,o.useEffect)(()=>{let t=async()=>{$(!0),et(null),await Promise.all([ei(),es(),el(),ec()]),$(!1)};e?t():$(!1)},[e]);let ed=async e=>{try{await (0,T.deleteDoc)((0,T.doc)(B.db,"saved_searches",e)),Y(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting saved search:",e)}},eu=async e=>{try{await (0,T.deleteDoc)((0,T.doc)(B.db,"saved_resources",e)),J(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting saved resource:",e)}},eh=async e=>{try{await (0,T.deleteDoc)((0,T.doc)(B.db,"harmonisations",e)),U(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting harmonization:",e)}},ex=e=>{t({query:e.query,filters:e.filters,useSearch2:e.useSearch2,hybridWeight:e.hybridWeight,maxDistance:e.maxDistance,selectedCategory:e.selectedCategory}),r.push("/discover")},ep=e=>e.filter(e=>{var t,r;let a=(null===(r=e.apiData)||void 0===r?void 0:null===(t=r.instruments)||void 0===t?void 0:t.map(e=>e.name).filter(Boolean))||[],o=(a.length>0?a.join(" with "):"Untitled Harmonization").toLowerCase().includes(er.toLowerCase()),n="all"===eo||"harmonisation"===eo;return o&&n}),em=e=>e.filter(e=>{var t,r;let a=(null===(r=e.apiData)||void 0===r?void 0:null===(t=r.instruments)||void 0===t?void 0:t.map(e=>e.name).filter(Boolean))||[],o=(a.length>0?a.join(" with "):"Untitled Harmonization").toLowerCase().includes(er.toLowerCase()),n="all"===eo||"harmonisation"===eo;return o&&n}),ev=e=>e.filter(e=>{let t=e.query.toLowerCase().includes(er.toLowerCase()),r="all"===eo||"search"===eo;return t&&r}),ey=e=>e.filter(e=>{let t=e.title.toLowerCase().includes(er.toLowerCase()),r="all"===eo||"resource"===eo;return t&&r});return e?Q?(0,a.jsx)(s.default,{sx:{p:3,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:(0,a.jsx)(d.A,{})}):(0,a.jsxs)(s.default,{sx:{p:3},children:[(0,a.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:"My Saves"}),(0,a.jsx)(l.A,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Manage your saved harmonizations, searches, and resources."}),ee&&(0,a.jsx)(u.A,{severity:"error",sx:{mb:3},children:ee}),(0,a.jsx)(s.default,{sx:{mb:3},children:(0,a.jsxs)(h.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,a.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,a.jsx)(x.A,{fullWidth:!0,placeholder:"Search saved items...",value:er,onChange:e=>ea(e.target.value),InputProps:{endAdornment:(0,a.jsx)(p.A,{position:"end",children:(0,a.jsx)(R.default,{src:(0,W.xC)()+"icons/discover.svg",alt:"Search",width:20,height:20})}),sx:{height:48,"& .MuiOutlinedInput-root":{borderRadius:24},"& .MuiOutlinedInput-notchedOutline":{borderColor:"grey.200"}}},sx:{"& .MuiOutlinedInput-root":{borderRadius:24}}})}),(0,a.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(m.A,{fullWidth:!0,children:[(0,a.jsx)(v.A,{children:"Type"}),(0,a.jsxs)(y.A,{value:eo,onChange:e=>en(e.target.value),label:"Type",children:[(0,a.jsx)(g.A,{value:"all",children:"All Types"}),(0,a.jsx)(g.A,{value:"harmonisation",children:"Harmonizations"}),(0,a.jsx)(g.A,{value:"search",children:"Searches"}),(0,a.jsx)(g.A,{value:"resource",children:"Resources"})]})]})})]})}),(0,a.jsxs)(b.A,{defaultExpanded:!0,sx:{mb:2},children:[(0,a.jsx)(A.A,{expandIcon:(0,a.jsx)(z.A,{size:20}),sx:{bgcolor:"background.paper","&:hover":{bgcolor:"action.hover"}},children:(0,a.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(I.A,{size:20}),(0,a.jsx)(l.A,{variant:"h6",children:"Saved Resources"}),(0,a.jsx)(j.A,{label:ey(Z).length,size:"small"})]})}),(0,a.jsx)(f.A,{children:(()=>{let e=ey(Z);return 0===Z.length?(0,a.jsx)(l.A,{color:"text.secondary",children:"No resources saved yet. Save studies and datasets from the discovery page to see them here."}):0===e.length?(0,a.jsx)(l.A,{color:"text.secondary",children:"No resources match your search criteria."}):(0,a.jsx)(s.default,{children:e.map(e=>{let t=N(e);return(0,a.jsxs)(s.default,{sx:{position:"relative",mb:2},children:[(0,a.jsx)(P.A,{result:t,onClick:()=>{let t;let r="study"===e.resourceType?"studies":"items";"studies"===r?t=e.slug:(t=e.slug||e.uuid,e.slug&&e.slug.length>220&&(t=e.uuid));let a="".concat((0,W.xC)()).concat(r,"/").concat(t);window.location.href=a}}),(0,a.jsx)(s.default,{sx:{position:"absolute",top:8,right:8,zIndex:1},children:(0,a.jsx)(w.A,{title:"Delete",children:(0,a.jsx)(k.A,{variant:"outlined",size:"small",onClick:t=>{t.stopPropagation(),eu(e.id)},startIcon:(0,a.jsx)(D,{size:16}),sx:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"error.main",borderColor:"error.main","&:hover":{backgroundColor:"error.main",color:"white"}},children:!V&&"Delete"})})})]},e.id)})})})()})]}),(0,a.jsxs)(b.A,{sx:{mb:2},children:[(0,a.jsx)(A.A,{expandIcon:(0,a.jsx)(z.A,{size:20}),sx:{bgcolor:"background.paper","&:hover":{bgcolor:"action.hover"}},children:(0,a.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(M,{size:20}),(0,a.jsx)(l.A,{variant:"h6",children:"Recent Public Harmonizations"}),(0,a.jsx)(j.A,{label:ep(G).length,size:"small"})]})}),(0,a.jsx)(f.A,{children:(()=>{let e=ep(G);return 0===e.length?(0,a.jsx)(l.A,{color:"text.secondary",children:0===G.length?"No recent public harmonizations found.":"No harmonizations match your search criteria."}):(0,a.jsx)(s.default,{children:e.map(e=>{var t,r,o,n,i,d,u,h;let x=(null===(r=e.apiData)||void 0===r?void 0:null===(t=r.instruments)||void 0===t?void 0:t.map(e=>e.name).filter(Boolean))||[],p=x.length>0?x.join(" with "):"Untitled Harmonization";return(0,a.jsxs)(s.default,{sx:{position:"relative",mb:2},children:[(0,a.jsx)(w.A,{title:"Click to view in Harmony",children:(0,a.jsx)(c.A,{sx:{cursor:"pointer","&:hover":{bgcolor:"action.hover"},p:2},onClick:()=>{window.location.href=(0,E.F_)(e.id)},children:(0,a.jsxs)(C.A,{sx:{p:2,"&:last-child":{pb:2}},children:[(0,a.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,a.jsx)(M,{size:16,color:"#4caf50"}),(0,a.jsx)(l.A,{variant:"h6",sx:{flex:1},children:p})]}),(0,a.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["Last accessed:"," ",(null===(i=e.lastAccessed)||void 0===i?void 0:null===(n=i.toDate)||void 0===n?void 0:null===(o=n.call(i))||void 0===o?void 0:o.toLocaleDateString())||"Unknown"," • Created: ",(null===(h=e.created)||void 0===h?void 0:null===(u=h.toDate)||void 0===u?void 0:null===(d=u.call(h))||void 0===d?void 0:d.toLocaleDateString())||"Unknown"]})]})})}),(0,a.jsx)(s.default,{sx:{position:"absolute",top:8,right:8,zIndex:1},children:(0,a.jsx)(w.A,{title:"Delete",children:(0,a.jsx)(k.A,{variant:"outlined",size:"small",onClick:t=>{t.stopPropagation(),eh(e.id)},startIcon:(0,a.jsx)(D,{size:16}),sx:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"error.main",borderColor:"error.main","&:hover":{backgroundColor:"error.main",color:"white"}},children:!V&&"Delete"})})})]},e.id)})})})()})]}),(0,a.jsxs)(b.A,{sx:{mb:2},children:[(0,a.jsx)(A.A,{expandIcon:(0,a.jsx)(z.A,{size:20}),sx:{bgcolor:"background.paper","&:hover":{bgcolor:"action.hover"}},children:(0,a.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(L,{size:20}),(0,a.jsx)(l.A,{variant:"h6",children:"My Harmonizations"}),(0,a.jsx)(j.A,{label:em(q).length,size:"small"})]})}),(0,a.jsx)(f.A,{children:(()=>{let e=em(q);return 0===q.length?(0,a.jsx)(l.A,{color:"text.secondary",children:"No harmonizations saved yet. Create some harmonizations in the Harmony app to see them here."}):0===e.length?(0,a.jsx)(l.A,{color:"text.secondary",children:"No harmonizations match your search criteria."}):(0,a.jsx)(s.default,{children:e.map(e=>{var t,r,o,n,i,d,u,h,x,p;let m=(null===(r=e.apiData)||void 0===r?void 0:null===(t=r.instruments)||void 0===t?void 0:t.map(e=>e.name).filter(Boolean))||[],v=m.length>0?m.join(" with "):"Untitled Harmonization",y=(null===(n=e.apiData)||void 0===n?void 0:null===(o=n.instruments)||void 0===o?void 0:o.reduce((e,t)=>{var r;return e+((null===(r=t.questions)||void 0===r?void 0:r.length)||0)},0))||0;return(0,a.jsxs)(s.default,{sx:{position:"relative",mb:2},children:[(0,a.jsx)(w.A,{title:"Click to view in Harmony",children:(0,a.jsx)(c.A,{sx:{cursor:"pointer","&:hover":{bgcolor:"action.hover"},p:2},onClick:()=>{window.location.href=(0,E.F_)(e.id)},children:(0,a.jsxs)(C.A,{sx:{p:2,"&:last-child":{pb:2}},children:[(0,a.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.public?(0,a.jsx)(M,{size:16,color:"#4caf50"}):(0,a.jsx)(_,{size:16,color:"#666"}),(0,a.jsx)(l.A,{variant:"h6",sx:{flex:1},children:v})]}),(0,a.jsxs)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Created:"," ",(null===(u=e.created)||void 0===u?void 0:null===(d=u.toDate)||void 0===d?void 0:null===(i=d.call(u))||void 0===i?void 0:i.toLocaleDateString())||"Unknown",e.lastAccessed&&(0,a.jsxs)(a.Fragment,{children:[" • Last accessed: ",(null===(p=e.lastAccessed)||void 0===p?void 0:null===(x=p.toDate)||void 0===x?void 0:null===(h=x.call(p))||void 0===h?void 0:h.toLocaleDateString())||"Unknown"]})]}),y>0&&(0,a.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:[y," questions harmonized"]})]})})}),(0,a.jsx)(s.default,{sx:{position:"absolute",top:8,right:8,zIndex:1},children:(0,a.jsx)(w.A,{title:"Delete",children:(0,a.jsx)(k.A,{variant:"outlined",size:"small",onClick:t=>{t.stopPropagation(),eh(e.id)},startIcon:(0,a.jsx)(D,{size:16}),sx:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"error.main",borderColor:"error.main","&:hover":{backgroundColor:"error.main",color:"white"}},children:!V&&"Delete"})})})]},e.id)})})})()})]}),(0,a.jsxs)(b.A,{sx:{mb:2},children:[(0,a.jsx)(A.A,{expandIcon:(0,a.jsx)(z.A,{size:20}),sx:{bgcolor:"background.paper","&:hover":{bgcolor:"action.hover"}},children:(0,a.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(R.default,{src:(0,W.xC)()+"icons/discover.svg",alt:"Search",width:20,height:20}),(0,a.jsx)(l.A,{variant:"h6",children:"Saved Searches"}),(0,a.jsx)(j.A,{label:ev(K).length,size:"small"})]})}),(0,a.jsx)(f.A,{children:(()=>{let e=ev(K);return 0===K.length?(0,a.jsx)(l.A,{color:"text.secondary",children:"No searches saved yet. Save searches from the discovery page to see them here."}):0===e.length?(0,a.jsx)(l.A,{color:"text.secondary",children:"No searches match your search criteria."}):(0,a.jsx)(s.default,{children:e.map(e=>{var t,r,o;let n=e.filters?Object.entries(e.filters):[],i=n.slice(0,5);return(0,a.jsxs)(s.default,{sx:{position:"relative",mb:2},children:[(0,a.jsx)(w.A,{title:"Click to re-run search",children:(0,a.jsx)(c.A,{sx:{cursor:"pointer","&:hover":{bgcolor:"action.hover"},p:2},onClick:()=>ex(e),children:(0,a.jsxs)(C.A,{sx:{p:2,"&:last-child":{pb:2}},children:[(0,a.jsx)(l.A,{variant:"h6",sx:{mb:1},children:e.query}),(0,a.jsxs)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.resultCount," results • Saved:"," ",(null===(o=e.created)||void 0===o?void 0:null===(r=o.toDate)||void 0===r?void 0:null===(t=r.call(o))||void 0===t?void 0:t.toLocaleDateString())||"Unknown"]}),i.length>0&&(0,a.jsxs)(s.default,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:[i.map(e=>{let[t,r]=e;return(0,a.jsx)(j.A,{label:"".concat(t,": ").concat(Array.isArray(r)?r.join(", "):r),size:"small",variant:"outlined",sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"}}},t)}),n.length>5&&(0,a.jsx)(j.A,{label:"+".concat(n.length-5," more"),size:"small",variant:"outlined",sx:{fontSize:"0.75rem",color:"text.secondary"}})]})]})})}),(0,a.jsx)(s.default,{sx:{position:"absolute",top:8,right:8,zIndex:1},children:(0,a.jsx)(w.A,{title:"Delete",children:(0,a.jsx)(k.A,{variant:"outlined",size:"small",onClick:t=>{t.stopPropagation(),ed(e.id)},startIcon:(0,a.jsx)(D,{size:16}),sx:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"error.main",borderColor:"error.main","&:hover":{backgroundColor:"error.main",color:"white"}},children:!V&&"Delete"})})})]},e.id)})})})()})]})]}):(0,a.jsxs)(s.default,{sx:{p:3},children:[(0,a.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:"My Saves"}),(0,a.jsx)(l.A,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"This feature allows you to manage your saved harmonizations, searches, and resources from your research."}),(0,a.jsxs)(c.A,{sx:{maxWidth:600,mx:"auto",p:3},children:[(0,a.jsx)(l.A,{variant:"h6",gutterBottom:!0,color:"primary",children:"Sign in to Access Your Saves"}),(0,a.jsx)(l.A,{variant:"body1",sx:{mb:2},children:"This feature only works if you login. It only takes a moment to create an account and allows you to save your research results for future access."}),(0,a.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"By signing in, you can:"}),(0,a.jsxs)(s.default,{component:"ul",sx:{textAlign:"left",mb:3},children:[(0,a.jsx)(l.A,{component:"li",variant:"body2",sx:{mb:1},children:"Save research studies and harmonisations"}),(0,a.jsx)(l.A,{component:"li",variant:"body2",sx:{mb:1},children:"Save your search queries and results"}),(0,a.jsx)(l.A,{component:"li",variant:"body2",sx:{mb:1},children:"Access your saved items across sessions"}),(0,a.jsx)(l.A,{component:"li",variant:"body2",sx:{mb:1},children:"Organize and manage your research collection"})]}),(0,a.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["We respect your privacy. Please review our"," ",(0,a.jsx)("a",{href:"https://harmonydata.ac.uk/privacy-policy",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit",textDecoration:"underline"},children:"privacy policy"})," ","to understand how we handle your data."]})]})]})}},53452:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(22282);let o=(0,r(89142).Ay)(a.A,{shouldForwardProp:e=>"chipVariant"!==e})(e=>{let{theme:t,chipVariant:r="primary",onClick:a=()=>{}}=e;return{onClick:a,borderRadius:8,textTransform:"none",padding:"0 16px",height:32,minHeight:32,fontSize:"0.875rem",fontWeight:500,whiteSpace:"nowrap",lineHeight:1,..."primary"===r&&{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,"&:hover":{backgroundColor:t.palette.primary.dark}},..."secondary"===r&&{backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText,"&:hover":{backgroundColor:t.palette.secondary.dark}},..."dark"===r&&{backgroundColor:"#444653",color:"#FFFFFF","&:hover":{backgroundColor:"#363742"}}}})},17146:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>c});var a=r(95155),o=r(12115);let n=null,i=async()=>{if(n)return n;console.log("\uD83D\uDD0D Loading Firebase modules dynamically");let[{auth:e},{GithubAuthProvider:t,TwitterAuthProvider:a,GoogleAuthProvider:o,signInWithPopup:i,signInWithEmailAndPassword:s,createUserWithEmailAndPassword:l,sendPasswordResetEmail:c,signOut:d,onAuthStateChanged:u}]=await Promise.all([Promise.all([r.e(9895),r.e(2154),r.e(1972),r.e(7512),r.e(1175)]).then(r.bind(r,95918)),Promise.all([r.e(9895),r.e(1972),r.e(7512)]).then(r.bind(r,14565))]);return n={auth:e,GithubAuthProvider:t,TwitterAuthProvider:a,GoogleAuthProvider:o,signInWithPopup:i,signInWithEmailAndPassword:s,createUserWithEmailAndPassword:l,sendPasswordResetEmail:c,signOut:d,onAuthStateChanged:u}},s=(0,o.createContext)({currentUser:null,login:async()=>(console.warn("Auth not available on server"),null),signup:async()=>(console.warn("Auth not available on server"),null),logout:async()=>{console.warn("Auth not available on server")},resetPassword:async()=>{console.warn("Auth not available on server")},signInWithGoogle:async()=>(console.warn("Auth not available on server"),null),signInWithGitHub:async()=>(console.warn("Auth not available on server"),null),signInWithTwitter:async()=>(console.warn("Auth not available on server"),null),loading:!1});function l(){return(0,o.useContext)(s)}function c(e){let{children:t}=e,[r,n]=(0,o.useState)(null),[l,c]=(0,o.useState)(!0),[d,u]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{try{let{auth:e,onAuthStateChanged:t}=await i();if(!e){console.warn("Firebase auth not available"),c(!1);return}return u(!0),t(e,e=>{console.log("\uD83D\uDD04 Auth state changed:",{hasUser:!!e,uid:null==e?void 0:e.uid,SSR:!1}),n(e),c(!1)})}catch(e){console.error("Failed to load Firebase modules:",e),c(!1)}})()},[]);let h={currentUser:r,...o.useMemo(()=>{let e=async e=>{let{auth:t,signInWithPopup:r}=await i();return r(t,e).then(e=>e.user).catch(t=>e.credentialFromError(t))};return{login:async(e,t)=>{let{auth:r,signInWithEmailAndPassword:a}=await i();return a(r,e,t)},signup:async(e,t)=>{let{auth:r,createUserWithEmailAndPassword:a}=await i();return a(r,e,t)},logout:async()=>{let{auth:e,signOut:t}=await i();return t(e)},resetPassword:async e=>{let{auth:t,sendPasswordResetEmail:r}=await i();return r(t,e)},signInWithGoogle:async()=>{let{GoogleAuthProvider:t}=await i();return e(new t)},signInWithGitHub:async()=>{let{GithubAuthProvider:t}=await i();return e(new t)},signInWithTwitter:async()=>{let{TwitterAuthProvider:t}=await i();return e(new t)}}},[]),loading:l};return(0,a.jsx)(s.Provider,{value:h,children:t})}},44766:(e,t,r)=>{"use strict";r.d(t,{C4:()=>a,F_:()=>n,ud:()=>o});let a=()=>"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:3000":window.location.origin,o=()=>("localhost"===window.location.hostname||window.location.hostname,"/app/"),n=e=>"".concat(a()).concat(o(),"#/model/").concat(e)},20687:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(14057).A)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[9895,2154,6586,9197,8378,2857,2282,1972,9234,2926,7512,5135,9260,3670,5779,1138,4398,7167,8441,1517,7358],()=>t(70460)),_N_E=e.O()}]);